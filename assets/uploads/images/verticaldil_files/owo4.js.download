(function($){
window.et_pb_smooth_scroll=function($target, $top_section, speed, easing){
var $window_width=$(window).width();
if($('body').hasClass('et_fixed_nav')&&$window_width > 980){
$menu_offset=$('#top-header').outerHeight() + $('#main-header').outerHeight() - 1;
}else{
$menu_offset=-1;
}
if($ ('#wpadminbar').length&&$window_width > 600){
$menu_offset +=$('#wpadminbar').outerHeight();
}
if($top_section){
$scroll_position=0;
}else{
$scroll_position=$target.offset().top - $menu_offset;
}
if(typeof easing==='undefined'){
easing='swing';
}
$('html, body').animate({ scrollTop:$scroll_position }, speed, easing);
}
window.et_pb_form_placeholders_init=function($form){
$form.find('input:text, input[type="email"], input[type="url"], textarea').each(function(index,domEle){
var $et_current_input=jQuery(domEle),
$et_comment_label=$et_current_input.siblings('label'),
et_comment_label_value=$et_current_input.siblings('label').text();
if($et_comment_label.length){
$et_comment_label.hide();
if($et_current_input.siblings('span.required')){
et_comment_label_value +=$et_current_input.siblings('span.required').text();
$et_current_input.siblings('span.required').hide();
}
$et_current_input.val(et_comment_label_value);
}}).bind('focus',function(){
var et_label_text=jQuery(this).siblings('label').text();
if(jQuery(this).siblings('span.required').length) et_label_text +=jQuery(this).siblings('span.required').text();
if(jQuery(this).val()===et_label_text) jQuery(this).val("");
}).bind('blur',function(){
var et_label_text=jQuery(this).siblings('label').text();
if(jQuery(this).siblings('span.required').length) et_label_text +=jQuery(this).siblings('span.required').text();
if(jQuery(this).val()==="") jQuery(this).val(et_label_text);
});
}
window.et_duplicate_menu=function(menu, append_to, menu_id, menu_class, menu_click_event){
append_to.each(function(){
var $this_menu=$(this),
$cloned_nav;
if(''!==menu){
menu.clone().attr('id',menu_id).removeClass().attr('class',menu_class).appendTo($this_menu);
}
$cloned_nav=$this_menu.find('> ul');
$cloned_nav.find('.menu_slide').remove();
$cloned_nav.find('li:first').addClass('et_first_mobile_item');
$cloned_nav.find('a').on('click', function(){
$(this).parents('.et_mobile_menu').siblings('.mobile_menu_bar').trigger('click');
});
if('no_click_event'!==menu_click_event){
$this_menu.on('click', '.mobile_menu_bar', function(){
if($this_menu.hasClass('closed')){
$this_menu.removeClass('closed').addClass('opened');
$cloned_nav.stop().slideDown(500);
}else{
$this_menu.removeClass('opened').addClass('closed');
$cloned_nav.stop().slideUp(500);
}
return false;
});
}});
$('#mobile_menu .centered-inline-logo-wrap').remove();
}
window.et_pb_remove_placeholder_text=function($form){
$form.find('input:text, textarea').each(function(index,domEle){
var $et_current_input=jQuery(domEle),
$et_label=$et_current_input.siblings('label'),
et_label_value=$et_current_input.siblings('label').text();
if($et_label.length&&$et_label.is(':hidden')){
if($et_label.text()==$et_current_input.val())
$et_current_input.val('');
}});
}
window.et_fix_fullscreen_section=function(){
var $et_window=$(window);
$('section.et_pb_fullscreen').each(function(){
var $this_section=$(this);
$.proxy(et_calc_fullscreen_section, $this_section)();
$et_window.on('resize', $.proxy(et_calc_fullscreen_section, $this_section));
});
}
window.et_bar_counters_init=function($bar_item){
if(! $bar_item.length){
return;
}
var $bar_container=$bar_item.closest('.et_pb_counter_container'),
bar_item_width=$bar_item.attr('data-width'),
bar_item_padding=Math.ceil(parseFloat($bar_item.css('paddingLeft'))) + Math.ceil(parseFloat($bar_item.css('paddingRight'))),
$bar_item_text=$bar_item.children('.et_pb_counter_amount_number'),
calculated_width=($bar_container.width() - $bar_item_text.innerWidth()) / 100 * parseFloat(bar_item_width),
bar_item_text_width=calculated_width + $bar_item_text.innerWidth();
$bar_item.css({
'width':bar_item_text_width
});
}
window.et_fix_pricing_currency_position=function($pricing_table){
var $all_pricing_tables=typeof $pricing_table!=='undefined' ? $pricing_table:$('.et_pb_pricing_table');
if(! $all_pricing_tables.length){
return;
}
$all_pricing_tables.each(function(){
var $this_table=$(this),
$price_container=$this_table.find('.et_pb_et_price'),
$currency=$price_container.length ? $price_container.find('.et_pb_dollar_sign'):false,
$price=$price_container.length ? $price_container.find('.et_pb_sum'):false;
if(! $currency||! $price){
return;
}
$currency.css({ 'marginLeft':- $currency.width() + 'px' });
});
}
window.et_pb_set_responsive_grid=function($grid_items_container, single_item_selector){
setTimeout(function(){
var container_width=$grid_items_container.innerWidth(),
$grid_items=$grid_items_container.find(single_item_selector),
item_width=$grid_items.outerWidth(true),
last_item_margin=item_width - $grid_items.outerWidth(),
columns_count=Math.round(( container_width + last_item_margin) / item_width),
counter=1,
first_in_row=1;
$grid_items.removeClass('last_in_row first_in_row');
$grid_items.filter(':visible').each(function(){
var $this_el=$(this);
if(! $this_el.hasClass('inactive')){
if(first_in_row===counter){
$this_el.addClass('first_in_row');
}
if(0===counter % columns_count){
$this_el.addClass('last_in_row');
first_in_row=counter + 1;
}
counter++;
}});
}, 1);
};
window.et_pb_set_tabs_height=function($tabs_module){
if(typeof $tabs_module==='undefined'){
$tabs_module=$('.et_pb_tabs');
}
if(! $tabs_module.length){
return;
}
$tabs_module.each(function(){
var $tab_controls=$(this).find('.et_pb_tabs_controls');
var $all_tabs=$tab_controls.find('li');
var max_height=0;
var small_columns='.et_pb_column_1_3, .et_pb_column_1_4, .et_pb_column_3_8';
var in_small_column=$(this).parents(small_columns).length > 0;
var on_small_screen=parseFloat($(window).width()) < 768;
var vertically_stacked=in_small_column||on_small_screen;
if(vertically_stacked){
$(this).addClass('et_pb_tabs_vertically_stacked');
}
if($all_tabs.length){
$tab_controls.removeAttr('style');
$all_tabs.each(function(){
var tab_height=$(this).outerHeight();
if(vertically_stacked){
return;
}
if(tab_height > max_height){
max_height=tab_height;
}});
}
if(0!==max_height){
$tab_controls.css('min-height', max_height);
}});
}
window.et_pb_box_shadow_apply_overlay=function (el){
var pointerEventsSupport=document.body.style.pointerEvents!==undefined
&&
(document.documentMode===undefined||document.documentMode >=11);
if(pointerEventsSupport){
$(el).each(function (){
if(! $(this).children('.box-shadow-overlay').length){
$(this)
.addClass('has-box-shadow-overlay')
.prepend('<div class="box-shadow-overlay"></div>');
}});
}else{
$(el).addClass('.et-box-shadow-no-overlay');
}}
window.et_pb_init_nav_menu=function($et_menus){
$et_menus.each(function(){
var $et_menu=$(this);
if($et_menu.data('et-is-menu-ready')){
return;
}
$et_menu.find('li').hover(function(){
window.et_pb_toggle_nav_menu($(this), 'open');
}, function(){
window.et_pb_toggle_nav_menu($(this), 'close');
});
$('body').on('touchend', function(event){
if($(event.target).closest('ul.nav, ul.menu').length < 1&&$('.et-hover').length > 0){
window.et_pb_toggle_nav_menu($('.et-hover'), 'close');
}});
$et_menu.find('li.menu-item-has-children').on('touchend', function(event){
var $closest_li=$(event.target).closest('.menu-item');
if(! $closest_li.hasClass('menu-item-has-children')){
return;
}
var $this_el=$(this);
var is_mega_menu_opened=$closest_li.closest('.mega-menu-parent.et-touch-hover').length > 0;
if($this_el.hasClass('et-touch-hover')||is_mega_menu_opened){
window.location=$this_el.find('>a').attr('href');
}else{
if($(event.target).closest('.et-touch-hover').length < 1){
window.et_pb_toggle_nav_menu($('.et-hover'), 'close', 0);
}
$this_el.addClass('et-touch-hover');
window.et_pb_toggle_nav_menu($this_el, 'open');
}
event.preventDefault();
event.stopPropagation();
});
$et_menu.find('li.mega-menu').each(function(){
var $li_mega_menu=$(this),
$li_mega_menu_item=$li_mega_menu.children('ul').children('li'),
li_mega_menu_item_count=$li_mega_menu_item.length;
if(li_mega_menu_item_count < 4){
$li_mega_menu.addClass('mega-menu-parent mega-menu-parent-' + li_mega_menu_item_count);
}});
$et_menu.data('et-is-menu-ready', 'ready');
});
}
window.et_pb_toggle_nav_menu=function($element, state, delay){
if('open'===state){
if(! $element.closest('li.mega-menu').length||$element.hasClass('mega-menu')){
$element.addClass('et-show-dropdown');
$element.removeClass('et-hover').addClass('et-hover');
}}else{
var closeDelay=typeof delay!=='undefined' ? delay:200;
$element.removeClass('et-show-dropdown');
$element.removeClass('et-touch-hover');
setTimeout(function(){
if(! $element.hasClass('et-show-dropdown')){
$element.removeClass('et-hover');
}}, closeDelay);
}}
})(jQuery);
(function($){
'use strict';
if(typeof wpcf7==='undefined'||wpcf7===null){
return;
}
wpcf7=$.extend({
cached: 0,
inputs: []
}, wpcf7);
$(function(){
wpcf7.supportHtml5=(function(){
var features={};
var input=document.createElement('input');
features.placeholder='placeholder' in input;
var inputTypes=[ 'email', 'url', 'tel', 'number', 'range', 'date' ];
$.each(inputTypes, function(index, value){
input.setAttribute('type', value);
features[ value ]=input.type!=='text';
});
return features;
})();
$('div.wpcf7 > form').each(function(){
var $form=$(this);
wpcf7.initForm($form);
if(wpcf7.cached){
wpcf7.refill($form);
}});
});
wpcf7.getId=function(form){
return parseInt($('input[name="_wpcf7"]', form).val(), 10);
};
wpcf7.initForm=function(form){
var $form=$(form);
$form.submit(function(event){
if(typeof window.FormData!=='function'){
return;
}
wpcf7.submit($form);
event.preventDefault();
});
$('.wpcf7-submit', $form).after('<span class="ajax-loader"></span>');
wpcf7.toggleSubmit($form);
$form.on('click', '.wpcf7-acceptance', function(){
wpcf7.toggleSubmit($form);
});
$('.wpcf7-exclusive-checkbox', $form).on('click', 'input:checkbox', function(){
var name=$(this).attr('name');
$form.find('input:checkbox[name="' + name + '"]').not(this).prop('checked', false);
});
$('.wpcf7-list-item.has-free-text', $form).each(function(){
var $freetext=$(':input.wpcf7-free-text', this);
var $wrap=$(this).closest('.wpcf7-form-control');
if($(':checkbox, :radio', this).is(':checked')){
$freetext.prop('disabled', false);
}else{
$freetext.prop('disabled', true);
}
$wrap.on('change', ':checkbox, :radio', function(){
var $cb=$('.has-free-text', $wrap).find(':checkbox, :radio');
if($cb.is(':checked')){
$freetext.prop('disabled', false).focus();
}else{
$freetext.prop('disabled', true);
}});
});
if(! wpcf7.supportHtml5.placeholder){
$('[placeholder]', $form).each(function(){
$(this).val($(this).attr('placeholder'));
$(this).addClass('placeheld');
$(this).focus(function(){
if($(this).hasClass('placeheld')){
$(this).val('').removeClass('placeheld');
}});
$(this).blur(function(){
if(''===$(this).val()){
$(this).val($(this).attr('placeholder'));
$(this).addClass('placeheld');
}});
});
}
if(wpcf7.jqueryUi&&! wpcf7.supportHtml5.date){
$form.find('input.wpcf7-date[type="date"]').each(function(){
$(this).datepicker({
dateFormat: 'yy-mm-dd',
minDate: new Date($(this).attr('min')),
maxDate: new Date($(this).attr('max'))
});
});
}
if(wpcf7.jqueryUi&&! wpcf7.supportHtml5.number){
$form.find('input.wpcf7-number[type="number"]').each(function(){
$(this).spinner({
min: $(this).attr('min'),
max: $(this).attr('max'),
step: $(this).attr('step')
});
});
}
$('.wpcf7-character-count', $form).each(function(){
var $count=$(this);
var name=$count.attr('data-target-name');
var down=$count.hasClass('down');
var starting=parseInt($count.attr('data-starting-value'), 10);
var maximum=parseInt($count.attr('data-maximum-value'), 10);
var minimum=parseInt($count.attr('data-minimum-value'), 10);
var updateCount=function(target){
var $target=$(target);
var length=$target.val().length;
var count=down ? starting - length:length;
$count.attr('data-current-value', count);
$count.text(count);
if(maximum&&maximum < length){
$count.addClass('too-long');
}else{
$count.removeClass('too-long');
}
if(minimum&&length < minimum){
$count.addClass('too-short');
}else{
$count.removeClass('too-short');
}};
$(':input[name="' + name + '"]', $form).each(function(){
updateCount(this);
$(this).keyup(function(){
updateCount(this);
});
});
});
$form.on('change', '.wpcf7-validates-as-url', function(){
var val=$.trim($(this).val());
if(val
&& ! val.match(/^[a-z][a-z0-9.+-]*:/i)
&& -1!==val.indexOf('.')){
val=val.replace(/^\/+/, '');
val='http://' + val;
}
$(this).val(val);
});
};
wpcf7.submit=function(form){
if(typeof window.FormData!=='function'){
return;
}
var $form=$(form);
$('.ajax-loader', $form).addClass('is-active');
$('[placeholder].placeheld', $form).each(function(i, n){
$(n).val('');
});
wpcf7.clearResponse($form);
var formData=new FormData($form.get(0));
var detail={
id: $form.closest('div.wpcf7').attr('id'),
status: 'init',
inputs: [],
formData: formData
};
$.each($form.serializeArray(), function(i, field){
if('_wpcf7'==field.name){
detail.contactFormId=field.value;
}else if('_wpcf7_version'==field.name){
detail.pluginVersion=field.value;
}else if('_wpcf7_locale'==field.name){
detail.contactFormLocale=field.value;
}else if('_wpcf7_unit_tag'==field.name){
detail.unitTag=field.value;
}else if('_wpcf7_container_post'==field.name){
detail.containerPostId=field.value;
}else if(field.name.match(/^_wpcf7_\w+_free_text_/)){
var owner=field.name.replace(/^_wpcf7_\w+_free_text_/, '');
detail.inputs.push({
name: owner + '-free-text',
value: field.value
});
}else if(field.name.match(/^_/)){
}else{
detail.inputs.push(field);
}});
wpcf7.triggerEvent($form.closest('div.wpcf7'), 'beforesubmit', detail);
var ajaxSuccess=function(data, status, xhr, $form){
detail.id=$(data.into).attr('id');
detail.status=data.status;
detail.apiResponse=data;
var $message=$('.wpcf7-response-output', $form);
switch(data.status){
case 'validation_failed':
$.each(data.invalidFields, function(i, n){
$(n.into, $form).each(function(){
wpcf7.notValidTip(this, n.message);
$('.wpcf7-form-control', this).addClass('wpcf7-not-valid');
$('[aria-invalid]', this).attr('aria-invalid', 'true');
});
});
$message.addClass('wpcf7-validation-errors');
$form.addClass('invalid');
wpcf7.triggerEvent(data.into, 'invalid', detail);
break;
case 'acceptance_missing':
$message.addClass('wpcf7-acceptance-missing');
$form.addClass('unaccepted');
wpcf7.triggerEvent(data.into, 'unaccepted', detail);
break;
case 'spam':
$message.addClass('wpcf7-spam-blocked');
$form.addClass('spam');
$('[name="g-recaptcha-response"]', $form).each(function(){
if(''===$(this).val()){
var $recaptcha=$(this).closest('.wpcf7-form-control-wrap');
wpcf7.notValidTip($recaptcha, wpcf7.recaptcha.messages.empty);
}});
wpcf7.triggerEvent(data.into, 'spam', detail);
break;
case 'aborted':
$message.addClass('wpcf7-aborted');
$form.addClass('aborted');
wpcf7.triggerEvent(data.into, 'aborted', detail);
break;
case 'mail_sent':
$message.addClass('wpcf7-mail-sent-ok');
$form.addClass('sent');
wpcf7.triggerEvent(data.into, 'mailsent', detail);
break;
case 'mail_failed':
$message.addClass('wpcf7-mail-sent-ng');
$form.addClass('failed');
wpcf7.triggerEvent(data.into, 'mailfailed', detail);
break;
default:
var customStatusClass='custom-'
+ data.status.replace(/[^0-9a-z]+/i, '-');
$message.addClass('wpcf7-' + customStatusClass);
$form.addClass(customStatusClass);
}
wpcf7.refill($form, data);
wpcf7.triggerEvent(data.into, 'submit', detail);
if('mail_sent'==data.status){
$form.each(function(){
this.reset();
});
}
$form.find('[placeholder].placeheld').each(function(i, n){
$(n).val($(n).attr('placeholder'));
});
$message.html('').append(data.message).slideDown('fast');
$message.attr('role', 'alert');
$('.screen-reader-response', $form.closest('.wpcf7')).each(function(){
var $response=$(this);
$response.html('').attr('role', '').append(data.message);
if(data.invalidFields){
var $invalids=$('<ul></ul>');
$.each(data.invalidFields, function(i, n){
if(n.idref){
var $li=$('<li></li>').append($('<a></a>').attr('href', '#' + n.idref).append(n.message));
}else{
var $li=$('<li></li>').append(n.message);
}
$invalids.append($li);
});
$response.append($invalids);
}
$response.attr('role', 'alert').focus();
});
};
$.ajax({
type: 'POST',
url: wpcf7.apiSettings.getRoute('/contact-forms/' + wpcf7.getId($form) + '/feedback'),
data: formData,
dataType: 'json',
processData: false,
contentType: false
}).done(function(data, status, xhr){
ajaxSuccess(data, status, xhr, $form);
$('.ajax-loader', $form).removeClass('is-active');
}).fail(function(xhr, status, error){
var $e=$('<div class="ajax-error"></div>').text(error.message);
$form.after($e);
});
};
wpcf7.triggerEvent=function(target, name, detail){
var $target=$(target);
var event=new CustomEvent('wpcf7' + name, {
bubbles: true,
detail: detail
});
$target.get(0).dispatchEvent(event);
$target.trigger('wpcf7:' + name, detail);
$target.trigger(name + '.wpcf7', detail);
};
wpcf7.toggleSubmit=function(form, state){
var $form=$(form);
var $submit=$('input:submit', $form);
if(typeof state!=='undefined'){
$submit.prop('disabled', ! state);
return;
}
if($form.hasClass('wpcf7-acceptance-as-validation')){
return;
}
$submit.prop('disabled', false);
$('.wpcf7-acceptance', $form).each(function(){
var $span=$(this);
var $input=$('input:checkbox', $span);
if(! $span.hasClass('optional')){
if($span.hasClass('invert')&&$input.is(':checked')
|| ! $span.hasClass('invert')&&! $input.is(':checked')){
$submit.prop('disabled', true);
return false;
}}
});
};
wpcf7.notValidTip=function(target, message){
var $target=$(target);
$('.wpcf7-not-valid-tip', $target).remove();
$('<span role="alert" class="wpcf7-not-valid-tip"></span>')
.text(message).appendTo($target);
if($target.is('.use-floating-validation-tip *')){
var fadeOut=function(target){
$(target).not(':hidden').animate({
opacity: 0
}, 'fast', function(){
$(this).css({ 'z-index': -100 });
});
};
$target.on('mouseover', '.wpcf7-not-valid-tip', function(){
fadeOut(this);
});
$target.on('focus', ':input', function(){
fadeOut($('.wpcf7-not-valid-tip', $target));
});
}};
wpcf7.refill=function(form, data){
var $form=$(form);
var refillCaptcha=function($form, items){
$.each(items, function(i, n){
$form.find(':input[name="' + i + '"]').val('');
$form.find('img.wpcf7-captcha-' + i).attr('src', n);
var match=/([0-9]+)\.(png|gif|jpeg)$/.exec(n);
$form.find('input:hidden[name="_wpcf7_captcha_challenge_' + i + '"]').attr('value', match[ 1 ]);
});
};
var refillQuiz=function($form, items){
$.each(items, function(i, n){
$form.find(':input[name="' + i + '"]').val('');
$form.find(':input[name="' + i + '"]').siblings('span.wpcf7-quiz-label').text(n[ 0 ]);
$form.find('input:hidden[name="_wpcf7_quiz_answer_' + i + '"]').attr('value', n[ 1 ]);
});
};
if(typeof data==='undefined'){
$.ajax({
type: 'GET',
url: wpcf7.apiSettings.getRoute('/contact-forms/' + wpcf7.getId($form) + '/refill'),
beforeSend: function(xhr){
var nonce=$form.find(':input[name="_wpnonce"]').val();
if(nonce){
xhr.setRequestHeader('X-WP-Nonce', nonce);
}},
dataType: 'json'
}).done(function(data, status, xhr){
if(data.captcha){
refillCaptcha($form, data.captcha);
}
if(data.quiz){
refillQuiz($form, data.quiz);
}});
}else{
if(data.captcha){
refillCaptcha($form, data.captcha);
}
if(data.quiz){
refillQuiz($form, data.quiz);
}}
};
wpcf7.clearResponse=function(form){
var $form=$(form);
$form.removeClass('invalid spam sent failed');
$form.siblings('.screen-reader-response').html('').attr('role', '');
$('.wpcf7-not-valid-tip', $form).remove();
$('[aria-invalid]', $form).attr('aria-invalid', 'false');
$('.wpcf7-form-control', $form).removeClass('wpcf7-not-valid');
$('.wpcf7-response-output', $form)
.hide().empty().removeAttr('role')
.removeClass('wpcf7-mail-sent-ok wpcf7-mail-sent-ng wpcf7-validation-errors wpcf7-spam-blocked');
};
wpcf7.apiSettings.getRoute=function(path){
var url=wpcf7.apiSettings.root;
url=url.replace(wpcf7.apiSettings.namespace,
wpcf7.apiSettings.namespace + path);
return url;
};})(jQuery);
(function (){
if(typeof window.CustomEvent==="function") return false;
function CustomEvent(event, params){
params=params||{ bubbles: false, cancelable: false, detail: undefined };
var evt=document.createEvent('CustomEvent');
evt.initCustomEvent(event,
params.bubbles, params.cancelable, params.detail);
return evt;
}
CustomEvent.prototype=window.Event.prototype;
window.CustomEvent=CustomEvent;
})();
(function(e,t,n){typeof define=="function"&&define.amd?define(["jquery"],function(r){return n(r,e,t),r.mobile}):n(e.jQuery,e,t)})(this,document,function(e,t,n,r){(function(e,t,n,r){function T(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function N(t,n){var i=t.type,s,o,a,l,c,h,p,d,v;t=e.Event(t),t.type=n,s=t.originalEvent,o=e.event.props,i.search(/^(mouse|click)/)>-1&&(o=f);if(s)for(p=o.length,l;p;)l=o[--p],t[l]=s[l];i.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(i.search(/^touch/)!==-1){a=T(s),i=a.touches,c=a.changedTouches,h=i&&i.length?i[0]:c&&c.length?c[0]:r;if(h)for(d=0,v=u.length;d<v;d++)l=u[d],t[l]=h[l]}return t}function C(t){var n={},r,s;while(t){r=e.data(t,i);for(s in r)r[s]&&(n[s]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function k(t,n){var r;while(t){r=e.data(t,i);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function L(){g=!1}function A(){g=!0}function O(){E=0,v.length=0,m=!1,A()}function M(){L()}function _(){D(),c=setTimeout(function(){c=0,O()},e.vmouse.resetTimerDuration)}function D(){c&&(clearTimeout(c),c=0)}function P(t,n,r){var i;if(r&&r[t]||!r&&k(n.target,t))i=N(n,t),e(n.target).trigger(i);return i}function H(t){var n=e.data(t.target,s),r;!m&&(!E||E!==n)&&(r=P("v"+t.type,t),r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function B(t){var n=T(t).touches,r,i,o;n&&n.length===1&&(r=t.target,i=C(r),i.hasVirtualBinding&&(E=w++,e.data(r,s,E),D(),M(),d=!1,o=T(t).touches[0],h=o.pageX,p=o.pageY,P("vmouseover",t,i),P("vmousedown",t,i)))}function j(e){if(g)return;d||P("vmousecancel",e,C(e.target)),d=!0,_()}function F(t){if(g)return;var n=T(t).touches[0],r=d,i=e.vmouse.moveDistanceThreshold,s=C(t.target);d=d||Math.abs(n.pageX-h)>i||Math.abs(n.pageY-p)>i,d&&!r&&P("vmousecancel",t,s),P("vmousemove",t,s),_()}function I(e){if(g)return;A();var t=C(e.target),n,r;P("vmouseup",e,t),d||(n=P("vclick",e,t),n&&n.isDefaultPrevented()&&(r=T(e).changedTouches[0],v.push({touchID:E,x:r.clientX,y:r.clientY}),m=!0)),P("vmouseout",e,t),d=!1,_()}function q(t){var n=e.data(t,i),r;if(n)for(r in n)if(n[r])return!0;return!1}function R(){}function U(t){var n=t.substr(1);return{setup:function(){q(this)||e.data(this,i,{});var r=e.data(this,i);r[t]=!0,l[t]=(l[t]||0)+1,l[t]===1&&b.bind(n,H),e(this).bind(n,R),y&&(l.touchstart=(l.touchstart||0)+1,l.touchstart===1&&b.bind("touchstart",B).bind("touchend",I).bind("touchmove",F).bind("scroll",j))},teardown:function(){--l[t],l[t]||b.unbind(n,H),y&&(--l.touchstart,l.touchstart||b.unbind("touchstart",B).unbind("touchmove",F).unbind("touchend",I).unbind("scroll",j));var r=e(this),s=e.data(this,i);s&&(s[t]=!1),r.unbind(n,R),q(this)||r.removeData(i)}}}var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],f=e.event.props.concat(a),l={},c=0,h=0,p=0,d=!1,v=[],m=!1,g=!1,y="addEventListener"in n,b=e(n),w=1,E=0,S,x;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(x=0;x<o.length;x++)e.event.special[o[x]]=U(o[x]);y&&n.addEventListener("click",function(t){var n=v.length,r=t.target,i,o,u,a,f,l;if(n){i=t.clientX,o=t.clientY,S=e.vmouse.clickDistanceThreshold,u=r;while(u){for(a=0;a<n;a++){f=v[a],l=0;if(u===r&&Math.abs(f.x-i)<S&&Math.abs(f.y-o)<S||e.data(u,s)===f.touchID){t.preventDefault(),t.stopPropagation();return}}u=u.parentNode}}},!0)})(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){function l(t,n,i,s){var o=i.type;i.type=n,s?e.event.trigger(i,r,t):e.event.dispatch.call(t,i),i.type=o}var i=e(n),s=e.mobile.support.touch,o="touchmove scroll",u=s?"touchstart":"mousedown",a=s?"touchend":"mouseup",f=s?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function s(e,n){r=n,l(t,r?"scrollstart":"scrollstop",e)}var t=this,n=e(t),r,i;n.bind(o,function(t){if(!e.event.special.scrollstart.enabled)return;r||s(t,!0),clearTimeout(i),i=setTimeout(function(){s(t,!1)},50)})},teardown:function(){e(this).unbind(o)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),r=!1;n.bind("vmousedown",function(s){function a(){clearTimeout(u)}function f(){a(),n.unbind("vclick",c).unbind("vmouseup",a),i.unbind("vmousecancel",f)}function c(e){f(),!r&&o===e.target?l(t,"tap",e):r&&e.preventDefault()}r=!1;if(s.which&&s.which!==1)return!1;var o=s.target,u;n.bind("vmouseup",a).bind("vclick",c),i.bind("vmousecancel",f),u=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(r=!0),l(t,"taphold",e.Event("taphold",{target:o}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,r=t.pageYOffset,i=e.clientX,s=e.clientY;if(e.pageY===0&&Math.floor(s)>Math.floor(e.pageY)||e.pageX===0&&Math.floor(i)>Math.floor(e.pageX))i-=n,s-=r;else if(s<e.pageY-r||i<e.pageX-n)i=e.pageX-n,s=e.pageY-r;return{x:i,y:s}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y]}},handleSwipe:function(t,n,r,i){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return l(r,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:n}),!0),l(r,s,e.Event(s,{target:i,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,r=e(n),s={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=s,s.start=function(t){if(e.event.special.swipe.eventInProgress)return;e.event.special.swipe.eventInProgress=!0;var r,o=e.event.special.swipe.start(t),u=t.target,l=!1;s.move=function(t){if(!o||t.isDefaultPrevented())return;r=e.event.special.swipe.stop(t),l||(l=e.event.special.swipe.handleSwipe(o,r,n,u),l&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(o.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()},s.stop=function(){l=!0,e.event.special.swipe.eventInProgress=!1,i.off(f,s.move),s.move=null},i.on(f,s.move).one(a,s.stop)},r.on(u,s.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,t.length--,t.length===0&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(u,n.start),n.move&&i.off(f,n.move),n.stop&&i.off(a,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this)});
(function($){
window.et_calculating_scroll_position=false;
window.et_side_nav_links_initialized=false;
var $et_pb_post_fullwidth=$('.single.et_pb_pagebuilder_layout.et_full_width_page'),
et_is_mobile_device=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/),
et_is_ipad=navigator.userAgent.match(/iPad/),
$et_container=$('.container'),
et_container_width=$et_container.width(),
et_is_fixed_nav=$('body').hasClass('et_fixed_nav')||$('body').hasClass('et_vertical_fixed'),
et_is_vertical_fixed_nav=$('body').hasClass('et_vertical_fixed'),
et_is_rtl=$('body').hasClass('rtl'),
et_hide_nav=$('body').hasClass('et_hide_nav'),
et_header_style_left=$('body').hasClass('et_header_style_left'),
$top_header=$('#top-header'),
$main_header=$('#main-header'),
$main_container_wrapper=$('#page-container'),
$et_main_content_first_row=$('#main-content .container:first-child'),
$et_main_content_first_row_meta_wrapper=$et_main_content_first_row.find('.et_post_meta_wrapper:first'),
$et_main_content_first_row_meta_wrapper_title=$et_main_content_first_row_meta_wrapper.find('h1.entry-title'),
$et_main_content_first_row_content=$et_main_content_first_row.find('.entry-content:first'),
$et_single_post=$('body.single-post'),
$et_window=$(window),
etRecalculateOffset=false,
et_header_height,
et_header_modifier,
et_header_offset,
et_primary_header_top,
$et_header_style_split=$('.et_header_style_split'),
$et_top_navigation=$('#et-top-navigation'),
$logo=$('#logo'),
$et_pb_first_row=$('body.et_pb_pagebuilder_layout .et_pb_section:visible:first'),
et_is_touch_device='ontouchstart' in window||navigator.maxTouchPoints;
if($("body").hasClass("woocommerce")&&$("body").hasClass("single-product")&&$(".woocommerce-product-gallery").length > 0){
var gal=$(".woocommerce-product-gallery")[0];
var newstr=gal.outerHTML.replace('data-columns', 'data-cols');
gal.outerHTML=newstr;
}
$(document).ready(function(){
var $et_top_menu=$('ul.nav, ul.menu'),
$et_search_icon=$('#et_search_icon'),
et_parent_menu_longpress_limit=300,
et_parent_menu_longpress_start,
et_parent_menu_click=true;
window.et_pb_init_nav_menu($et_top_menu);
function et_header_menu_split(){
var $logo_container=$('#main-header > .container > .logo_container'),
$logo_container_splitted=$('.centered-inline-logo-wrap > .logo_container'),
et_top_navigation_li_size=$et_top_navigation.children('nav').children('ul').children('li').size(),
et_top_navigation_li_break_index=Math.round(et_top_navigation_li_size / 2) - 1,
window_width=$et_window.prop('outerWidth')||$et_window.width();
if(window_width > 980&&$logo_container.length&&$('body').hasClass('et_header_style_split')){
$('<li class="centered-inline-logo-wrap"></li>').insertAfter($et_top_navigation.find('nav > ul >li:nth('+et_top_navigation_li_break_index+')'));
$logo_container.appendTo($et_top_navigation.find('.centered-inline-logo-wrap'));
}
if(window_width <=980&&$logo_container_splitted.length){
$logo_container_splitted.prependTo('#main-header > .container');
$('#main-header .centered-inline-logo-wrap').remove();
}}
function et_set_right_vertical_menu(){
var $body=$('body');
if($body.hasClass('et_boxed_layout')&&$body.hasClass('et_vertical_fixed')&&$body.hasClass('et_vertical_right')){
var header_offset=parseFloat($('#page-container').css('margin-right'));
header_offset +=(parseFloat($('#et-main-area').css('margin-right')) - 225);
header_offset=0 > header_offset ? 0:header_offset;
$('#main-header').addClass('et_vertical_menu_set').css({ 'left': '', 'right': header_offset });
}}
if($et_header_style_split.length&&! window.et_is_vertical_nav){
et_header_menu_split();
$(window).resize(function(){
et_header_menu_split();
});
}
if($('ul.et_disable_top_tier').length){
$("ul.et_disable_top_tier > li > ul").prev('a').attr('href','#');
}
if(window.et_is_vertical_nav){
if($('#main-header').height() < $('#et-top-navigation').height()){
$('#main-header').height($('#et-top-navigation').height() + $('#logo').height() + 100);
}
et_set_right_vertical_menu();
}
window.et_calculate_header_values=function(){
var $top_header=$('#top-header'),
secondary_nav_height=$top_header.length&&$top_header.is(':visible') ? parseInt($top_header.innerHeight()):0,
admin_bar_height=$('#wpadminbar').length ? parseInt($('#wpadminbar').innerHeight()):0,
$slide_menu_container=$('.et_header_style_slide .et_slide_in_menu_container');
et_header_height=parseInt($('#main-header').innerHeight()) + secondary_nav_height;
et_header_modifier=et_header_height <=90 ? et_header_height - 29:et_header_height - 56;
et_header_offset=et_header_modifier + admin_bar_height;
et_primary_header_top=secondary_nav_height + admin_bar_height;
if($slide_menu_container.length&&! $('body').hasClass('et_pb_slide_menu_active')){
$slide_menu_container.css({ right: '-' + parseInt($slide_menu_container.innerWidth()) + 'px', 'display':'none' });
if($('body').hasClass('et_boxed_layout')){
var page_container_margin=$main_container_wrapper.css('margin-left');
$main_header.css({ left:page_container_margin });
}}
};
var $comment_form=$('#commentform');
et_pb_form_placeholders_init($comment_form);
$comment_form.submit(function(){
et_pb_remove_placeholder_text($comment_form);
});
et_duplicate_menu($('#et-top-navigation ul.nav'), $('#et-top-navigation .mobile_nav'), 'mobile_menu', 'et_mobile_menu');
et_duplicate_menu('', $('.et_pb_fullscreen_nav_container'), 'mobile_menu_slide', 'et_mobile_menu', 'no_click_event');
if($('#et-secondary-nav').length){
$('#et-top-navigation #mobile_menu').append($('#et-secondary-nav').clone().html());
}
if($('.et_slide_in_menu_container').length){
var $item_with_sub=$('.et_slide_in_menu_container').find('.menu-item-has-children > a');
if($item_with_sub.length){
$item_with_sub.append('<span class="et_mobile_menu_arrow"></span>');
}}
function et_change_primary_nav_position(delay){
setTimeout(function(){
var $body=$('body'),
$wpadminbar=$('#wpadminbar'),
$top_header=$('#top-header'),
et_primary_header_top=0;
if($wpadminbar.length){
et_primary_header_top +=$wpadminbar.innerHeight();
}
if($top_header.length&&$top_header.is(':visible')){
et_primary_header_top +=$top_header.innerHeight();
}
if(! window.et_is_vertical_nav&&($body.hasClass('et_fixed_nav'))){
$('#main-header').css('top', et_primary_header_top);
}}, delay);
}
function et_hide_nav_transofrm(){
var $body=$('body'),
$body_height=$(document).height(),
$viewport_height=$(window).height() + et_header_height + 200;
if($body.hasClass('et_hide_nav')||$body.hasClass('et_hide_nav_disabled')&&($body.hasClass('et_fixed_nav'))){
if($body_height > $viewport_height){
if($body.hasClass('et_hide_nav_disabled')){
$body.addClass('et_hide_nav');
$body.removeClass('et_hide_nav_disabled');
}
$('#main-header').css('transform', 'translateY(-' + et_header_height +'px)');
$('#top-header').css('transform', 'translateY(-' + et_header_height +'px)');
}else{
$('#main-header').css({ 'transform': 'translateY(0)', 'opacity': '1' });
$('#top-header').css({ 'transform': 'translateY(0)', 'opacity': '1' });
$body.removeClass('et_hide_nav');
$body.addClass('et_hide_nav_disabled');
}}
}
function et_save_initial_page_container_style($selector, property){
var styling={};
styling[property]=$selector.css(property);
$selector.attr({
'data-fix-page-container':'on'
}).data({
'fix_page_container_style':styling
});
}
function et_page_load_scroll_to_anchor(){
if($(window.et_location_hash).length===0){
return;
}
var $map_container=$(window.et_location_hash + ' .et_pb_map_container'),
$map=$map_container.children('.et_pb_map'),
$target=$(window.et_location_hash);
$target.css('display', window.et_location_hash_style);
var distance=('undefined'!==typeof($target.offset().top)) ? $target.offset().top:0,
speed=(distance > 4000) ? 1600:800;
if($map_container.length){
google.maps.event.trigger($map[0], 'resize');
}
setTimeout(function(){
et_pb_smooth_scroll($target, false, speed, 'swing');
setTimeout(function(){
et_pb_smooth_scroll($target, false, 150, 'linear');
}, speed + 25);
}, 700);
}
function et_get_saved_padding_margin_value(saved_value, order){
if(typeof saved_value==='undefined'){
return false;
}
var values=saved_value.split('|');
return typeof values[order]!=='undefined' ? values[order]:false;
}
function et_fix_page_container_position(){
var et_window_width=parseInt($et_window.width()),
$top_header=$('#top-header'),
$et_pb_first_row=$('body.et_pb_pagebuilder_layout .et_pb_section:visible:first'),
secondary_nav_height=$top_header.length&&$top_header.is(':visible') ? parseInt($top_header.innerHeight()):0,
main_header_fixed_height=0,
header_height;
$('*[data-fix-page-container="on"]').each(function(){
var $adjusted_element=$(this),
styling=$adjusted_element.data();
$adjusted_element.css(styling.fix_page_container_style);
});
if(et_window_width > 980&&! $main_header.attr('data-height-loaded')){
$main_header.attr({ 'data-height-onload':parseInt($main_header.height()), 'data-height-loaded':true });
}
if(et_window_width <=980){
header_height=parseInt($main_header.innerHeight()) + secondary_nav_height - 1;
if(window.et_is_transparent_nav&&! $et_pb_first_row.length){
header_height +=58;
}}else{
header_height=parseInt($main_header.attr('data-height-onload')) + secondary_nav_height;
if(window.et_is_transparent_nav&&! window.et_is_vertical_nav&&$et_main_content_first_row.length){
header_height +=58;
}
$main_header.clone().addClass('main-header-clone et-fixed-header'
).css({
opacity: 0,
position: 'fixed',
top: 'auto',
right: 0,
bottom: 0,
left: 0
}).appendTo($('body'));
main_header_fixed_height=$('.main-header-clone').height();
$('.main-header-clone').remove();
}
$main_header.attr({
'data-fixed-height-onload': main_header_fixed_height
});
if(window.et_is_transparent_nav&&! window.et_is_vertical_nav){
$et_pb_first_row.addClass('et_pb_section_first');
var is_pb=$et_pb_first_row.length,
is_post_pb=is_pb&&$et_single_post.length,
is_post_pb_full_layout_has_title=$et_pb_post_fullwidth.length&&$et_main_content_first_row_meta_wrapper_title.length,
is_post_pb_full_layout_no_title=$et_pb_post_fullwidth.length&&0===$et_main_content_first_row_meta_wrapper_title.length,
is_pb_fullwidth_section_first=$et_pb_first_row.is('.et_pb_fullwidth_section'),
is_no_pb_mobile=et_window_width <=980&&$et_main_content_first_row.length;
if(is_post_pb&&!(is_post_pb_full_layout_no_title&&is_pb_fullwidth_section_first)){
$et_main_content_first_row.css({ 'paddingTop':'' });
if(et_window_width < 980){
header_height +=40;
}
if(is_pb_fullwidth_section_first){
$et_pb_first_row.css({
'paddingTop':'0'
});
}
if(is_post_pb_full_layout_has_title){
$et_main_content_first_row_meta_wrapper.css({
'paddingTop':header_height
});
}else if(is_post_pb_full_layout_no_title){
et_save_initial_page_container_style(
$et_pb_first_row,
'paddingTop'
);
$et_pb_first_row.css({
'paddingTop':header_height
});
}else{
et_save_initial_page_container_style(
$et_main_content_first_row,
'paddingTop'
);
$et_main_content_first_row.css({
'paddingTop':header_height
});
}}else if(is_pb_fullwidth_section_first){
var $et_pb_first_row_first_module=$et_pb_first_row.children('.et_pb_module:visible:first');
if(is_post_pb_full_layout_no_title&&is_pb_fullwidth_section_first&&et_window_width > 980){
header_height=header_height - 58;
}
if($et_pb_first_row_first_module.is('.et_pb_slider')){
var $et_pb_first_row_first_module_slide_image=$et_pb_first_row_first_module.find('.et_pb_slide_image'),
$et_pb_first_row_first_module_slide=$et_pb_first_row_first_module.find('.et_pb_slide'),
$et_pb_first_row_first_module_slide_container=$et_pb_first_row_first_module.find('.et_pb_slide .et_pb_container'),
et_pb_slide_image_margin_top=0 -(parseInt($et_pb_first_row_first_module_slide_image.height()) / 2),
et_pb_slide_container_height=0,
$et_pb_first_row_first_module_slider_arrow=$et_pb_first_row_first_module.find('.et-pb-slider-arrows a'),
et_pb_first_row_slider_arrow_height=$et_pb_first_row_first_module_slider_arrow.height();
et_save_initial_page_container_style(
$et_pb_first_row_first_module_slide,
'paddingTop'
);
$et_pb_first_row_first_module_slide.css({
'paddingTop':header_height
});
$et_pb_first_row_first_module_slide_container.css({
'min-height':''
});
et_save_initial_page_container_style(
$et_pb_first_row_first_module_slide_image,
'marginTop'
);
$et_pb_first_row_first_module_slide_image.css({
'marginTop':et_pb_slide_image_margin_top
});
et_save_initial_page_container_style(
$et_pb_first_row_first_module_slider_arrow,
'marginTop'
);
$et_pb_first_row_first_module_slider_arrow.css({
'marginTop':(( header_height / 2) -(et_pb_first_row_slider_arrow_height / 2))
});
var et_pb_first_row_slide_container_height_new=0;
$et_pb_first_row_first_module.find('.et_pb_slide').each(function(){
var $et_pb_first_row_first_module_slide_item=$(this),
$et_pb_first_row_first_module_slide_container=$et_pb_first_row_first_module_slide_item.find('.et_pb_container');
$et_pb_first_row_first_module_slide_item.show();
$et_pb_first_row_first_module_slide_container.css({ 'min-height':'' });
var et_pb_first_row_slide_container_height=$et_pb_first_row_first_module_slide_container.innerHeight();
if(et_pb_first_row_slide_container_height_new < et_pb_first_row_slide_container_height){
et_pb_first_row_slide_container_height_new=et_pb_first_row_slide_container_height;
}
if($et_pb_first_row_first_module_slide_item.is(':not(".et-pb-active-slide")')){
$et_pb_first_row_first_module_slide_item.hide();
}});
et_save_initial_page_container_style(
$et_pb_first_row_first_module_slide_container,
'min-height'
);
$et_pb_first_row_first_module_slide_container.css({
'min-height':et_pb_first_row_slide_container_height_new
});
}else if($et_pb_first_row_first_module.is('.et_pb_fullwidth_header')){
$et_pb_first_row_first_module.removeAttr('style');
var et_pb_first_row_first_module_fullwidth_header_padding_top=parseInt($et_pb_first_row_first_module.css('paddingTop'));
et_save_initial_page_container_style(
$et_pb_first_row_first_module,
'paddingTop'
);
$et_pb_first_row_first_module.css({
'paddingTop':(header_height + et_pb_first_row_first_module_fullwidth_header_padding_top)
});
}else if($et_pb_first_row_first_module.is('.et_pb_fullwidth_portfolio')){
et_save_initial_page_container_style(
$et_pb_first_row_first_module,
'paddingTop'
);
$et_pb_first_row_first_module.css({ 'paddingTop':header_height });
}else if($et_pb_first_row_first_module.is('.et_pb_map_container')){
var $et_pb_first_row_map=$et_pb_first_row_first_module.find('.et_pb_map');
$et_pb_first_row_map.css({ 'height':'' });
$et_pb_first_row_first_module.find('.et_pb_map').css({
'height':header_height + parseInt($et_pb_first_row_map.css('height'))
});
$et_pb_first_row_first_module.addClass('et_beneath_transparent_nav');
}else if($et_pb_first_row_first_module.is('.et_pb_fullwidth_menu')){
et_save_initial_page_container_style(
$et_pb_first_row_first_module,
'marginTop'
);
$et_pb_first_row_first_module.css({ 'marginTop':header_height });
}else if($et_pb_first_row_first_module.is('.et_pb_fullwidth_code')){
var $et_pb_first_row_first_module_code=$et_pb_first_row_first_module;
$et_pb_first_row_first_module_code.css({ 'paddingTop':'' });
var et_pb_first_row_first_module_code_padding_top=parseInt($et_pb_first_row_first_module_code.css('paddingTop'));
et_save_initial_page_container_style(
$et_pb_first_row_first_module_code,
'paddingTop'
);
$et_pb_first_row_first_module_code.css({
'paddingTop':header_height + et_pb_first_row_first_module_code_padding_top
});
}else if($et_pb_first_row_first_module.is('.et_pb_post_title')){
var $et_pb_first_row_first_module_title=$et_pb_first_row_first_module;
et_save_initial_page_container_style(
$et_pb_first_row_first_module_title,
'paddingTop'
);
$et_pb_first_row_first_module.css({
'paddingTop':header_height + 50
});
}}else if(is_pb){
$et_pb_first_row.css({ 'paddingTop':'' });
var saved_custom_padding=$et_pb_first_row.attr('data-padding'),
saved_custom_padding_top=et_get_saved_padding_margin_value(saved_custom_padding, 0),
saved_custom_padding_tablet=$et_pb_first_row.attr('data-padding-tablet'),
saved_custom_padding_tablet_top=et_get_saved_padding_margin_value(saved_custom_padding_tablet, 0),
saved_custom_padding_phone=$et_pb_first_row.attr('data-padding-phone'),
saved_custom_padding_phone_top=et_get_saved_padding_margin_value(saved_custom_padding_phone, 0),
applied_saved_custom_padding;
if(saved_custom_padding_top||saved_custom_padding_tablet_top||saved_custom_padding_phone_top){
if(et_window_width > 980&&saved_custom_padding_top){
$et_pb_first_row.css({
paddingTop: saved_custom_padding_top
});
}else if(et_window_width > 767&&saved_custom_padding_tablet_top){
$et_pb_first_row.css({
paddingTop: saved_custom_padding_tablet_top
});
}else if(saved_custom_padding_phone_top){
$et_pb_first_row.css({
paddingTop: saved_custom_padding_phone_top
});
}
applied_saved_custom_padding=parseInt($et_pb_first_row.css('paddingTop'));
$et_pb_first_row.css({
paddingTop:(header_height + applied_saved_custom_padding)
});
}else{
et_pb_first_row_padding_top=header_height + parseInt($et_pb_first_row.css('paddingBottom'));
et_save_initial_page_container_style(
$et_pb_first_row,
'paddingTop'
);
$et_pb_first_row.css({
'paddingTop':et_pb_first_row_padding_top
});
}}else if(is_no_pb_mobile){
$et_main_content_first_row.css({
'paddingTop':header_height
});
}else{
$('#main-content .container:first-child').css({
'paddingTop':header_height
});
}
if(! $('#et_fix_page_container_position').length){
$('<style />', {
'id':'et_fix_page_container_position',
'text':'#page-container{ padding-top: 0 !important;}'
}).appendTo('head');
}}else if(et_is_fixed_nav){
$main_container_wrapper.css('paddingTop', header_height);
}
et_change_primary_nav_position(0);
}
$et_container.data('previous-width', $et_container.width());
$(window).resize(function(){
var window_width=parseInt($et_window.width()),
et_container_previous_width=parseInt($et_container.data('previous-width')),
et_container_css_width=$et_container.css('width'),
et_container_width_in_pixel=(typeof et_container_css_width!=='undefined') ? et_container_css_width.substr(-1, 1)!=='%':'',
et_container_actual_width=(et_container_width_in_pixel) ? parseInt($et_container.width()):(( parseInt($et_container.width()) / 100) * window_width),
containerWidthChanged=et_container_previous_width!==et_container_actual_width,
$slide_menu_container=$('.et_slide_in_menu_container'),
page_container_margin;
if(et_is_fixed_nav&&containerWidthChanged){
if(typeof update_page_container_position!='undefined'){
clearTimeout(update_page_container_position);
}
var update_page_container_position=setTimeout(function(){
et_fix_page_container_position();
if(typeof et_fix_fullscreen_section==='function'){
et_fix_fullscreen_section();
}}, 200);
$et_container.data('previous-width', et_container_actual_width);
}
if(et_hide_nav){
et_hide_nav_transofrm();
}
if($('#wpadminbar').length&&et_is_fixed_nav&&window_width >=740&&window_width <=782){
et_calculate_header_values();
et_change_primary_nav_position(0);
}
et_set_search_form_css();
if($slide_menu_container.length&&! $('body').hasClass('et_pb_slide_menu_active')){
$slide_menu_container.css({ right: '-' + parseInt($slide_menu_container.innerWidth()) + 'px' });
if($('body').hasClass('et_boxed_layout')&&et_is_fixed_nav){
page_container_margin=$main_container_wrapper.css('margin-left');
$main_header.css({ left:page_container_margin });
}}
if($slide_menu_container.length&&$('body').hasClass('et_pb_slide_menu_active')){
if($('body').hasClass('et_boxed_layout')){
var left_position;
page_container_margin=parseFloat($main_container_wrapper.css('margin-left'));
$main_container_wrapper.css({ left: '-' +(parseInt($slide_menu_container.innerWidth()) - page_container_margin) + 'px' });
if(et_is_fixed_nav){
left_position=0 > parseInt($slide_menu_container.innerWidth()) -(page_container_margin * 2) ? Math.abs($slide_menu_container.innerWidth() -(page_container_margin * 2)):'-' +($slide_menu_container.innerWidth() -(page_container_margin * 2));
if(left_position < parseInt($slide_menu_container.innerWidth())){
$main_header.css({ left: left_position + 'px' });
}}
}else{
$('#page-container, .et_fixed_nav #main-header').css({ left: '-' + parseInt($slide_menu_container.innerWidth()) + 'px' });
}}
if($slide_menu_container.length&&$('body').hasClass('et_header_style_fullscreen')){
var top_bar_height=parseInt($slide_menu_container.find('.et_slide_menu_top').innerHeight());
$slide_menu_container.css({ 'padding-top': top_bar_height + 20 });
}
et_set_right_vertical_menu();
});
$(window).ready(function(){
if($.fn.fitVids){
$('#main-content').fitVids({ customSelector: "iframe[src^='http://www.hulu.com'], iframe[src^='http://www.dailymotion.com'], iframe[src^='http://www.funnyordie.com'], iframe[src^='https://embed-ssl.ted.com'], iframe[src^='http://embed.revision3.com'], iframe[src^='https://flickr.com'], iframe[src^='http://blip.tv'], iframe[src^='http://www.collegehumor.com']"});
}});
function et_all_elements_loaded(){
if(et_is_fixed_nav){
et_calculate_header_values();
}
et_fix_page_container_position();
if(window.et_is_minified_js&&window.et_is_transparent_nav&&! window.et_is_vertical_nav){
$(window).trigger('resize');
}
if(window.hasOwnProperty('et_location_hash')&&''!==window.et_location_hash){
et_page_load_scroll_to_anchor();
}
if(et_header_style_left&&!window.et_is_vertical_nav){
$logo_width=parseInt($('#logo').width());
if(et_is_rtl){
$et_top_navigation.css('padding-right', $logo_width + 30);
}else{
$et_top_navigation.css('padding-left', $logo_width + 30);
}}
if($('p.demo_store').length){
$('#footer-bottom').css('margin-bottom' , $('p.demo_store').innerHeight());
}
if($.fn.waypoint){
var $waypoint_selector;
if(et_is_vertical_fixed_nav){
$waypoint_selector=$('#main-content');
$waypoint_selector.waypoint({
handler:function(direction){
et_fix_logo_transition();
if(direction==='down'){
$('#main-header').addClass('et-fixed-header');
}else{
$('#main-header').removeClass('et-fixed-header');
}}
});
}
if(et_is_fixed_nav){
if(window.et_is_transparent_nav&&! window.et_is_vertical_nav&&$et_pb_first_row.length){
if($et_pb_first_row.is('.et_pb_fullwidth_section')){
$waypoint_selector=$et_pb_first_row.children('.et_pb_module');
}else{
$waypoint_selector=$et_pb_first_row.find('.et_pb_row');
}}else if(window.et_is_transparent_nav&&! window.et_is_vertical_nav&&$et_main_content_first_row.length){
$waypoint_selector=$('#content-area');
}else{
$waypoint_selector=$('#main-content');
}
var checkIfScrolled=true;
setTimeout(function(){ checkIfScrolled=false; }, 0);
$waypoint_selector.waypoint({
offset: function(){
if(etRecalculateOffset){
setTimeout(function(){
et_calculate_header_values();
}, 200);
etRecalculateOffset=false;
}
if(et_hide_nav){
return et_header_offset - et_header_height - 200;
}else{
var waypoint_selector_offset=$waypoint_selector.offset();
if(waypoint_selector_offset.top < et_header_offset){
et_header_offset=0 -(et_header_offset - waypoint_selector_offset.top);
}
return et_header_offset;
}},
handler:function(direction){
et_fix_logo_transition();
if(direction==='down'){
if(checkIfScrolled&&$et_window.scrollTop()===0){
return;
}
$main_header.addClass('et-fixed-header');
$main_container_wrapper.addClass('et-animated-content');
$top_header.addClass('et-fixed-header');
if(! et_hide_nav&&! window.et_is_transparent_nav&&! $('.mobile_menu_bar_toggle').is(':visible')){
var secondary_nav_height=$top_header.length ? parseInt($top_header.height()):0,
$clone_header,
clone_header_height,
fix_padding;
$clone_header=$main_header.clone().addClass('et-fixed-header, et_header_clone').css({ 'transition': 'none', 'display':'none' });
clone_header_height=parseInt($clone_header.prependTo('body').height());
if(! window.et_is_vertical_nav){
fix_padding=parseInt($main_container_wrapper.css('padding-top')) - clone_header_height - secondary_nav_height + 1 ;
$main_container_wrapper.css('margin-top', -fix_padding);
}
$('.et_header_clone').remove();
}}else{
$main_header.removeClass('et-fixed-header');
$top_header.removeClass('et-fixed-header');
$main_container_wrapper.css('margin-top', '-1px');
}
setTimeout(function(){
et_set_search_form_css();
}, 400);
}});
}
if(et_hide_nav){
et_hide_nav_transofrm();
}}
}
$('a[href*="#"]:not([href="#"])').click(function(){
var $this_link=$(this),
has_closest_smooth_scroll_disabled=$this_link.closest('.et_smooth_scroll_disabled').length,
has_closest_woocommerce_tabs=($this_link.closest('.woocommerce-tabs').length&&$this_link.closest('.tabs').length),
has_closest_timetable_tab=$this_link.closest('.tt_tabs_navigation').length,
has_closest_eab_cal_link=$this_link.closest('.eab-shortcode_calendar-navigation-link').length,
has_closest_ee_cart_link=$this_link.closest('.view-cart-lnk').length,
has_acomment_reply=$this_link.hasClass('acomment-reply'),
is_woocommerce_review_link=$this_link.hasClass('woocommerce-review-link'),
disable_scroll=has_closest_smooth_scroll_disabled||has_closest_ee_cart_link||has_closest_woocommerce_tabs||has_closest_eab_cal_link||has_acomment_reply||is_woocommerce_review_link||has_closest_timetable_tab;
if(( location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname)&&! disable_scroll){
var target=$(this.hash);
target=target.length ? target:$('[name=' + this.hash.slice(1) +']');
if(target.length){
if($this_link.closest('.et_pb_fullscreen_menu_opened').length > 0){
et_pb_toggle_fullscreen_menu();
}
et_pb_smooth_scroll(target, false, 800);
if(! $('#main-header').hasClass('et-fixed-header')&&$('body').hasClass('et_fixed_nav')&&$(window).width() > 980){
setTimeout(function(){
et_pb_smooth_scroll(target, false, 40, 'linear');
}, 780);
}
return false;
}}
});
window.et_pb_window_side_nav_scroll_init=function(){
if(true===window.et_calculating_scroll_position||false===window.et_side_nav_links_initialized){
return;
}
window.et_calculating_scroll_position=true;
var add_offset=$('body').hasClass('et_fixed_nav') ? 20:-90;
var top_header_height=$('#top-header').length > 0 ? parseInt($('#top-header').height()):0;
var main_header_height=$('#main-header').length > 0 ? parseInt($('#main-header').height()):0;
var side_offset;
if($('#wpadminbar').length > 0&&parseInt($(window).width()) > 600){
add_offset +=parseInt($('#wpadminbar').outerHeight());
}
if(window.et_is_vertical_nav){
side_offset=top_header_height + add_offset + 60;
}else{
side_offset=top_header_height + main_header_height + add_offset;
}
var window_height=parseInt($(window).height());
var scroll_position=parseInt($(window).scrollTop());
var document_height=parseInt($(document).height());
var at_bottom_of_page=(window_height + scroll_position)===document_height;
var total_links=$('.side_nav_item a').length - 1;
for(var link=0; link <=total_links; link++){
var $target_section=$('.et_pb_section:visible:not(.et_pb_section div)').eq(link);
var at_top_of_page='undefined'===typeof $target_section.offset();
var current_active=$('.side_nav_item a.active').parent().index();
var next_active=null;
var target_offset=(false===at_top_of_page) ? $target_section.offset().top - side_offset:0;
if(at_top_of_page){
next_active=0;
}else if(at_bottom_of_page){
next_active=total_links;
}else if(scroll_position >=target_offset){
next_active=link;
}
if(null!==next_active&&next_active!==current_active){
$('.side_nav_item a').removeClass('active');
$('a#side_nav_item_id_' + next_active).addClass('active');
}}
window.et_calculating_scroll_position=false;
};
window.et_pb_side_nav_page_init=function(){
var $sections=$('.et_pb_section:visible:not(.et_pb_section div)');
var total_sections=$sections.length;
var side_nav_offset=parseInt(( total_sections * 20 + 40) / 2);
window.et_side_nav_links_initialized=false;
window.et_calculating_scroll_position=false;
if(total_sections > 1&&$('.et_pb_side_nav_page').length){
$('#main-content').append('<ul class="et_pb_side_nav"></ul>');
$sections.each(function(index, element){
var active_class=(0===index) ? 'active':'';
$('.et_pb_side_nav').append('<li class="side_nav_item"><a href="#" id="side_nav_item_id_' + index + '" class="' + active_class + '">' + index + '</a></li>');
if(total_sections - 1===index){
window.et_side_nav_links_initialized=true;
}});
$('ul.et_pb_side_nav').css('marginTop', '-' + side_nav_offset + 'px');
$('.et_pb_side_nav').addClass('et-visible');
$('.et_pb_side_nav a').click(function(){
var index=parseInt($(this).text());
var $target=$('.et_pb_section:visible:not(.et_pb_section div)').eq(index);
var top_section=$(this).text()=="0";
et_pb_smooth_scroll($target, top_section, 800);
if(! $('#main-header').hasClass('et-fixed-header')&&$('body').hasClass('et_fixed_nav')&&parseInt($(window).width()) > 980){
setTimeout(function(){
et_pb_smooth_scroll($target, top_section, 200);
}, 500);
}
return false;
});
$(window).on('scroll', et_pb_window_side_nav_scroll_init);
}};
et_pb_side_nav_page_init();
if($('.et_pb_scroll_top').length){
$(window).scroll(function(){
if($(this).scrollTop() > 800){
$('.et_pb_scroll_top').show().removeClass('et-hidden').addClass('et-visible');
}else{
$('.et_pb_scroll_top').removeClass('et-visible').addClass('et-hidden');
}});
$('.et_pb_scroll_top').click(function(){
$('html, body').animate({scrollTop:0},800);
});
}
if($('.comment-reply-link').length){
$('.comment-reply-link').addClass('et_pb_button');
}
$('#et_top_search').click(function(){
var $search_container=$('.et_search_form_container');
if($search_container.hasClass('et_pb_is_animating')){
return;
}
$('.et_menu_container').removeClass('et_pb_menu_visible et_pb_no_animation').addClass('et_pb_menu_hidden');
$search_container.removeClass('et_pb_search_form_hidden et_pb_no_animation').addClass('et_pb_search_visible et_pb_is_animating');
setTimeout(function(){
$('.et_menu_container').addClass('et_pb_no_animation');
$search_container.addClass('et_pb_no_animation').removeClass('et_pb_is_animating');
}, 1000);
$search_container.find('input').focus();
et_set_search_form_css();
});
function et_hide_search(){
if($('.et_search_form_container').hasClass('et_pb_is_animating')){
return;
}
$('.et_menu_container').removeClass('et_pb_menu_hidden et_pb_no_animation').addClass('et_pb_menu_visible');
$('.et_search_form_container').removeClass('et_pb_search_visible et_pb_no_animation').addClass('et_pb_search_form_hidden et_pb_is_animating');
setTimeout(function(){
$('.et_menu_container').addClass('et_pb_no_animation');
$('.et_search_form_container').addClass('et_pb_no_animation').removeClass('et_pb_is_animating');
}, 1000);
}
function et_set_search_form_css(){
var $search_container=$('.et_search_form_container');
var $body=$('body');
if($search_container.hasClass('et_pb_search_visible')){
var header_height=$('#main-header').innerHeight(),
menu_width=$('#top-menu').width(),
font_size=$('#top-menu li a').css('font-size');
$search_container.css({ 'height':header_height + 'px' });
$search_container.find('input').css('font-size', font_size);
if(! $body.hasClass('et_header_style_left')){
$search_container.css('max-width', menu_width + 60);
}else{
$search_container.find('form').css('max-width', menu_width + 60);
}}
}
$('.et_close_search_field').click(function(){
et_hide_search();
});
$(document).mouseup(function(e){
var $header=$('#main-header');
if($('.et_menu_container').hasClass('et_pb_menu_hidden')){
if(! $header.is(e.target)&&$header.has(e.target).length===0){
et_hide_search();
}}
});
function et_define_logo_dimension(){
var $logo=$('#logo'),
logo_src=$logo.attr('src'),
is_svg=logo_src.substr(-3, 3)==='svg' ? true:false,
$logo_wrap,
logo_width,
logo_height;
$('body').append($('<div />', {
'id':'et-define-logo-wrap',
'style':'position: fixed; bottom: 0; opacity: 0;'
}));
$logo_wrap=$('#et-define-logo-wrap');
if(is_svg){
$logo_wrap.addClass('svg-logo');
}
$logo_wrap.html($logo.clone().css({ 'display':'block' }).removeAttr('id'));
logo_width=$logo_wrap.find('img').width();
logo_height=$logo_wrap.find('img').height();
$logo.attr({
'data-actual-width':logo_width,
'data-actual-height':logo_height
});
$logo_wrap.remove();
et_fix_logo_transition(true);
}
if($('#logo').length){
$('#logo').attr('src', $('#logo').attr('src')).load(function(){
et_define_logo_dimension();
});
}
$('.footer-widget').each(function(){
var $footer_widget=$(this),
footer_widget_width=$footer_widget.width(),
$adsense_ins=$footer_widget.find('.widget_adsensewidget ins');
if($adsense_ins.length){
$adsense_ins.width(footer_widget_width);
}});
function et_fb_side_nav_page_init(){
$(window).off('scroll', window.et_pb_window_side_nav_scroll_init);
$('#main-content .et_pb_side_nav').off('click', '.et_pb_side_nav a');
$('#main-content .et_pb_side_nav').remove();
et_pb_side_nav_page_init();
}
if($('body').is('.et-fb')){
$(window).on('et_fb_root_did_mount', function(){
et_fb_side_nav_page_init();
et_all_elements_loaded();
});
$(window).on('et_fb_section_content_change', et_fb_side_nav_page_init);
}else{
$(window).load(et_all_elements_loaded);
}});
function et_fix_logo_transition(is_onload){
var $body=$('body'),
$logo=$('#logo'),
logo_actual_width=parseInt($logo.attr('data-actual-width')),
logo_actual_height=parseInt($logo.attr('data-actual-height')),
logo_height_percentage=parseInt($logo.attr('data-height-percentage')),
$top_nav=$('#et-top-navigation'),
top_nav_height=parseInt($top_nav.attr('data-height')),
top_nav_fixed_height=parseInt($top_nav.attr('data-fixed-height')),
$main_header=$('#main-header'),
is_header_split=$body.hasClass('et_header_style_split'),
is_fixed_nav=$main_header.hasClass('et-fixed-header'),
is_hide_primary_logo=$body.hasClass('et_hide_primary_logo'),
is_hide_fixed_logo=$body.hasClass('et_hide_fixed_logo'),
logo_height_base=is_fixed_nav ? top_nav_height:top_nav_fixed_height,
logo_wrapper_width,
logo_wrapper_height;
is_onload=typeof is_onload==='undefined' ? false:is_onload;
if(is_header_split&&! window.et_is_vertical_nav){
if(is_onload){
logo_height_base=top_nav_height;
}
logo_wrapper_height=(logo_height_base *(logo_height_percentage / 100) + 22);
logo_wrapper_width=logo_actual_width *(logo_wrapper_height / logo_actual_height);
if(is_hide_primary_logo&&(is_fixed_nav||is_onload)){
logo_wrapper_width=0;
}
if(is_hide_fixed_logo&&! is_fixed_nav&&! is_onload){
logo_wrapper_width=0;
}
$('.et_header_style_split .centered-inline-logo-wrap').css({ 'width':logo_wrapper_width });
}}
function et_toggle_slide_menu(force_state){
var $slide_menu_container=$('.et_header_style_slide .et_slide_in_menu_container'),
$page_container=$('.et_header_style_slide #page-container, .et_header_style_slide.et_fixed_nav #main-header'),
$header_container=$('.et_header_style_slide #main-header'),
is_menu_opened=$slide_menu_container.hasClass('et_pb_slide_menu_opened'),
set_to=typeof force_state!=='undefined' ? force_state:'auto',
is_boxed_layout=$('body').hasClass('et_boxed_layout'),
page_container_margin=is_boxed_layout ? parseFloat($('#page-container').css('margin-left')):0,
slide_container_width=$slide_menu_container.innerWidth();
if('auto'!==set_to&&(( is_menu_opened&&'open'===set_to)||(! is_menu_opened&&'close'===set_to))){
return;
}
if(is_menu_opened){
$slide_menu_container.css({ right: '-' + slide_container_width + 'px' });
$page_container.css({ left: '0' });
if(is_boxed_layout&&et_is_fixed_nav){
$header_container.css({ left:page_container_margin + 'px' });
}
setTimeout(function(){
$slide_menu_container.css({ 'display':'none' });
}, 700);
}else{
$slide_menu_container.css({ 'display':'block' });
setTimeout(function(){
$slide_menu_container.css({ right: '0' });
$page_container.css({ left: '-' +(slide_container_width - page_container_margin) + 'px' });
if(is_boxed_layout&&et_is_fixed_nav){
var left_position=0 > slide_container_width -(page_container_margin * 2) ? Math.abs(slide_container_width -(page_container_margin * 2)):'-' +(slide_container_width -(page_container_margin * 2));
if(left_position < slide_container_width){
$header_container.css({ left: left_position + 'px' });
}}
}, 50);
}
$('body').toggleClass('et_pb_slide_menu_active');
$slide_menu_container.toggleClass('et_pb_slide_menu_opened');
}
function et_adjust_woocommerce_checkout_scroll(){
if(! et_is_fixed_nav){
return;
}
var window_width=parseInt($et_window.width());
if(980 >=window_width){
return;
}
var headerHeight=parseInt($('#main-header').innerHeight());
$('html, body').animate({
scrollTop:($('form.checkout').offset().top - 100 - headerHeight)
}, 1000);
}
$('#main-header').on('click', '.et_toggle_slide_menu', function(){
et_toggle_slide_menu();
});
if(et_is_touch_device){
$et_window.on('swipeleft', function(event){
var window_width=parseInt($et_window.width()),
swipe_start=parseInt(event.swipestart.coords[0]);
if(30 >=window_width - swipe_start){
et_toggle_slide_menu('open');
}});
$et_window.on('swiperight', function(event){
if($('body').hasClass('et_pb_slide_menu_active')){
et_toggle_slide_menu('close');
}});
}
$('#page-container').on('click', '.et_toggle_fullscreen_menu', function(){
et_pb_toggle_fullscreen_menu();
});
function et_pb_toggle_fullscreen_menu(){
var $menu_container=$('.et_header_style_fullscreen .et_slide_in_menu_container'),
top_bar_height=$menu_container.find('.et_slide_menu_top').innerHeight();
$menu_container.toggleClass('et_pb_fullscreen_menu_opened');
$('body').toggleClass('et_pb_fullscreen_menu_active');
if($menu_container.hasClass('et_pb_fullscreen_menu_opened')){
$menu_container.addClass('et_pb_fullscreen_menu_animated');
$menu_container.css({ 'padding-top': top_bar_height + 20 });
}else{
setTimeout(function(){
$menu_container.removeClass('et_pb_fullscreen_menu_animated');
}, 1000);
}}
$(window).unload(function (){
if($('body').hasClass('et_pb_fullscreen_menu_active')){
$('.et_toggle_fullscreen_menu').trigger('click');
}});
$('.et_pb_fullscreen_nav_container').on('click', 'li.menu-item-has-children > a', function(){
var $this_parent=$(this).closest('li'),
$this_arrow=$this_parent.find('>a .et_mobile_menu_arrow'),
$closest_submenu=$this_parent.find('>ul'),
is_opened_submenu=$this_arrow.hasClass('et_pb_submenu_opened'),
sub_menu_max_height;
$this_arrow.toggleClass('et_pb_submenu_opened');
if(is_opened_submenu){
$closest_submenu.removeClass('et_pb_slide_dropdown_opened');
$closest_submenu.slideToggle(700, 'easeInOutCubic');
}else{
$closest_submenu.slideToggle(700, 'easeInOutCubic');
$closest_submenu.addClass('et_pb_slide_dropdown_opened');
}
return false;
});
if($('body').hasClass('et_header_style_fullscreen')){
var $menu_container=$('.et_header_style_fullscreen .et_slide_in_menu_container');
if($menu_container.length){
var top_bar_height=$menu_container.find('.et_slide_menu_top').innerHeight();
$menu_container.css({ 'padding-top': top_bar_height + 20 });
}}
$(document.body).on('checkout_error', function(){
et_adjust_woocommerce_checkout_scroll();
});
$(document.body).on('updated_checkout', function(data){
if('failure'!==data.result){
return;
}
et_adjust_woocommerce_checkout_scroll();
});
})(jQuery);
(function($){
'use strict';
$.fn.fitVids=function(options){
var settings={
customSelector: null,
ignore: null
};
if(!document.getElementById('fit-vids-style')){
var head=document.head||document.getElementsByTagName('head')[0];
var css='.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';
var div=document.createElement("div");
div.innerHTML='<p>x</p><style id="fit-vids-style">' + css + '</style>';
head.appendChild(div.childNodes[1]);
}
if(options){
$.extend(settings, options);
}
return this.each(function(){
var selectors=[
'iframe[src*="player.vimeo.com"]',
'iframe[src*="youtube.com"]',
'iframe[src*="youtube-nocookie.com"]',
'iframe[src*="kickstarter.com"][src*="video.html"]',
'object',
'embed'
];
if(settings.customSelector){
selectors.push(settings.customSelector);
}
var ignoreList='.fitvidsignore';
if(settings.ignore){
ignoreList=ignoreList + ', ' + settings.ignore;
}
var $allVideos=$(this).find(selectors.join(','));
$allVideos=$allVideos.not('object object');
$allVideos=$allVideos.not(ignoreList);
$allVideos.each(function(count){
var $this=$(this);
if($this.parents(ignoreList).length > 0){
return;
}
if(this.tagName.toLowerCase()==='embed'&&$this.parent('object').length||$this.parent('.fluid-width-video-wrapper').length){ return; }
if((!$this.css('height')&&!$this.css('width'))&&(isNaN($this.attr('height'))||isNaN($this.attr('width')))){
$this.attr('height', 9);
$this.attr('width', 16);
}
var height=(this.tagName.toLowerCase()==='object'||($this.attr('height')&&!isNaN(parseInt($this.attr('height'), 10)))) ? parseInt($this.attr('height'), 10):$this.height(),
width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10):$this.width(),
aspectRatio=height / width;
if(!$this.attr('id')){
var videoID='fitvid' + count;
$this.attr('id', videoID);
}
$this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+'%');
$this.removeAttr('height').removeAttr('width');
});
});
};})(window.jQuery||window.Zepto);
!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s],l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=y+l-f,h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();
(function(a){typeof define=="function"&&define.amd?define(["jquery"],a):typeof exports=="object"?a(require("jquery")):a(window.jQuery||window.Zepto)})(function(a){var b="Close",c="BeforeClose",d="AfterClose",e="BeforeAppend",f="MarkupParse",g="Open",h="Change",i="mfp",j="."+i,k="mfp-ready",l="mfp-removing",m="mfp-prevent-close",n,o=function(){},p=!!window.jQuery,q,r=a(window),s,t,u,v,w=function(a,b){n.ev.on(i+a+j,b)},x=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(b,c){n.ev.triggerHandler(i+b,c),n.st.callbacks&&(b=b.charAt(0).toLowerCase()+b.slice(1),n.st.callbacks[b]&&n.st.callbacks[b].apply(n,a.isArray(c)?c:[c]))},z=function(b){if(b!==v||!n.currTemplate.closeBtn)n.currTemplate.closeBtn=a(n.st.closeMarkup.replace("%title%",n.st.tClose)),v=b;return n.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(n=new o,n.init(),a.magnificPopup.instance=n)},B=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(a.transition!==undefined)return!0;while(b.length)if(b.pop()+"Transition"in a)return!0;return!1};o.prototype={constructor:o,init:function(){var b=navigator.appVersion;n.isIE7=b.indexOf("MSIE 7.")!==-1,n.isIE8=b.indexOf("MSIE 8.")!==-1,n.isLowIE=n.isIE7||n.isIE8,n.isAndroid=/android/gi.test(b),n.isIOS=/iphone|ipad|ipod/gi.test(b),n.supportsTransition=B(),n.probablyMobile=n.isAndroid||n.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),s=a(document),n.popupsCache={}},open:function(b){var c;if(b.isObj===!1){n.items=b.items.toArray(),n.index=0;var d=b.items,e;for(c=0;c<d.length;c++){e=d[c],e.parsed&&(e=e.el[0]);if(e===b.el[0]){n.index=c;break}}}else n.items=a.isArray(b.items)?b.items:[b.items],n.index=b.index||0;if(n.isOpen){n.updateItemHTML();return}n.types=[],u="",b.mainEl&&b.mainEl.length?n.ev=b.mainEl.eq(0):n.ev=s,b.key?(n.popupsCache[b.key]||(n.popupsCache[b.key]={}),n.currTemplate=n.popupsCache[b.key]):n.currTemplate={},n.st=a.extend(!0,{},a.magnificPopup.defaults,b),n.fixedContentPos=n.st.fixedContentPos==="auto"?!n.probablyMobile:n.st.fixedContentPos,n.st.modal&&(n.st.closeOnContentClick=!1,n.st.closeOnBgClick=!1,n.st.showCloseBtn=!1,n.st.enableEscapeKey=!1),n.bgOverlay||(n.bgOverlay=x("bg").on("click"+j,function(){n.close()}),n.wrap=x("wrap").attr("tabindex",-1).on("click"+j,function(a){n._checkIfClose(a.target)&&n.close()}),n.container=x("container",n.wrap)),n.contentContainer=x("content"),n.st.preloader&&(n.preloader=x("preloader",n.container,n.st.tLoading));var h=a.magnificPopup.modules;for(c=0;c<h.length;c++){var i=h[c];i=i.charAt(0).toUpperCase()+i.slice(1),n["init"+i].call(n)}y("BeforeOpen"),n.st.showCloseBtn&&(n.st.closeBtnInside?(w(f,function(a,b,c,d){c.close_replaceWith=z(d.type)}),u+=" mfp-close-btn-in"):n.wrap.append(z())),n.st.alignTop&&(u+=" mfp-align-top"),n.fixedContentPos?n.wrap.css({overflow:n.st.overflowY,overflowX:"hidden",overflowY:n.st.overflowY}):n.wrap.css({top:r.scrollTop(),position:"absolute"}),(n.st.fixedBgPos===!1||n.st.fixedBgPos==="auto"&&!n.fixedContentPos)&&n.bgOverlay.css({height:s.height(),position:"absolute"}),n.st.enableEscapeKey&&s.on("keyup"+j,function(a){a.keyCode===27&&n.close()}),r.on("resize"+j,function(){n.updateSize()}),n.st.closeOnContentClick||(u+=" mfp-auto-cursor"),u&&n.wrap.addClass(u);var l=n.wH=r.height(),m={};if(n.fixedContentPos&&n._hasScrollBar(l)){var o=n._getScrollbarSize();o&&(m.marginRight=o)}n.fixedContentPos&&(n.isIE7?a("body, html").css("overflow","hidden"):m.overflow="hidden");var p=n.st.mainClass;return n.isIE7&&(p+=" mfp-ie7"),p&&n._addClassToMFP(p),n.updateItemHTML(),y("BuildControls"),a("html").css(m),n.bgOverlay.add(n.wrap).prependTo(n.st.prependTo||a(document.body)),n._lastFocusedEl=document.activeElement,setTimeout(function(){n.content?(n._addClassToMFP(k),n._setFocus()):n.bgOverlay.addClass(k),s.on("focusin"+j,n._onFocusIn)},16),n.isOpen=!0,n.updateSize(l),y(g),b},close:function(){if(!n.isOpen)return;y(c),n.isOpen=!1,n.st.removalDelay&&!n.isLowIE&&n.supportsTransition?(n._addClassToMFP(l),setTimeout(function(){n._close()},n.st.removalDelay)):n._close()},_close:function(){y(b);var c=l+" "+k+" ";n.bgOverlay.detach(),n.wrap.detach(),n.container.empty(),n.st.mainClass&&(c+=n.st.mainClass+" "),n._removeClassFromMFP(c);if(n.fixedContentPos){var e={marginRight:""};n.isIE7?a("body, html").css("overflow",""):e.overflow="",a("html").css(e)}s.off("keyup"+j+" focusin"+j),n.ev.off(j),n.wrap.attr("class","mfp-wrap").removeAttr("style"),n.bgOverlay.attr("class","mfp-bg"),n.container.attr("class","mfp-container"),n.st.showCloseBtn&&(!n.st.closeBtnInside||n.currTemplate[n.currItem.type]===!0)&&n.currTemplate.closeBtn&&n.currTemplate.closeBtn.detach(),n._lastFocusedEl&&a(n._lastFocusedEl).focus(),n.currItem=null,n.content=null,n.currTemplate=null,n.prevHeight=0,y(d)},updateSize:function(a){if(n.isIOS){var b=document.documentElement.clientWidth/window.innerWidth,c=window.innerHeight*b;n.wrap.css("height",c),n.wH=c}else n.wH=a||r.height();n.fixedContentPos||n.wrap.css("height",n.wH),y("Resize")},updateItemHTML:function(){var b=n.items[n.index];n.contentContainer.detach(),n.content&&n.content.detach(),b.parsed||(b=n.parseEl(n.index));var c=b.type;y("BeforeChange",[n.currItem?n.currItem.type:"",c]),n.currItem=b;if(!n.currTemplate[c]){var d=n.st[c]?n.st[c].markup:!1;y("FirstMarkupParse",d),d?n.currTemplate[c]=a(d):n.currTemplate[c]=!0}t&&t!==b.type&&n.container.removeClass("mfp-"+t+"-holder");var e=n["get"+c.charAt(0).toUpperCase()+c.slice(1)](b,n.currTemplate[c]);n.appendContent(e,c),b.preloaded=!0,y(h,b),t=b.type,n.container.prepend(n.contentContainer),y("AfterChange")},appendContent:function(a,b){n.content=a,a?n.st.showCloseBtn&&n.st.closeBtnInside&&n.currTemplate[b]===!0?n.content.find(".mfp-close").length||n.content.append(z()):n.content=a:n.content="",y(e),n.container.addClass("mfp-"+b+"-holder"),n.contentContainer.append(n.content)},parseEl:function(b){var c=n.items[b],d;c.tagName?c={el:a(c)}:(d=c.type,c={data:c,src:c.src});if(c.el){var e=n.types;for(var f=0;f<e.length;f++)if(c.el.hasClass("mfp-"+e[f])){d=e[f];break}c.src=c.el.attr("data-mfp-src"),c.src||(c.src=c.el.attr("href"))}return c.type=d||n.st.type||"inline",c.index=b,c.parsed=!0,n.items[b]=c,y("ElementParse",c),n.items[b]},addGroup:function(a,b){var c=function(c){c.mfpEl=this,n._openClick(c,a,b)};b||(b={});var d="click.magnificPopup";b.mainEl=a,b.items?(b.isObj=!0,a.off(d).on(d,c)):(b.isObj=!1,b.delegate?a.off(d).on(d,b.delegate,c):(b.items=a,a.off(d).on(d,c)))},_openClick:function(b,c,d){var e=d.midClick!==undefined?d.midClick:a.magnificPopup.defaults.midClick;if(!e&&(b.which===2||b.ctrlKey||b.metaKey||b.altKey||b.shiftKey))return;var f=d.disableOn!==undefined?d.disableOn:a.magnificPopup.defaults.disableOn;if(f)if(a.isFunction(f)){if(!f.call(n))return!0}else if(r.width()<f)return!0;b.type&&(b.preventDefault(),n.isOpen&&b.stopPropagation()),d.el=a(b.mfpEl),d.delegate&&(d.items=c.find(d.delegate)),n.open(d)},updateStatus:function(a,b){if(n.preloader){q!==a&&n.container.removeClass("mfp-s-"+q),!b&&a==="loading"&&(b=n.st.tLoading);var c={status:a,text:b};y("UpdateStatus",c),a=c.status,b=c.text,n.preloader.html(b),n.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),n.container.addClass("mfp-s-"+a),q=a}},_checkIfClose:function(b){if(a(b).hasClass(m))return;var c=n.st.closeOnContentClick,d=n.st.closeOnBgClick;if(c&&d)return!0;if(!n.content||a(b).hasClass("mfp-close")||n.preloader&&b===n.preloader[0])return!0;if(b!==n.content[0]&&!a.contains(n.content[0],b)){if(d&&a.contains(document,b))return!0}else if(c)return!0;return!1},_addClassToMFP:function(a){n.bgOverlay.addClass(a),n.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),n.wrap.removeClass(a)},_hasScrollBar:function(a){return(n.isIE7?s.height():document.body.scrollHeight)>(a||r.height())},_setFocus:function(){(n.st.focus?n.content.find(n.st.focus).eq(0):n.wrap).focus()},_onFocusIn:function(b){if(b.target!==n.wrap[0]&&!a.contains(n.wrap[0],b.target))return n._setFocus(),!1},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(f,[b,c,d]),a.each(c,function(a,c){if(c===undefined||c===!1)return!0;e=a.split("_");if(e.length>1){var d=b.find(j+"-"+e[0]);if(d.length>0){var f=e[1];f==="replaceWith"?d[0]!==c[0]&&d.replaceWith(c):f==="img"?d.is("img")?d.attr("src",c):d.replaceWith('<img src="'+c+'" class="'+d.attr("class")+'" />'):d.attr(e[1],c)}}else b.find(j+"-"+a).html(c)})},_getScrollbarSize:function(){if(n.scrollbarSize===undefined){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),n.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return n.scrollbarSize}},a.magnificPopup={instance:null,proto:o.prototype,modules:[],open:function(b,c){return A(),b?b=a.extend(!0,{},b):b={},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},a.fn.magnificPopup=function(b){A();var c=a(this);if(typeof b=="string")if(b==="open"){var d,e=p?c.data("magnificPopup"):c[0].magnificPopup,f=parseInt(arguments[1],10)||0;e.items?d=e.items[f]:(d=c,e.delegate&&(d=d.find(e.delegate)),d=d.eq(f)),n._openClick({mfpEl:d},c,e)}else n.isOpen&&n[b].apply(n,Array.prototype.slice.call(arguments,1));else b=a.extend(!0,{},b),p?c.data("magnificPopup",b):c[0].magnificPopup=b,n.addGroup(c,b);return c};var C="inline",D,E,F,G=function(){F&&(E.after(F.addClass(D)).detach(),F=null)};a.magnificPopup.registerModule(C,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){n.types.push(C),w(b+"."+C,function(){G()})},getInline:function(b,c){G();if(b.src){var d=n.st.inline,e=a(b.src);if(e.length){var f=e[0].parentNode;f&&f.tagName&&(E||(D=d.hiddenClass,E=x(D),D="mfp-"+D),F=e.after(E).detach().removeClass(D)),n.updateStatus("ready")}else n.updateStatus("error",d.tNotFound),e=a("<div>");return b.inlineElement=e,e}return n.updateStatus("ready"),n._parseMarkup(c,{},b),c}}});var H="ajax",I,J=function(){I&&a(document.body).removeClass(I)},K=function(){J(),n.req&&n.req.abort()};a.magnificPopup.registerModule(H,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){n.types.push(H),I=n.st.ajax.cursor,w(b+"."+H,K),w("BeforeChange."+H,K)},getAjax:function(b){I&&a(document.body).addClass(I),n.updateStatus("loading");var c=a.extend({url:b.src,success:function(c,d,e){var f={data:c,xhr:e};y("ParseAjax",f),n.appendContent(a(f.data),H),b.finished=!0,J(),n._setFocus(),setTimeout(function(){n.wrap.addClass(k)},16),n.updateStatus("ready"),y("AjaxContentAdded")},error:function(){J(),b.finished=b.loadError=!0,n.updateStatus("error",n.st.ajax.tError.replace("%url%",b.src))}},n.st.ajax.settings);return n.req=a.ajax(c),""}}});var L,M=function(b){if(b.data&&b.data.title!==undefined)return b.data.title;var c=n.st.image.titleSrc;if(c){if(a.isFunction(c))return c.call(n,b);if(b.el)return b.el.attr(c)||""}return""};a.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var c=n.st.image,d=".image";n.types.push("image"),w(g+d,function(){n.currItem.type==="image"&&c.cursor&&a(document.body).addClass(c.cursor)}),w(b+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),r.off("resize"+j)}),w("Resize"+d,n.resizeImage),n.isLowIE&&w("AfterChange",n.resizeImage)},resizeImage:function(){var a=n.currItem;if(!a||!a.img)return;if(n.st.image.verticalFit){var b=0;n.isLowIE&&(b=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("max-height",n.wH-b)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y("ImageHasSize",a),a.imgHidden&&(n.content&&n.content.removeClass("mfp-loading"),a.imgHidden=!1))},findImageSize:function(a){var b=0,c=a.img[0],d=function(e){L&&clearInterval(L),L=setInterval(function(){if(c.naturalWidth>0){n._onImageHasSize(a);return}b>200&&clearInterval(L),b++,b===3?d(10):b===40?d(50):b===100&&d(500)},e)};d(1)},getImage:function(b,c){var d=0,e=function(){b&&(b.img[0].complete?(b.img.off(".mfploader"),b===n.currItem&&(n._onImageHasSize(b),n.updateStatus("ready")),b.hasSize=!0,b.loaded=!0,y("ImageLoadComplete")):(d++,d<200?setTimeout(e,100):f()))},f=function(){b&&(b.img.off(".mfploader"),b===n.currItem&&(n._onImageHasSize(b),n.updateStatus("error",g.tError.replace("%url%",b.src))),b.hasSize=!0,b.loaded=!0,b.loadError=!0)},g=n.st.image,h=c.find(".mfp-img");if(h.length){var i=document.createElement("img");i.className="mfp-img",b.el&&b.el.find("img").length&&(i.alt=b.el.find("img").attr("alt")),b.img=a(i).on("load.mfploader",e).on("error.mfploader",f),i.src=b.src,h.is("img")&&(b.img=b.img.clone()),i=b.img[0],i.naturalWidth>0?b.hasSize=!0:i.width||(b.hasSize=!1)}return n._parseMarkup(c,{title:M(b),img_replaceWith:b.img},b),n.resizeImage(),b.hasSize?(L&&clearInterval(L),b.loadError?(c.addClass("mfp-loading"),n.updateStatus("error",g.tError.replace("%url%",b.src))):(c.removeClass("mfp-loading"),n.updateStatus("ready")),c):(n.updateStatus("loading"),b.loading=!0,b.hasSize||(b.imgHidden=!0,c.addClass("mfp-loading"),n.findImageSize(b)),c)}}});var N,O=function(){return N===undefined&&(N=document.createElement("p").style.MozTransform!==undefined),N};a.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(a){return a.is("img")?a:a.find("img")}},proto:{initZoom:function(){var a=n.st.zoom,d=".zoom",e;if(!a.enabled||!n.supportsTransition)return;var f=a.duration,g=function(b){var c=b.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+a.duration/1e3+"s "+a.easing,e={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,c.css(e),c},h=function(){n.content.css("visibility","visible")},i,j;w("BuildControls"+d,function(){if(n._allowZoom()){clearTimeout(i),n.content.css("visibility","hidden"),e=n._getItemToZoom();if(!e){h();return}j=g(e),j.css(n._getOffset()),n.wrap.append(j),i=setTimeout(function(){j.css(n._getOffset(!0)),i=setTimeout(function(){h(),setTimeout(function(){j.remove(),e=j=null,y("ZoomAnimationEnded")},16)},f)},16)}}),w(c+d,function(){if(n._allowZoom()){clearTimeout(i),n.st.removalDelay=f;if(!e){e=n._getItemToZoom();if(!e)return;j=g(e)}j.css(n._getOffset(!0)),n.wrap.append(j),n.content.css("visibility","hidden"),setTimeout(function(){j.css(n._getOffset())},16)}}),w(b+d,function(){n._allowZoom()&&(h(),j&&j.remove(),e=null)})},_allowZoom:function(){return n.currItem.type==="image"},_getItemToZoom:function(){return n.currItem.hasSize?n.currItem.img:!1},_getOffset:function(b){var c;b?c=n.currItem.img:c=n.st.zoom.opener(n.currItem.el||n.currItem);var d=c.offset(),e=parseInt(c.css("padding-top"),10),f=parseInt(c.css("padding-bottom"),10);d.top-=a(window).scrollTop()-e;var g={width:c.width(),height:(p?c.innerHeight():c[0].offsetHeight)-f-e};return O()?g["-moz-transform"]=g.transform="translate("+d.left+"px,"+d.top+"px)":(g.left=d.left,g.top=d.top),g}}});var P="iframe",Q="//about:blank",R=function(a){if(n.currTemplate[P]){var b=n.currTemplate[P].find("iframe");b.length&&(a||(b[0].src=Q),n.isIE8&&b.css("display",a?"block":"none"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){n.types.push(P),w("BeforeChange",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(b+"."+P,function(){R()})},getIframe:function(b,c){var d=b.src,e=n.st.iframe;a.each(e.patterns,function(){if(d.indexOf(this.index)>-1)return this.id&&(typeof this.id=="string"?d=d.substr(d.lastIndexOf(this.id)+this.id.length,d.length):d=this.id.call(this,d)),d=this.src.replace("%id%",d),!1});var f={};return e.srcAction&&(f[e.srcAction]=d),n._parseMarkup(c,f,b),n.updateStatus("ready"),c}}});var S=function(a){var b=n.items.length;return a>b-1?a-b:a<0?b+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var c=n.st.gallery,d=".mfp-gallery",e=Boolean(a.fn.mfpFastClick);n.direction=!0;if(!c||!c.enabled)return!1;u+=" mfp-gallery",w(g+d,function(){c.navigateByImgClick&&n.wrap.on("click"+d,".mfp-img",function(){if(n.items.length>1)return n.next(),!1}),s.on("keydown"+d,function(a){a.keyCode===37?n.prev():a.keyCode===39&&n.next()})}),w("UpdateStatus"+d,function(a,b){b.text&&(b.text=T(b.text,n.currItem.index,n.items.length))}),w(f+d,function(a,b,d,e){var f=n.items.length;d.counter=f>1?T(c.tCounter,e.index,f):""}),w("BuildControls"+d,function(){if(n.items.length>1&&c.arrows&&!n.arrowLeft){var b=c.arrowMarkup,d=n.arrowLeft=a(b.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,"left")).addClass(m),f=n.arrowRight=a(b.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,"right")).addClass(m),g=e?"mfpFastClick":"click";d[g](function(){n.prev()}),f[g](function(){n.next()}),n.isIE7&&(x("b",d[0],!1,!0),x("a",d[0],!1,!0),x("b",f[0],!1,!0),x("a",f[0],!1,!0)),n.container.append(d.add(f))}}),w(h+d,function(){n._preloadTimeout&&clearTimeout(n._preloadTimeout),n._preloadTimeout=setTimeout(function(){n.preloadNearbyImages(),n._preloadTimeout=null},16)}),w(b+d,function(){s.off(d),n.wrap.off("click"+d),n.arrowLeft&&e&&n.arrowLeft.add(n.arrowRight).destroyMfpFastClick(),n.arrowRight=n.arrowLeft=null})},next:function(){n.direction=!0,n.index=S(n.index+1),n.updateItemHTML()},prev:function(){n.direction=!1,n.index=S(n.index-1),n.updateItemHTML()},goTo:function(a){n.direction=a>=n.index,n.index=a,n.updateItemHTML()},preloadNearbyImages:function(){var a=n.st.gallery.preload,b=Math.min(a[0],n.items.length),c=Math.min(a[1],n.items.length),d;for(d=1;d<=(n.direction?c:b);d++)n._preloadItem(n.index+d);for(d=1;d<=(n.direction?b:c);d++)n._preloadItem(n.index-d)},_preloadItem:function(b){b=S(b);if(n.items[b].preloaded)return;var c=n.items[b];c.parsed||(c=n.parseEl(b)),y("LazyLoad",c),c.type==="image"&&(c.img=a('<img class="mfp-img" />').on("load.mfploader",function(){c.hasSize=!0}).on("error.mfploader",function(){c.hasSize=!0,c.loadError=!0,y("LazyLoadError",c)}).attr("src",c.src)),c.preloaded=!0}}});var U="retina";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\.\w+$/,function(a){return"@2x"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=n.st.retina,b=a.ratio;b=isNaN(b)?b():b,b>1&&(w("ImageHasSize."+U,function(a,c){c.img.css({"max-width":c.img[0].naturalWidth/b,width:"100%"})}),w("ElementParse."+U,function(c,d){d.src=a.replaceSrc(d,b)}))}}}}),function(){var b=1e3,c="ontouchstart"in window,d=function(){r.off("touchmove"+f+" touchend"+f)},e="mfpFastClick",f="."+e;a.fn.mfpFastClick=function(e){return a(this).each(function(){var g=a(this),h;if(c){var i,j,k,l,m,n;g.on("touchstart"+f,function(a){l=!1,n=1,m=a.originalEvent?a.originalEvent.touches[0]:a.touches[0],j=m.clientX,k=m.clientY,r.on("touchmove"+f,function(a){m=a.originalEvent?a.originalEvent.touches:a.touches,n=m.length,m=m[0];if(Math.abs(m.clientX-j)>10||Math.abs(m.clientY-k)>10)l=!0,d()}).on("touchend"+f,function(a){d();if(l||n>1)return;h=!0,a.preventDefault(),clearTimeout(i),i=setTimeout(function(){h=!1},b),e()})})}g.on("click"+f,function(){h||e()})})},a.fn.destroyMfpFastClick=function(){a(this).off("touchstart"+f+" click"+f),c&&r.off("touchmove"+f+" touchend"+f)}}(),A()});
(function($){
var $et_window=$(window);
window.et_load_event_fired=false;
window.et_is_transparent_nav=$('body').hasClass('et_transparent_nav');
window.et_is_vertical_nav=$('body').hasClass('et_vertical_nav');
window.et_is_fixed_nav=$('body').hasClass('et_fixed_nav');
window.et_is_minified_js=$('body').hasClass('et_minified_js');
window.et_is_minified_css=$('body').hasClass('et_minified_css');
jQuery.fn.reverse=[].reverse;
jQuery.fn.closest_descendent=function(selector){
var $found,
$current_children=this.children();
while($current_children.length){
$found=$current_children.filter(selector);
if($found.length){
break;
}
$current_children=$current_children.children();
}
return $found;
};
window.et_pb_init_modules=function(){
$.et_pb_simple_slider=function(el, options){
var settings=$.extend({
slide:'.et-slide',
arrows:'.et-pb-slider-arrows',
prev_arrow:'.et-pb-arrow-prev',
next_arrow:'.et-pb-arrow-next',
controls:'.et-pb-controllers a',
carousel_controls:'.et_pb_carousel_item',
control_active_class:'et-pb-active-control',
previous_text:et_pb_custom.previous,
next_text:et_pb_custom.next,
fade_speed:500,
use_arrows:true,
use_controls:true,
manual_arrows:'',
append_controls_to:'',
controls_below:false,
controls_class:'et-pb-controllers',
slideshow:false,
slideshow_speed:7000,
show_progress_bar:false,
tabs_animation:false,
use_carousel:false
}, options);
var $et_slider=$(el),
$et_slide=$et_slider.closest_descendent(settings.slide),
et_slides_number=$et_slide.length,
et_fade_speed=settings.fade_speed,
et_active_slide=0,
$et_slider_arrows,
$et_slider_prev,
$et_slider_next,
$et_slider_controls,
$et_slider_carousel_controls,
et_slider_timer,
controls_html='',
carousel_html='',
$progress_bar=null,
progress_timer_count=0,
$et_pb_container=$et_slider.find('.et_pb_container'),
et_pb_container_width=$et_pb_container.width(),
is_post_slider=$et_slider.hasClass('et_pb_post_slider');
$et_slider.et_animation_running=false;
$.data(el, "et_pb_simple_slider", $et_slider);
$et_slide.eq(0).addClass('et-pb-active-slide');
if(! settings.tabs_animation){
if(!$et_slider.hasClass('et_pb_bg_layout_dark')&&!$et_slider.hasClass('et_pb_bg_layout_light')){
$et_slider.addClass(et_get_bg_layout_color($et_slide.eq(0)));
}}
if(settings.use_arrows&&et_slides_number > 1){
if(settings.manual_arrows=='')
$et_slider.append('<div class="et-pb-slider-arrows"><a class="et-pb-arrow-prev" href="#">' + '<span>' +settings.previous_text + '</span>' + '</a><a class="et-pb-arrow-next" href="#">' + '<span>' + settings.next_text + '</span>' + '</a></div>');
else
$et_slider.append(settings.manual_arrows);
$et_slider_arrows=$et_slider.find(settings.arrows);
$et_slider_prev=$et_slider.find(settings.prev_arrow);
$et_slider_next=$et_slider.find(settings.next_arrow);
$et_slider.on('click.et_pb_simple_slider', settings.next_arrow, function(){
if($et_slider.et_animation_running)	return false;
$et_slider.et_slider_move_to('next');
return false;
});
$et_slider.on('click.et_pb_simple_slider', settings.prev_arrow, function(){
if($et_slider.et_animation_running)	return false;
$et_slider.et_slider_move_to('previous');
return false;
});
$et_slider.on('swipeleft.et_pb_simple_slider', settings.slide, function(event){
if($(event.target).closest('.et-fb-popover-tinymce').length||$(event.target).closest('.et-fb-editable-element').length){
return;
}
$et_slider.et_slider_move_to('next');
});
$et_slider.on('swiperight.et_pb_simple_slider', settings.slide, function(event){
if($(event.target).closest('.et-fb-popover-tinymce').length||$(event.target).closest('.et-fb-editable-element').length){
return;
}
$et_slider.et_slider_move_to('previous');
});
}
if(settings.use_controls&&et_slides_number > 1){
for(var i=1; i <=et_slides_number; i++){
controls_html +='<a href="#"' +(i==1 ? ' class="' + settings.control_active_class + '"':'') + '>' + i + '</a>';
}
if($et_slider.find('video').length > 0){
settings.controls_class +=' et-pb-controllers-has-video-tag';
}
controls_html =
'<div class="' + settings.controls_class + '">' +
controls_html +
'</div>';
if(settings.append_controls_to=='')
$et_slider.append(controls_html);
else
$(settings.append_controls_to).append(controls_html);
if(settings.controls_below)
$et_slider_controls=$et_slider.parent().find(settings.controls);
else
$et_slider_controls=$et_slider.find(settings.controls);
et_maybe_set_controls_color($et_slide.eq(0));
$et_slider_controls.on('click.et_pb_simple_slider', function (){
if($et_slider.et_animation_running)	return false;
$et_slider.et_slider_move_to($(this).index());
return false;
});
}
if(settings.use_carousel&&et_slides_number > 1){
for(var i=1; i <=et_slides_number; i++){
slide_id=i - 1;
image_src=($et_slide.eq(slide_id).data('image')!==undefined) ? 'url(' + $et_slide.eq(slide_id).data('image') + ')':'none';
carousel_html +='<div class="et_pb_carousel_item ' +(i==1 ? settings.control_active_class:'') + '" data-slide-id="'+ slide_id +'">' +
'<div class="et_pb_video_overlay" href="#" style="background-image: ' + image_src + ';">' +
'<div class="et_pb_video_overlay_hover"><a href="#" class="et_pb_video_play"></a></div>' +
'</div>' +
'</div>';
}
carousel_html =
'<div class="et_pb_carousel">' +
'<div class="et_pb_carousel_items">' +
carousel_html +
'</div>' +
'</div>';
$et_slider.after(carousel_html);
$et_slider_carousel_controls=$et_slider.siblings('.et_pb_carousel').find(settings.carousel_controls);
$et_slider_carousel_controls.on('click.et_pb_simple_slider', function(){
if($et_slider.et_animation_running)	return false;
var $this=$(this);
$et_slider.et_slider_move_to($this.data('slide-id'));
return false;
});
}
if(settings.slideshow&&et_slides_number > 1){
$et_slider.on('mouseenter.et_pb_simple_slider', function(){
if($et_slider.hasClass('et_slider_auto_ignore_hover')){
return;
}
$et_slider.addClass('et_slider_hovered');
if(typeof et_slider_timer!='undefined'){
clearInterval(et_slider_timer);
}}).on('mouseleave.et_pb_simple_slider', function(){
if($et_slider.hasClass('et_slider_auto_ignore_hover')){
return;
}
$et_slider.removeClass('et_slider_hovered');
et_slider_auto_rotate();
});
}
et_slider_auto_rotate();
function et_slider_auto_rotate(){
if(settings.slideshow&&et_slides_number > 1&&! $et_slider.hasClass('et_slider_hovered')){
et_slider_timer=setTimeout(function(){
$et_slider.et_slider_move_to('next');
}, settings.slideshow_speed);
}}
$et_slider.et_slider_destroy=function(){
if(typeof et_slider_timer!='undefined'){
clearInterval(et_slider_timer);
}
$et_slider.off('.et_pb_simple_slider');
$et_slider.find('.et_pb_slide').css({
'z-index': '',
'display': '',
'opacity': '',
});
$et_slider.find('.et-pb-active-slide').removeClass('et-pb-active-slide');
$et_slider.find('.et-pb-moved-slide').removeClass('et-pb-moved-slide');
$et_slider.find('.et-pb-slider-arrows, .et-pb-controllers').remove();
$et_slider.siblings('.et_pb_carousel').remove();
$et_slider.removeData('et_pb_simple_slider');
};
function et_stop_video(active_slide){
var $et_video, et_video_src;
if(active_slide.has('iframe').length){
$et_video=active_slide.find('iframe');
et_video_src=$et_video.attr('src');
$et_video.attr('src', '');
$et_video.attr('src', et_video_src);
}else if(active_slide.has('video').length){
if(!active_slide.find('.et_pb_section_video_bg').length){
$et_video=active_slide.find('video');
$et_video[0].pause();
}}
}
$et_slider.et_fix_slider_content_images=et_fix_slider_content_images;
function et_fix_slider_content_images(){
var $this_slider=$et_slider,
$slide_image_container=$this_slider.find('.et-pb-active-slide .et_pb_slide_image'),
$slide_video_container=$this_slider.find('.et-pb-active-slide .et_pb_slide_video'),
$slide=$slide_image_container.closest('.et_pb_slide'),
$slider=$slide.closest('.et_pb_slider'),
slide_height=parseFloat($slider.innerHeight()),
image_height=parseFloat(slide_height * 0.8),
slide_image_container_height=parseFloat($slide_image_container.height()),
slide_video_container_height=parseFloat($slide_video_container.height());
if(! isNaN(image_height)){
$slide_image_container.find('img').css('maxHeight', image_height + 'px');
slide_image_container_height=parseInt($slide_image_container.height())
}
if(! isNaN(slide_image_container_height)&&$slide.hasClass('et_pb_media_alignment_center')){
$slide_image_container.css('marginTop', '-' +(slide_image_container_height / 2) + 'px');
}
if(! isNaN(slide_video_container_height)){
$slide_video_container.css('marginTop', '-' +(slide_video_container_height / 2) + 'px');
}}
function et_get_bg_layout_color($slide){
if($slide.hasClass('et_pb_bg_layout_light')){
return 'et_pb_bg_layout_light';
}
return 'et_pb_bg_layout_dark';
}
function et_maybe_set_controls_color($slide){
var next_slide_dot_color,
$arrows,
arrows_color;
if(typeof $et_slider_controls!=='undefined'&&$et_slider_controls.length){
next_slide_dot_color=$slide.attr('data-dots_color')||'';
if(next_slide_dot_color!==''){
$et_slider_controls.attr('style', 'background-color: ' + hex_to_rgba(next_slide_dot_color, '0.3') + ';');
$et_slider_controls.filter('.et-pb-active-control').attr('style', 'background-color: ' + hex_to_rgba(next_slide_dot_color) + '!important;');
}else{
$et_slider_controls.removeAttr('style');
}}
if(typeof $et_slider_arrows!=='undefined'&&$et_slider_arrows.length){
$arrows=$et_slider_arrows.find('a');
arrows_color=$slide.attr('data-arrows_color')||'';
if(arrows_color!==''){
$arrows.attr('style', 'color: ' + arrows_color + '!important;');
}else{
$arrows.css('color', 'inherit');
}}
}
function et_fix_builder_content(){
if(is_post_slider){
setTimeout(function(){
var $et_pb_circle_counter=$('.et_pb_circle_counter'),
$et_pb_number_counter=$('.et_pb_number_counter');
window.et_fix_testimonial_inner_width();
if($et_pb_circle_counter.length){
window.et_pb_reinit_circle_counters($et_pb_circle_counter);
}
if($et_pb_number_counter.length){
window.et_pb_reinit_number_counters($et_pb_number_counter);
}
window.et_reinit_waypoint_modules();
}, 1000);
}}
function hex_to_rgba(color, alpha){
var color_16=parseInt(color.replace('#', ''), 16),
red=(color_16 >> 16) & 255,
green=(color_16 >> 8) & 255,
blue=color_16 & 255,
alpha=alpha||1,
rgba;
rgba=red + ',' + green + ',' + blue + ',' + alpha;
rgba='rgba(' + rgba + ')';
return rgba;
}
if(window.et_load_event_fired){
et_fix_slider_height($et_slider);
}else{
$et_window.on('load', function(){
et_fix_slider_height($et_slider);
});
}
$et_window.on('resize.et_simple_slider', function(){
et_fix_slider_height($et_slider);
});
$et_slider.et_slider_move_to=function(direction){
var $active_slide=$et_slide.eq(et_active_slide);
$et_slider.et_animation_running=true;
$et_slider.removeClass('et_slide_transition_to_next et_slide_transition_to_previous').addClass('et_slide_transition_to_' + direction);
$et_slider.find('.et-pb-moved-slide').removeClass('et-pb-moved-slide');
if(direction=='next'||direction=='previous'){
if(direction=='next')
et_active_slide=(et_active_slide + 1) < et_slides_number ? et_active_slide + 1:0;
else
et_active_slide=(et_active_slide - 1) >=0 ? et_active_slide - 1:et_slides_number - 1;
}else{
if(et_active_slide==direction){
$et_slider.et_animation_running=false;
return;
}
et_active_slide=direction;
}
if(typeof et_slider_timer!='undefined')
clearInterval(et_slider_timer);
var $next_slide=$et_slide.eq(et_active_slide);
$et_slider.trigger('slide', {current: $active_slide, next: $next_slide});
if(typeof $active_slide.find('video')[0]!=='undefined'&&typeof $active_slide.find('video')[0]['player']!=='undefined'){
$active_slide.find('video')[0].player.pause();
}
if(typeof $next_slide.find('video')[0]!=='undefined'&&typeof $next_slide.find('video')[0]['player']!=='undefined'){
$next_slide.find('video')[0].player.play();
}
var $active_slide_video=$active_slide.find('.et_pb_video_box iframe');
if($active_slide_video.length){
var active_slide_video_src=$active_slide_video.attr('src');
active_slide_video_src=active_slide_video_src.replace(/\?autoplay=1$/, '');
active_slide_video_src=active_slide_video_src.replace(/\?autoplay=1&(amp;)?/, '?');
active_slide_video_src=active_slide_video_src.replace(/&(amp;)?autoplay=1/, '');
setTimeout(function(){
$active_slide_video.attr({
'src': active_slide_video_src
});
}, settings.fade_speed);
$active_slide_video.parents('.et_pb_video_box').next('.et_pb_video_overlay').css({
'display':'block',
'opacity':1
});
}
$et_slider.trigger('simple_slider_before_move_to', { direction:direction, next_slide:$next_slide });
$et_slide.each(function(){
$(this).css('zIndex', 1);
});
$active_slide.css('zIndex', 2).removeClass('et-pb-active-slide').addClass('et-pb-moved-slide').data('slide-status', 'inactive');
$next_slide.css({ 'display':'block', opacity:0 }).addClass('et-pb-active-slide').data('slide-status', 'active');
et_fix_slider_content_images();
et_fix_builder_content();
if(settings.use_controls)
$et_slider_controls.removeClass(settings.control_active_class).eq(et_active_slide).addClass(settings.control_active_class);
if(settings.use_carousel)
$et_slider_carousel_controls.removeClass(settings.control_active_class).eq(et_active_slide).addClass(settings.control_active_class);
if(! settings.tabs_animation){
et_maybe_set_controls_color($next_slide);
$next_slide.animate({ opacity:1 }, et_fade_speed);
$active_slide.addClass('et_slide_transition').css({ 'display':'list-item', 'opacity':1 }).animate({ opacity:0 }, et_fade_speed, function(){
var active_slide_layout_bg_color=et_get_bg_layout_color($active_slide),
next_slide_layout_bg_color=et_get_bg_layout_color($next_slide);
$(this).css('display', 'none').removeClass('et_slide_transition');
et_stop_video($active_slide);
$et_slider
.removeClass(active_slide_layout_bg_color)
.addClass(next_slide_layout_bg_color);
$et_slider.et_animation_running=false;
$et_slider.trigger('simple_slider_after_move_to', { next_slide:$next_slide });
});
}else{
$next_slide.css({ 'display':'none', opacity:0 });
$active_slide.addClass('et_slide_transition').css({ 'display':'block', 'opacity':1 }).animate({ opacity:0 }, et_fade_speed, function(){
$(this).css('display', 'none').removeClass('et_slide_transition');
$next_slide.css({ 'display':'block', 'opacity':0 }).animate({ opacity:1 }, et_fade_speed, function(){
$et_slider.et_animation_running=false;
$et_slider.trigger('simple_slider_after_move_to', { next_slide:$next_slide });
});
});
}
if($next_slide.find('.et_parallax_bg').length){
window.et_pb_parallax_init($next_slide.find('.et_parallax_bg'));
}
et_slider_auto_rotate();
}};
$.fn.et_pb_simple_slider=function(options){
return this.each(function(){
var slider=$.data(this, 'et_pb_simple_slider');
return slider ? slider:new $.et_pb_simple_slider(this, options);
});
};
var et_hash_module_seperator='||',
et_hash_module_param_seperator='|';
function process_et_hashchange(hash){
if(( hash.indexOf(et_hash_module_seperator, 0))!==-1){
modules=hash.split(et_hash_module_seperator);
for(var i=0; i < modules.length; i++){
var module_params=modules[i].split(et_hash_module_param_seperator);
var element=module_params[0];
module_params.shift();
if($('#' + element).length){
$('#' + element).trigger({
type: "et_hashchange",
params: module_params
});
}}
}else{
module_params=hash.split(et_hash_module_param_seperator);
var element=module_params[0];
module_params.shift();
if($('#' + element).length){
$('#' + element).trigger({
type: "et_hashchange",
params: module_params
});
}}
}
function et_set_hash(module_state_hash){
module_id=module_state_hash.split(et_hash_module_param_seperator)[0];
if(!$('#' + module_id).length){
return;
}
if(window.location.hash){
var hash=window.location.hash.substring(1),
new_hash=[];
if(( hash.indexOf(et_hash_module_seperator, 0))!==-1){
modules=hash.split(et_hash_module_seperator);
var in_hash=false;
for(var i=0; i < modules.length; i++){
var element=modules[i].split(et_hash_module_param_seperator)[0];
if(element===module_id){
new_hash.push(module_state_hash);
in_hash=true;
}else{
new_hash.push(modules[i]);
}}
if(!in_hash){
new_hash.push(module_state_hash);
}}else{
module_params=hash.split(et_hash_module_param_seperator);
var element=module_params[0];
if(element!==module_id){
new_hash.push(hash);
}
new_hash.push(module_state_hash);
}
hash=new_hash.join(et_hash_module_seperator);
}else{
hash=module_state_hash;
}
var yScroll=document.body.scrollTop;
window.location.hash=hash;
document.body.scrollTop=yScroll;
}
$.et_pb_simple_carousel=function(el, options){
var settings=$.extend({
slide_duration:500,
}, options);
var $et_carousel=$(el),
$carousel_items=$et_carousel.find('.et_pb_carousel_items'),
$the_carousel_items=$carousel_items.find('.et_pb_carousel_item');
$et_carousel.et_animation_running=false;
$et_carousel.addClass('container-width-change-notify').on('containerWidthChanged', function(event){
set_carousel_columns($et_carousel);
set_carousel_height($et_carousel);
});
$carousel_items.data('items', $the_carousel_items.toArray());
$et_carousel.data('columns_setting_up', false);
$carousel_items.prepend('<div class="et-pb-slider-arrows"><a class="et-pb-slider-arrow et-pb-arrow-prev" href="#">' + '<span>' + et_pb_custom.previous + '</span>' + '</a><a class="et-pb-slider-arrow et-pb-arrow-next" href="#">' + '<span>' + et_pb_custom.next + '</span>' + '</a></div>');
set_carousel_columns($et_carousel);
set_carousel_height($et_carousel);
$et_carousel_next=$et_carousel.find('.et-pb-arrow-next');
$et_carousel_prev=$et_carousel.find('.et-pb-arrow-prev');
$et_carousel.on('click', '.et-pb-arrow-next', function(){
if($et_carousel.et_animation_running) return false;
$et_carousel.et_carousel_move_to('next');
return false;
});
$et_carousel.on('click', '.et-pb-arrow-prev', function(){
if($et_carousel.et_animation_running) return false;
$et_carousel.et_carousel_move_to('previous');
return false;
});
$et_carousel.on('swipeleft', function(){
$et_carousel.et_carousel_move_to('next');
});
$et_carousel.on('swiperight', function(){
$et_carousel.et_carousel_move_to('previous');
});
function set_carousel_height($the_carousel){
var carousel_items_width=$the_carousel_items.width(),
carousel_items_height=$the_carousel_items.height();
$carousel_items.css('height', carousel_items_height + 'px');
}
function set_carousel_columns($the_carousel){
var columns,
$carousel_parent=$the_carousel.parents('.et_pb_column'),
carousel_items_width=$carousel_items.width(),
carousel_item_count=$the_carousel_items.length;
if($carousel_parent.hasClass('et_pb_column_4_4')||$carousel_parent.hasClass('et_pb_column_3_4')||$carousel_parent.hasClass('et_pb_column_2_3')){
if($et_window.width() < 768){
columns=3;
}else{
columns=4;
}}else if($carousel_parent.hasClass('et_pb_column_1_2')||$carousel_parent.hasClass('et_pb_column_3_8')||$carousel_parent.hasClass('et_pb_column_1_3')){
columns=3;
}else if($carousel_parent.hasClass('et_pb_column_1_4')){
if($et_window.width() > 480&&$et_window.width() < 980){
columns=3;
}else{
columns=2;
}}
if(columns===$carousel_items.data('portfolio-columns')){
return;
}
if($the_carousel.data('columns_setting_up')){
return;
}
$the_carousel.data('columns_setting_up', true);
$carousel_items.removeClass('columns-' + $carousel_items.data('portfolio-columns'));
$carousel_items.addClass('columns-' + columns);
$carousel_items.data('portfolio-columns', columns);
if($carousel_items.find('.et-carousel-group').length){
$the_carousel_items.appendTo($carousel_items);
$carousel_items.find('.et-carousel-group').remove();
}
var the_carousel_items=$carousel_items.data('items'),
$carousel_group=$('<div class="et-carousel-group active">').appendTo($carousel_items);
$the_carousel_items.data('position', '');
if(the_carousel_items.length <=columns){
$carousel_items.find('.et-pb-slider-arrows').hide();
}else{
$carousel_items.find('.et-pb-slider-arrows').show();
}
for(position=1, x=0 ;x < the_carousel_items.length; x++, position++){
if(x < columns){
$(the_carousel_items[x]).show();
$(the_carousel_items[x]).appendTo($carousel_group);
$(the_carousel_items[x]).data('position', position);
$(the_carousel_items[x]).addClass('position_' + position);
}else{
position=$(the_carousel_items[x]).data('position');
$(the_carousel_items[x]).removeClass('position_' + position);
$(the_carousel_items[x]).data('position', '');
$(the_carousel_items[x]).hide();
}}
$the_carousel.data('columns_setting_up', false);
} 
$et_carousel.et_carousel_move_to=function(direction){
var $active_carousel_group=$carousel_items.find('.et-carousel-group.active'),
items=$carousel_items.data('items'),
columns=$carousel_items.data('portfolio-columns');
$et_carousel.et_animation_running=true;
var left=0;
$active_carousel_group.children().each(function(){
$(this).css({'position':'absolute', 'left': left });
left=left + $(this).outerWidth(true);
});
$('body').addClass('et-pb-is-sliding-carousel');
var carousel_group_item_size=$active_carousel_group.find('.et_pb_carousel_item').size();
var carousel_group_item_progress=0;
if(direction=='next'){
var $next_carousel_group,
current_position=1,
next_position=1,
active_items_start=items.indexOf($active_carousel_group.children().first()[0]),
active_items_end=active_items_start + columns,
next_items_start=active_items_end,
next_items_end=next_items_start + columns;
$next_carousel_group=$('<div class="et-carousel-group next" style="display: none;left: 100%;position: absolute;top: 0;">').insertAfter($active_carousel_group);
$next_carousel_group.css({ 'width': $active_carousel_group.innerWidth() }).show();
for(x=0, total=0 ; ; x++, total++){
if(total >=active_items_start&&total < active_items_end){
$(items[x]).addClass('changing_position current_position current_position_' + current_position);
$(items[x]).data('current_position', current_position);
current_position++;
}
if(total >=next_items_start&&total < next_items_end){
$(items[x]).data('next_position', next_position);
$(items[x]).addClass('changing_position next_position next_position_' + next_position);
if(!$(items[x]).hasClass('current_position')){
$(items[x]).addClass('container_append');
}else{
$(items[x]).clone(true).appendTo($active_carousel_group).hide().addClass('delayed_container_append_dup').attr('id', $(items[x]).attr('id') + '-dup');
$(items[x]).addClass('delayed_container_append');
}
next_position++;
}
if(next_position > columns){
break;
}
if(x >=(items.length -1)){
x=-1;
}}
var sorted=$carousel_items.find('.container_append, .delayed_container_append_dup').sort(function (a, b){
var el_a_position=parseInt($(a).data('next_position'));
var el_b_position=parseInt($(b).data('next_position'));
return(el_a_position < el_b_position) ? -1:(el_a_position > el_b_position) ? 1:0;
});
$(sorted).show().appendTo($next_carousel_group);
var left=0;
$next_carousel_group.children().each(function(){
$(this).css({'position':'absolute', 'left': left });
left=left + $(this).outerWidth(true);
});
$active_carousel_group.animate({
left: '-100%'
}, {
duration: settings.slide_duration,
progress: function(animation, progress){
if(progress > (carousel_group_item_progress/carousel_group_item_size)){
carousel_group_item_progress++;
$active_carousel_group.find('.et_pb_carousel_item:nth-child(' + carousel_group_item_progress + ')').addClass('item-fade-out');
$next_carousel_group.find('.et_pb_carousel_item:nth-child(' + carousel_group_item_progress + ')').addClass('item-fade-in');
}},
complete: function(){
$carousel_items.find('.delayed_container_append').each(function(){
left=$('#' + $(this).attr('id') + '-dup').css('left');
$(this).css({'position':'absolute', 'left': left });
$(this).appendTo($next_carousel_group);
});
$active_carousel_group.removeClass('active');
$active_carousel_group.children().each(function(){
position=$(this).data('position');
current_position=$(this).data('current_position');
$(this).removeClass('position_' + position + ' ' + 'changing_position current_position current_position_' + current_position);
$(this).data('position', '');
$(this).data('current_position', '');
$(this).hide();
$(this).css({'position': '', 'left': ''});
$(this).appendTo($carousel_items);
});
$carousel_items.find('.item-fade-out').removeClass('item-fade-out');
$next_carousel_group.find('.item-fade-in').removeClass('item-fade-in');
$('body').removeClass('et-pb-is-sliding-carousel');
$active_carousel_group.remove();
}});
next_left=$active_carousel_group.width() + parseInt($the_carousel_items.first().css('marginRight').slice(0, -2));
$next_carousel_group.addClass('active').css({'position':'absolute', 'top':0, left: next_left });
$next_carousel_group.animate({
left: '0%'
}, {
duration: settings.slide_duration,
complete: function(){
$next_carousel_group.removeClass('next').addClass('active').css({'position':'', 'width':'', 'top':'', 'left': ''});
$next_carousel_group.find('.changing_position').each(function(index){
position=$(this).data('position');
current_position=$(this).data('current_position');
next_position=$(this).data('next_position');
$(this).removeClass('container_append delayed_container_append position_' + position + ' ' + 'changing_position current_position current_position_' + current_position + ' next_position next_position_' + next_position);
$(this).data('current_position', '');
$(this).data('next_position', '');
$(this).data('position',(index + 1));
});
$next_carousel_group.children().css({'position': '', 'left': ''});
$next_carousel_group.find('.delayed_container_append_dup').remove();
$et_carousel.et_animation_running=false;
}});
}else if(direction=='previous'){
var $prev_carousel_group,
current_position=columns,
prev_position=columns,
columns_span=columns - 1,
active_items_start=items.indexOf($active_carousel_group.children().last()[0]),
active_items_end=active_items_start - columns_span,
prev_items_start=active_items_end - 1,
prev_items_end=prev_items_start - columns_span;
$prev_carousel_group=$('<div class="et-carousel-group prev" style="display: none;left: 100%;position: absolute;top: 0;">').insertBefore($active_carousel_group);
$prev_carousel_group.css({ 'left': '-' + $active_carousel_group.innerWidth(), 'width': $active_carousel_group.innerWidth() }).show();
for(x=(items.length - 1), total=(items.length - 1) ; ; x--, total--){
if(total <=active_items_start&&total >=active_items_end){
$(items[x]).addClass('changing_position current_position current_position_' + current_position);
$(items[x]).data('current_position', current_position);
current_position--;
}
if(total <=prev_items_start&&total >=prev_items_end){
$(items[x]).data('prev_position', prev_position);
$(items[x]).addClass('changing_position prev_position prev_position_' + prev_position);
if(!$(items[x]).hasClass('current_position')){
$(items[x]).addClass('container_append');
}else{
$(items[x]).clone(true).appendTo($active_carousel_group).addClass('delayed_container_append_dup').attr('id', $(items[x]).attr('id') + '-dup');
$(items[x]).addClass('delayed_container_append');
}
prev_position--;
}
if(prev_position <=0){
break;
}
if(x==0){
x=items.length;
}}
var sorted=$carousel_items.find('.container_append, .delayed_container_append_dup').sort(function (a, b){
var el_a_position=parseInt($(a).data('prev_position'));
var el_b_position=parseInt($(b).data('prev_position'));
return(el_a_position < el_b_position) ? -1:(el_a_position > el_b_position) ? 1:0;
});
$(sorted).show().appendTo($prev_carousel_group);
var left=0;
$prev_carousel_group.children().each(function(){
$(this).css({'position':'absolute', 'left': left });
left=left + $(this).outerWidth(true);
});
$active_carousel_group.animate({
left: '100%'
}, {
duration: settings.slide_duration,
progress: function(animation, progress){
if(progress > (carousel_group_item_progress/carousel_group_item_size)){
var group_item_nth=carousel_group_item_size - carousel_group_item_progress;
$active_carousel_group.find('.et_pb_carousel_item:nth-child(' + group_item_nth + ')').addClass('item-fade-out');
$prev_carousel_group.find('.et_pb_carousel_item:nth-child(' + group_item_nth + ')').addClass('item-fade-in');
carousel_group_item_progress++;
}},
complete: function(){
$carousel_items.find('.delayed_container_append').reverse().each(function(){
left=$('#' + $(this).attr('id') + '-dup').css('left');
$(this).css({'position':'absolute', 'left': left });
$(this).prependTo($prev_carousel_group);
});
$active_carousel_group.removeClass('active');
$active_carousel_group.children().each(function(){
position=$(this).data('position');
current_position=$(this).data('current_position');
$(this).removeClass('position_' + position + ' ' + 'changing_position current_position current_position_' + current_position);
$(this).data('position', '');
$(this).data('current_position', '');
$(this).hide();
$(this).css({'position': '', 'left': ''});
$(this).appendTo($carousel_items);
});
$carousel_items.find('.item-fade-out').removeClass('item-fade-out');
$prev_carousel_group.find('.item-fade-in').removeClass('item-fade-in');
$('body').removeClass('et-pb-is-sliding-carousel');
$active_carousel_group.remove();
}});
prev_left=(-1) * $active_carousel_group.width() - parseInt($the_carousel_items.first().css('marginRight').slice(0, -2));
$prev_carousel_group.addClass('active').css({'position':'absolute', 'top':0, left: prev_left });
$prev_carousel_group.animate({
left: '0%'
}, {
duration: settings.slide_duration,
complete: function(){
$prev_carousel_group.removeClass('prev').addClass('active').css({'position':'', 'width':'', 'top':'', 'left': ''});
$prev_carousel_group.find('.delayed_container_append_dup').remove();
$prev_carousel_group.find('.changing_position').each(function(index){
position=$(this).data('position');
current_position=$(this).data('current_position');
prev_position=$(this).data('prev_position');
$(this).removeClass('container_append delayed_container_append position_' + position + ' ' + 'changing_position current_position current_position_' + current_position + ' prev_position prev_position_' + prev_position);
$(this).data('current_position', '');
$(this).data('prev_position', '');
position=index + 1;
$(this).data('position', position);
$(this).addClass('position_' + position);
});
$prev_carousel_group.children().css({'position': '', 'left': ''});
$et_carousel.et_animation_running=false;
}});
}}
};
$.fn.et_pb_simple_carousel=function(options){
return this.each(function(){
var carousel=$.data(this, 'et_pb_simple_carousel');
return carousel ? carousel:new $.et_pb_simple_carousel(this, options);
});
};
$(document).ready(function(){
$(window).trigger('et_pb_before_init_modules');
var $et_pb_slider=$('.et_pb_slider'),
$et_pb_tabs=$('.et_pb_tabs'),
$et_pb_video_section=$('.et_pb_section_video_bg'),
$et_pb_newsletter_button=$('.et_pb_newsletter_button'),
$et_pb_filterable_portfolio=$('.et_pb_filterable_portfolio'),
$et_pb_fullwidth_portfolio=$('.et_pb_fullwidth_portfolio'),
$et_pb_gallery=$('.et_pb_gallery'),
$et_pb_countdown_timer=$('.et_pb_countdown_timer'),
$et_post_gallery=$('.et_post_gallery'),
$et_lightbox_image=$('.et_pb_lightbox_image'),
$et_pb_map=$('.et_pb_map_container'),
$et_pb_circle_counter=$('.et_pb_circle_counter'),
$et_pb_number_counter=$('.et_pb_number_counter'),
$et_pb_parallax=$('.et_parallax_bg'),
$et_pb_shop=$('.et_pb_shop'),
$et_pb_post_fullwidth=$('.single.et_pb_pagebuilder_layout.et_full_width_page'),
et_is_mobile_device=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/)!==null,
et_is_ipad=navigator.userAgent.match(/iPad/),
et_is_ie9=navigator.userAgent.match(/MSIE 9.0/)!==null,
$et_container = ! et_pb_custom.is_builder_plugin_used ? $('.container'):$('.et_pb_row'),
et_container_width=$et_container.width(),
et_is_vertical_fixed_nav=$('body').hasClass('et_vertical_fixed'),
et_is_rtl=$('body').hasClass('rtl'),
et_hide_nav=$('body').hasClass('et_hide_nav'),
et_header_style_left=$('body').hasClass('et_header_style_left'),
$top_header=$('#top-header'),
$main_header=$('#main-header'),
$main_container_wrapper=$('#page-container'),
$et_transparent_nav=$('.et_transparent_nav'),
$et_pb_first_row=$('body.et_pb_pagebuilder_layout .et_pb_section:first-child'),
$et_main_content_first_row=$('#main-content .container:first-child'),
$et_main_content_first_row_meta_wrapper=$et_main_content_first_row.find('.et_post_meta_wrapper:first'),
$et_main_content_first_row_meta_wrapper_title=$et_main_content_first_row_meta_wrapper.find('h1'),
$et_main_content_first_row_content=$et_main_content_first_row.find('.entry-content:first'),
$et_single_post=$('body.single-post'),
etRecalculateOffset=false,
et_header_height,
et_header_modifier,
et_header_offset,
et_primary_header_top,
$et_header_style_split=$('.et_header_style_split'),
$et_top_navigation=$('#et-top-navigation'),
$logo=$('#logo'),
$et_sticky_image=$('.et_pb_image_sticky'),
$et_pb_counter_amount=$('.et_pb_counter_amount'),
$et_pb_carousel=$('.et_pb_carousel'),
$et_menu_selector=et_pb_custom.is_divi_theme_used ? $('ul.nav'):$('.et_pb_fullwidth_menu ul.nav'),
et_pb_ab_bounce_rate=et_pb_custom.ab_bounce_rate * 1000,
et_pb_ab_logged_status={
read_page: false,
read_goal: false,
view_goal: false,
click_goal: false,
con_goal: false,
con_short: false,
};
window.et_pb_slider_init=function($this_slider){
var et_slider_settings={
fade_speed:700,
slide:! $this_slider.hasClass('et_pb_gallery') ? '.et_pb_slide':'.et_pb_gallery_item'
};
if($this_slider.hasClass('et_pb_slider_no_arrows'))
et_slider_settings.use_arrows=false;
if($this_slider.hasClass('et_pb_slider_no_pagination'))
et_slider_settings.use_controls=false;
if($this_slider.hasClass('et_slider_auto')){
var et_slider_autospeed_class_value=/et_slider_speed_(\d+)/g;
et_slider_settings.slideshow=true;
var et_slider_autospeed=et_slider_autospeed_class_value.exec($this_slider.attr('class'));
et_slider_settings.slideshow_speed=et_slider_autospeed===null ? 10:et_slider_autospeed[1];
}
if($this_slider.parent().hasClass('et_pb_video_slider')){
et_slider_settings.controls_below=true;
et_slider_settings.append_controls_to=$this_slider.parent();
setTimeout(function(){
$('.et_pb_preload').removeClass('et_pb_preload');
}, 500);
}
if($this_slider.hasClass('et_pb_slider_carousel'))
et_slider_settings.use_carousel=true;
$this_slider.et_pb_simple_slider(et_slider_settings);
}
var $et_top_menu=$et_menu_selector,
et_parent_menu_longpress_limit=300,
et_parent_menu_longpress_start,
et_parent_menu_click=true,
is_frontend_builder=$('body').hasClass('et-fb'),
et_menu_hover_triggered=false;
if($('.et_pb_ab_shop_conversion').length&&typeof et_pb_get_cookie_value('et_pb_ab_shop_log')!=='undefined'&&''!==et_pb_get_cookie_value('et_pb_ab_shop_log')){
var shop_log_data=et_pb_get_cookie_value('et_pb_ab_shop_log').split('_');
page_id=shop_log_data[0],
subject_id=shop_log_data[1],
test_id=shop_log_data[2];
et_pb_ab_update_stats('con_goal', page_id, subject_id, test_id);
et_pb_set_cookie(0, 'et_pb_ab_shop_log=true');
}
if($('.et_pb_ab_split_track').length){
$('.et_pb_ab_split_track').each(function(){
var tracking_test=$(this).data('test_id'),
cookies_name='et_pb_ab_shortcode_track_' + tracking_test;
if(typeof et_pb_get_cookie_value(cookies_name)!=='undefined'&&''!==et_pb_get_cookie_value(cookies_name)){
var track_data=et_pb_get_cookie_value(cookies_name).split('_');
page_id=track_data[0],
subject_id=track_data[1],
test_id=track_data[2];
et_pb_ab_update_stats('con_short', page_id, subject_id, test_id);
et_pb_set_cookie(0, cookies_name + '=true');
}});
}
if(et_pb_custom.is_ab_testing_active){
et_pb_init_ab_test();
}
if($('.et_pb_row').length){
$('.et_pb_row').each(function(){
var $this_row=$(this),
row_class='';
row_class=et_get_column_types($this_row.find('>.et_pb_column'));
if(''!==row_class&&(-1!==row_class.indexOf('1-4')||'_4col'===row_class)){
$this_row.addClass('et_pb_row' + row_class);
}
if($this_row.find('.et_pb_row_inner').length){
$this_row.find('.et_pb_row_inner').each(function(){
var $this_row_inner=$(this);
row_class=et_get_column_types($this_row_inner.find('.et_pb_column'));
if(''!==row_class&&-1!==row_class.indexOf('1-4')){
$this_row_inner.addClass('et_pb_row' + row_class);
}});
}});
}
function et_get_column_types($columns){
var row_class='';
if($columns.length){
$columns.each(function(){
var $this_column=$(this),
column_type=$this_column.attr('class').split('et_pb_column_')[1],
column_type_clean=typeof column_type!=='undefined' ? column_type.split(' ', 1)[0]:'4_4',
column_type_updated=column_type_clean.replace('_', '-').trim();
row_class +='_' + column_type_updated;
});
row_class='_1-4_1-4_1-4_1-4'===row_class ? '_4col':row_class;
}
return row_class;
}
window.et_pb_init_nav_menu($et_top_menu);
$et_sticky_image.each(function(){
var $this_el=$(this),
$row=$this_el.closest('.et_pb_row'),
$section=$row.closest('.et_pb_section'),
$column=$this_el.closest('.et_pb_column'),
sticky_class='et_pb_section_sticky',
sticky_mobile_class='et_pb_section_sticky_mobile';
if(! $row.is(':last-child')){
return true;
}
if(! $this_el.is(':last-child')){
return true;
}
if(! $section.hasClass(sticky_class)){
$section.addClass(sticky_class);
}
$column.addClass('et_pb_row_sticky');
if(! $section.hasClass(sticky_mobile_class)&&$column.is(':last-child')){
$section.addClass(sticky_mobile_class);
}});
if(et_is_mobile_device){
$('.et_pb_section_video_bg').each(function(){
var $this_el=$(this);
$this_el.closest('.et_pb_preload').removeClass('et_pb_preload')
$this_el.remove();
});
$('body').addClass('et_mobile_device');
if(! et_is_ipad){
$('body').addClass('et_mobile_device_not_ipad');
}}
if(et_is_ie9){
$('body').addClass('et_ie9');
}
if($et_pb_video_section.length||is_frontend_builder){
window.et_pb_video_section_init=function($et_pb_video_section){
$et_pb_video_section.find('video').mediaelementplayer({
pauseOtherPlayers: false,
success:function(mediaElement, domObject){
mediaElement.addEventListener('loadeddata', function(){
et_pb_resize_section_video_bg($(domObject));
et_pb_center_video($(domObject).closest('.mejs-video'));
}, false);
mediaElement.addEventListener('canplay', function(){
$(domObject).closest('.et_pb_preload').removeClass('et_pb_preload');
}, false);
}});
}
et_pb_video_section_init($et_pb_video_section);
}
if($et_post_gallery.length){
var magnificPopup=$.magnificPopup.instance;
$('body').on('swiperight', '.mfp-container', function(){
magnificPopup.prev();
});
$('body').on('swipeleft', '.mfp-container', function(){
magnificPopup.next();
});
$et_post_gallery.each(function(){
$(this).magnificPopup({
delegate: '.et_pb_gallery_image a',
type: 'image',
removalDelay: 500,
gallery: {
enabled: true,
navigateByImgClick: true
},
mainClass: 'mfp-fade',
zoom: {
enabled: ! et_pb_custom.is_builder_plugin_used,
duration: 500,
opener: function(element){
return element.find('img');
}}
});
});
$et_post_gallery.find('a').unbind('click');
}
if($et_lightbox_image.length||is_frontend_builder){
$et_lightbox_image.unbind('click');
$et_lightbox_image.bind('click');
window.et_pb_image_lightbox_init=function($et_lightbox_image){
$et_lightbox_image.magnificPopup({
type: 'image',
removalDelay: 500,
mainClass: 'mfp-fade',
zoom: {
enabled: ! et_pb_custom.is_builder_plugin_used,
duration: 500,
opener: function(element){
return element.find('img');
}}
});
}
et_pb_image_lightbox_init($et_lightbox_image);
}
if($et_pb_slider.length||is_frontend_builder){
$et_pb_slider.each(function(){
$this_slider=$(this);
et_pb_slider_init($this_slider);
});
}
$et_pb_carousel=$('.et_pb_carousel');
if($et_pb_carousel.length||is_frontend_builder){
$et_pb_carousel.each(function(){
var $this_carousel=$(this),
et_carousel_settings={
slide_duration: 1000
};
$this_carousel.et_pb_simple_carousel(et_carousel_settings);
});
}
if($et_pb_fullwidth_portfolio.length||is_frontend_builder){
window.et_fullwidth_portfolio_init=function($the_portfolio){
var $portfolio_items=$the_portfolio.find('.et_pb_portfolio_items');
$portfolio_items.data('items', $portfolio_items.find('.et_pb_portfolio_item').toArray());
$the_portfolio.data('columns_setting_up', false);
if($the_portfolio.hasClass('et_pb_fullwidth_portfolio_carousel')){
$portfolio_items.prepend('<div class="et-pb-slider-arrows"><a class="et-pb-arrow-prev" href="#">' + '<span>' + et_pb_custom.previous + '</span>' + '</a><a class="et-pb-arrow-next" href="#">' + '<span>' + et_pb_custom.next + '</span>' + '</a></div>');
set_fullwidth_portfolio_columns($the_portfolio, true);
et_carousel_auto_rotate($the_portfolio);
$the_portfolio.on('swiperight', function(){
$(this).find('.et-pb-arrow-prev').click();
});
$the_portfolio.on('swipeleft', function(){
$(this).find('.et-pb-arrow-next').click();
});
$the_portfolio.hover(function(){
$(this).addClass('et_carousel_hovered');
if(typeof $(this).data('et_carousel_timer')!='undefined'){
clearInterval($(this).data('et_carousel_timer'));
}},
function(){
$(this).removeClass('et_carousel_hovered');
et_carousel_auto_rotate($(this));
}
);
$the_portfolio.data('carouseling', false);
$the_portfolio.on('click', '.et-pb-slider-arrows a', function(e){
fullwidth_portfolio_carousel_slide($(this));
e.preventDefault();
return false;
});
}else{
set_fullwidth_portfolio_columns($the_portfolio, false);
}}
function fullwidth_portfolio_carousel_slide($arrow){
var $the_portfolio=$arrow.parents('.et_pb_fullwidth_portfolio'),
$portfolio_items=$the_portfolio.find('.et_pb_portfolio_items'),
$the_portfolio_items=$portfolio_items.find('.et_pb_portfolio_item'),
$active_carousel_group=$portfolio_items.find('.et_pb_carousel_group.active'),
slide_duration=700,
items=$portfolio_items.data('items'),
columns=$portfolio_items.data('portfolio-columns'),
item_width=$active_carousel_group.innerWidth() / columns,
original_item_width=(100 / columns) + '%';
if('undefined'==typeof items){
return;
}
if($the_portfolio.data('carouseling')){
return;
}
$the_portfolio.data('carouseling', true);
$active_carousel_group.children().each(function(){
$(this).css({'width': item_width + 1, 'max-width': item_width, 'position':'absolute', 'left':(item_width *($(this).data('position') - 1)) });
});
if($arrow.hasClass('et-pb-arrow-next')){
var $next_carousel_group,
current_position=1,
next_position=1,
active_items_start=items.indexOf($active_carousel_group.children().first()[0]),
active_items_end=active_items_start + columns,
next_items_start=active_items_end,
next_items_end=next_items_start + columns,
active_carousel_width=$active_carousel_group.innerWidth();
$next_carousel_group=$('<div class="et_pb_carousel_group next" style="display: none;left: 100%;position: absolute;top: 0;">').insertAfter($active_carousel_group);
$next_carousel_group.css({ 'width': active_carousel_width, 'max-width': active_carousel_width }).show();
for(x=0, total=0 ; ; x++, total++){
if(total >=active_items_start&&total < active_items_end){
$(items[x]).addClass('changing_position current_position current_position_' + current_position);
$(items[x]).data('current_position', current_position);
current_position++;
}
if(total >=next_items_start&&total < next_items_end){
$(items[x]).data('next_position', next_position);
$(items[x]).addClass('changing_position next_position next_position_' + next_position);
if(!$(items[x]).hasClass('current_position')){
$(items[x]).addClass('container_append');
}else{
$(items[x]).clone(true).appendTo($active_carousel_group).hide().addClass('delayed_container_append_dup').attr('id', $(items[x]).attr('id') + '-dup');
$(items[x]).addClass('delayed_container_append');
}
next_position++;
}
if(next_position > columns){
break;
}
if(x >=(items.length -1)){
x=-1;
}}
sorted=$portfolio_items.find('.container_append, .delayed_container_append_dup').sort(function (a, b){
var el_a_position=parseInt($(a).data('next_position'));
var el_b_position=parseInt($(b).data('next_position'));
return(el_a_position < el_b_position) ? -1:(el_a_position > el_b_position) ? 1:0;
});
$(sorted).show().appendTo($next_carousel_group);
$next_carousel_group.children().each(function(){
$(this).css({'width': item_width, 'max-width': item_width, 'position':'absolute', 'left':(item_width *($(this).data('next_position') - 1)) });
});
$active_carousel_group.animate({
left: '-100%'
}, {
duration: slide_duration,
complete: function(){
$portfolio_items.find('.delayed_container_append').each(function(){
$(this).css({'width': item_width, 'max-width': item_width, 'position':'absolute', 'left':(item_width *($(this).data('next_position') - 1)) });
$(this).appendTo($next_carousel_group);
});
$active_carousel_group.removeClass('active');
$active_carousel_group.children().each(function(){
position=$(this).data('position');
current_position=$(this).data('current_position');
$(this).removeClass('position_' + position + ' ' + 'changing_position current_position current_position_' + current_position);
$(this).data('position', '');
$(this).data('current_position', '');
$(this).hide();
$(this).css({'position': '', 'width': '', 'max-width': '', 'left': ''});
$(this).appendTo($portfolio_items);
});
$active_carousel_group.remove();
et_carousel_auto_rotate($the_portfolio);
}});
$next_carousel_group.addClass('active').css({'position':'absolute', 'top':0, left: '100%'});
$next_carousel_group.animate({
left: '0%'
}, {
duration: slide_duration,
complete: function(){
setTimeout(function(){
$next_carousel_group.removeClass('next').addClass('active').css({'position':'', 'width':'', 'max-width':'', 'top':'', 'left': ''});
$next_carousel_group.find('.delayed_container_append_dup').remove();
$next_carousel_group.find('.changing_position').each(function(index){
position=$(this).data('position');
current_position=$(this).data('current_position');
next_position=$(this).data('next_position');
$(this).removeClass('container_append delayed_container_append position_' + position + ' ' + 'changing_position current_position current_position_' + current_position + ' next_position next_position_' + next_position);
$(this).data('current_position', '');
$(this).data('next_position', '');
$(this).data('position',(index + 1));
});
$next_carousel_group.children().css({'position': '', 'width': original_item_width, 'max-width': original_item_width, 'left': ''});
$the_portfolio.data('carouseling', false);
}, 100);
}});
}else{
var $prev_carousel_group,
current_position=columns,
prev_position=columns,
columns_span=columns - 1,
active_items_start=items.indexOf($active_carousel_group.children().last()[0]),
active_items_end=active_items_start - columns_span,
prev_items_start=active_items_end - 1,
prev_items_end=prev_items_start - columns_span,
active_carousel_width=$active_carousel_group.innerWidth();
$prev_carousel_group=$('<div class="et_pb_carousel_group prev" style="display: none;left: 100%;position: absolute;top: 0;">').insertBefore($active_carousel_group);
$prev_carousel_group.css({ 'left': '-' + active_carousel_width, 'width': active_carousel_width, 'max-width': active_carousel_width }).show();
for(x=(items.length - 1), total=(items.length - 1) ; ; x--, total--){
if(total <=active_items_start&&total >=active_items_end){
$(items[x]).addClass('changing_position current_position current_position_' + current_position);
$(items[x]).data('current_position', current_position);
current_position--;
}
if(total <=prev_items_start&&total >=prev_items_end){
$(items[x]).data('prev_position', prev_position);
$(items[x]).addClass('changing_position prev_position prev_position_' + prev_position);
if(!$(items[x]).hasClass('current_position')){
$(items[x]).addClass('container_append');
}else{
$(items[x]).clone(true).appendTo($active_carousel_group).addClass('delayed_container_append_dup').attr('id', $(items[x]).attr('id') + '-dup');
$(items[x]).addClass('delayed_container_append');
}
prev_position--;
}
if(prev_position <=0){
break;
}
if(x==0){
x=items.length;
}}
sorted=$portfolio_items.find('.container_append, .delayed_container_append_dup').sort(function (a, b){
var el_a_position=parseInt($(a).data('prev_position'));
var el_b_position=parseInt($(b).data('prev_position'));
return(el_a_position < el_b_position) ? -1:(el_a_position > el_b_position) ? 1:0;
});
$(sorted).show().appendTo($prev_carousel_group);
$prev_carousel_group.children().each(function(){
$(this).css({'width': item_width, 'max-width': item_width, 'position':'absolute', 'left':(item_width *($(this).data('prev_position') - 1)) });
});
$active_carousel_group.animate({
left: '100%'
}, {
duration: slide_duration,
complete: function(){
$portfolio_items.find('.delayed_container_append').reverse().each(function(){
$(this).css({'width': item_width, 'max-width': item_width, 'position':'absolute', 'left':(item_width *($(this).data('prev_position') - 1)) });
$(this).prependTo($prev_carousel_group);
});
$active_carousel_group.removeClass('active');
$active_carousel_group.children().each(function(){
position=$(this).data('position');
current_position=$(this).data('current_position');
$(this).removeClass('position_' + position + ' ' + 'changing_position current_position current_position_' + current_position);
$(this).data('position', '');
$(this).data('current_position', '');
$(this).hide();
$(this).css({'position': '', 'width': '', 'max-width': '', 'left': ''});
$(this).appendTo($portfolio_items);
});
$active_carousel_group.remove();
}});
$prev_carousel_group.addClass('active').css({'position':'absolute', 'top':0, left: '-100%'});
$prev_carousel_group.animate({
left: '0%'
}, {
duration: slide_duration,
complete: function(){
setTimeout(function(){
$prev_carousel_group.removeClass('prev').addClass('active').css({'position':'', 'width':'', 'max-width':'', 'top':'', 'left': ''});
$prev_carousel_group.find('.delayed_container_append_dup').remove();
$prev_carousel_group.find('.changing_position').each(function(index){
position=$(this).data('position');
current_position=$(this).data('current_position');
prev_position=$(this).data('prev_position');
$(this).removeClass('container_append delayed_container_append position_' + position + ' ' + 'changing_position current_position current_position_' + current_position + ' prev_position prev_position_' + prev_position);
$(this).data('current_position', '');
$(this).data('prev_position', '');
position=index + 1;
$(this).data('position', position);
$(this).addClass('position_' + position);
});
$prev_carousel_group.children().css({'position': '', 'width': original_item_width, 'max-width': original_item_width, 'left': ''});
$the_portfolio.data('carouseling', false);
}, 100);
}});
}}
function set_fullwidth_portfolio_columns($the_portfolio, carousel_mode){
var columns,
$portfolio_items=$the_portfolio.find('.et_pb_portfolio_items'),
portfolio_items_width=$portfolio_items.width(),
$the_portfolio_items=$portfolio_items.find('.et_pb_portfolio_item'),
portfolio_item_count=$the_portfolio_items.length;
if('undefined'===typeof $the_portfolio_items){
return;
}
if(portfolio_items_width >=1600){
columns=5;
}else if(portfolio_items_width >=1024){
columns=4;
}else if(portfolio_items_width >=768){
columns=3;
}else if(portfolio_items_width >=480){
columns=2;
}else{
columns=1;
}
portfolio_item_width=portfolio_items_width / columns;
portfolio_item_height=portfolio_item_width * .75;
if(carousel_mode){
$portfolio_items.css({ 'height':portfolio_item_height });
}
$the_portfolio_items.css({ 'height':portfolio_item_height });
if(columns===$portfolio_items.data('portfolio-columns')){
return;
}
if($the_portfolio.data('columns_setting_up')){
return;
}
$the_portfolio.data('columns_setting_up', true);
var portfolio_item_width_percentage=(100 / columns) + '%';
$the_portfolio_items.css({ 'width':portfolio_item_width_percentage, 'max-width':portfolio_item_width_percentage });
$portfolio_items.removeClass('columns-' + $portfolio_items.data('portfolio-columns'));
$portfolio_items.addClass('columns-' + columns);
$portfolio_items.data('portfolio-columns', columns);
if(!carousel_mode){
return $the_portfolio.data('columns_setting_up', false);
}
if($portfolio_items.find('.et_pb_carousel_group').length){
$the_portfolio_items.appendTo($portfolio_items);
$portfolio_items.find('.et_pb_carousel_group').remove();
}
var the_portfolio_items=$portfolio_items.data('items'),
$carousel_group=$('<div class="et_pb_carousel_group active">').appendTo($portfolio_items);
if('undefined'===typeof the_portfolio_items){
return;
}
$the_portfolio_items.data('position', '');
if(the_portfolio_items.length <=columns){
$portfolio_items.find('.et-pb-slider-arrows').hide();
}else{
$portfolio_items.find('.et-pb-slider-arrows').show();
}
for(position=1, x=0 ;x < the_portfolio_items.length; x++, position++){
if(x < columns){
$(the_portfolio_items[x]).show();
$(the_portfolio_items[x]).appendTo($carousel_group);
$(the_portfolio_items[x]).data('position', position);
$(the_portfolio_items[x]).addClass('position_' + position);
}else{
position=$(the_portfolio_items[x]).data('position');
$(the_portfolio_items[x]).removeClass('position_' + position);
$(the_portfolio_items[x]).data('position', '');
$(the_portfolio_items[x]).hide();
}}
$the_portfolio.data('columns_setting_up', false);
}
function et_carousel_auto_rotate($carousel){
if('on'===$carousel.data('auto-rotate')&&$carousel.find('.et_pb_portfolio_item').length > $carousel.find('.et_pb_carousel_group .et_pb_portfolio_item').length&&! $carousel.hasClass('et_carousel_hovered')){
et_carousel_timer=setTimeout(function(){
fullwidth_portfolio_carousel_slide($carousel.find('.et-pb-arrow-next'));
}, $carousel.data('auto-rotate-speed'));
$carousel.data('et_carousel_timer', et_carousel_timer);
}}
$et_pb_fullwidth_portfolio.each(function(){
et_fullwidth_portfolio_init($(this));
});
}
function et_audio_module_set(){
if($('.et_pb_audio_module .mejs-audio').length||$('.et_audio_content .mejs-audio').length){
$('.et_audio_container').each(function(){
et_pb_audio_module_init($(this));
});
}}
window.et_pb_audio_module_init=function($audio_container){
var $this_player=$audio_container,
$time_rail=$this_player.find('.mejs-time-rail'),
$time_slider=$this_player.find('.mejs-time-slider');
$time_rail.removeAttr('style');
$time_slider.removeAttr('style');
var $count_timer=$this_player.find('div.mejs-currenttime-container'),
$count_timer_width_container=$this_player.find('.mejs-duration-container').length ? $this_player.find('.mejs-duration-container'):$this_player.find('.mejs-currenttime-container'),
player_width=$this_player.width(),
controls_play_width=$this_player.find('.mejs-play').outerWidth(),
time_width=$count_timer_width_container.outerWidth(),
volume_icon_width=$this_player.find('.mejs-volume-button').outerWidth(),
volume_bar_width=$this_player.find('.mejs-horizontal-volume-slider').outerWidth(),
new_time_rail_width;
$count_timer.addClass('custom');
$this_player.find('.mejs-controls div.mejs-duration-container').replaceWith($count_timer);
new_time_rail_width=player_width -(controls_play_width + time_width + volume_icon_width + volume_bar_width + 65);
if(0 < new_time_rail_width){
$time_rail.attr('style', 'min-width: ' + new_time_rail_width + 'px;');
$time_slider.attr('style', 'min-width: ' + new_time_rail_width + 'px;');
}}
if($('.et_pb_section_video').length){
window._wpmejsSettings.pauseOtherPlayers=false;
}
if($et_pb_filterable_portfolio.length||is_frontend_builder){
window.et_pb_filterable_portfolio_init=function($selector){
if(typeof $selector!=='undefined'){
set_filterable_portfolio_init($selector);
}else{
$et_pb_filterable_portfolio.each(function(){
set_filterable_portfolio_init($(this))
});
}}
window.set_filterable_portfolio_init=function($the_portfolio){
var $the_portfolio_items=$the_portfolio.find('.et_pb_portfolio_items'),
$left_orientatation=true==$the_portfolio.data('rtl') ? false:true,
all_portfolio_items=$the_portfolio_items.clone();
$the_portfolio.show();
$the_portfolio.find('.et_pb_portfolio_item').addClass('active');
$the_portfolio.css('display', 'block');
set_filterable_grid_items($the_portfolio);
$the_portfolio.on('click', '.et_pb_portfolio_filter a', function(e){
e.preventDefault();
var category_slug=$(this).data('category-slug');
var $the_portfolio=$(this).parents('.et_pb_filterable_portfolio');
var $the_portfolio_items=$the_portfolio.find('.et_pb_portfolio_items');
if('all'==category_slug){
$the_portfolio.find('.et_pb_portfolio_filter a').removeClass('active');
$the_portfolio.find('.et_pb_portfolio_filter_all a').addClass('active');
$the_portfolio_items.empty();
$the_portfolio_items.append(all_portfolio_items.find('.et_pb_portfolio_item').clone());
$the_portfolio.find('.et_pb_portfolio_item').addClass('active');
}else{
$the_portfolio.find('.et_pb_portfolio_filter_all').removeClass('active');
$the_portfolio.find('.et_pb_portfolio_filter a').removeClass('active');
$the_portfolio.find('.et_pb_portfolio_filter_all a').removeClass('active');
$(this).addClass('active');
$the_portfolio_items.empty();
$the_portfolio_items.append(all_portfolio_items.find('.et_pb_portfolio_item.project_category_' + $(this).data('category-slug')).clone());
$the_portfolio_items.find('.et_pb_portfolio_item').removeClass('active');
$the_portfolio_items.find('.et_pb_portfolio_item.project_category_' + $(this).data('category-slug')).addClass('active').removeClass('inactive');
}
set_filterable_grid_items($the_portfolio);
setTimeout(function(){
set_filterable_portfolio_hash($the_portfolio);
}, 500);
$the_portfolio.find('.et_pb_portfolio_item').removeClass('first_in_row last_in_row');
et_pb_set_responsive_grid($the_portfolio, '.et_pb_portfolio_item:visible');
});
$the_portfolio.on('click', '.et_pb_portofolio_pagination a', function(e){
e.preventDefault();
var to_page=$(this).data('page');
var $the_portfolio=$(this).parents('.et_pb_filterable_portfolio');
var $the_portfolio_items=$the_portfolio.find('.et_pb_portfolio_items');
et_pb_smooth_scroll($the_portfolio, false, 800);
if($(this).hasClass('page-prev')){
to_page=parseInt($(this).parents('ul').find('a.active').data('page')) - 1;
}else if($(this).hasClass('page-next')){
to_page=parseInt($(this).parents('ul').find('a.active').data('page')) + 1;
}
$(this).parents('ul').find('a').removeClass('active');
$(this).parents('ul').find('a.page-' + to_page).addClass('active');
var current_index=$(this).parents('ul').find('a.page-' + to_page).parent().index(),
total_pages=$(this).parents('ul').find('li.page').length;
$(this).parent().nextUntil('.page-' +(current_index + 3)).show();
$(this).parent().prevUntil('.page-' +(current_index - 3)).show();
$(this).parents('ul').find('li.page').each(function(i){
if(!$(this).hasClass('prev')&&!$(this).hasClass('next')){
if(i <(current_index - 3)){
$(this).hide();
}else if(i >(current_index + 1)){
$(this).hide();
}else{
$(this).show();
}
if(total_pages - current_index <=2&&total_pages - i <=5){
$(this).show();
}else if(current_index <=3&&i <=4){
$(this).show();
}}
});
if(to_page > 1){
$(this).parents('ul').find('li.prev').show();
}else{
$(this).parents('ul').find('li.prev').hide();
}
if($(this).parents('ul').find('a.active').hasClass('last-page')){
$(this).parents('ul').find('li.next').hide();
}else{
$(this).parents('ul').find('li.next').show();
}
$the_portfolio.find('.et_pb_portfolio_item').hide();
$the_portfolio.find('.et_pb_portfolio_item').filter(function(index){
return $(this).data('page')===to_page;
}).show();
window.et_pb_set_responsive_grid($the_portfolio.find('.et_pb_portfolio_items'), '.et_pb_portfolio_item');
setTimeout(function(){
set_filterable_portfolio_hash($the_portfolio);
}, 500);
$the_portfolio.find('.et_pb_portfolio_item').removeClass('first_in_row last_in_row');
et_pb_set_responsive_grid($the_portfolio, '.et_pb_portfolio_item:visible');
});
$(this).on('et_hashchange', function(event){
var params=event.params;
$the_portfolio=$('#' + event.target.id);
if(!$the_portfolio.find('.et_pb_portfolio_filter a[data-category-slug="' + params[0] + '"]').hasClass('active')){
$the_portfolio.find('.et_pb_portfolio_filter a[data-category-slug="' + params[0] + '"]').click();
}
if(params[1]){
setTimeout(function(){
if(!$the_portfolio.find('.et_pb_portofolio_pagination a.page-' + params[1]).hasClass('active')){
$the_portfolio.find('.et_pb_portofolio_pagination a.page-' + params[1]).addClass('active').click();
}}, 300);
}});
}
if(window.et_load_event_fired){
et_pb_filterable_portfolio_init();
}else{
$(window).load(function(){
et_pb_filterable_portfolio_init();
});
}
function set_filterable_grid_items($the_portfolio){
var active_category=$the_portfolio.find('.et_pb_portfolio_filter > a.active').data('category-slug');
window.et_pb_set_responsive_grid($the_portfolio.find('.et_pb_portfolio_items'), '.et_pb_portfolio_item');
if('all'===active_category){
$the_portfolio_visible_items=$the_portfolio.find('.et_pb_portfolio_item');
}else{
$the_portfolio_visible_items=$the_portfolio.find('.et_pb_portfolio_item.project_category_' + active_category);
}
var visible_grid_items=$the_portfolio_visible_items.length,
posts_number=$the_portfolio.data('posts-number'),
pages=0===posts_number ? 1:Math.ceil(visible_grid_items / posts_number);
set_filterable_grid_pages($the_portfolio, pages);
var visible_grid_items=0;
var _page=1;
$the_portfolio.find('.et_pb_portfolio_item').data('page', '');
$the_portfolio_visible_items.each(function(i){
visible_grid_items++;
if(0===parseInt(visible_grid_items % posts_number)){
$(this).data('page', _page);
_page++;
}else{
$(this).data('page', _page);
}});
$the_portfolio_visible_items.filter(function(){
return $(this).data('page')==1;
}).show();
$the_portfolio_visible_items.filter(function(){
return $(this).data('page')!=1;
}).hide();
}
function set_filterable_grid_pages($the_portfolio, pages){
$pagination=$the_portfolio.find('.et_pb_portofolio_pagination');
if(!$pagination.length){
return;
}
$pagination.html('<ul></ul>');
if(pages <=1){
return;
}
$pagination_list=$pagination.children('ul');
$pagination_list.append('<li class="prev" style="display:none;"><a href="#" data-page="prev" class="page-prev">' + et_pb_custom.prev + '</a></li>');
for(var page=1; page <=pages; page++){
var first_page_class=page===1 ? ' active':'',
last_page_class=page===pages ? ' last-page':'',
hidden_page_class=page >=5 ? ' style="display:none;"':'';
$pagination_list.append('<li' + hidden_page_class + ' class="page page-' + page + '"><a href="#" data-page="' + page + '" class="page-' + page + first_page_class + last_page_class + '">' + page + '</a></li>');
}
$pagination_list.append('<li class="next"><a href="#" data-page="next" class="page-next">' + et_pb_custom.next + '</a></li>');
}
function set_filterable_portfolio_hash($the_portfolio){
if(!$the_portfolio.attr('id')){
return;
}
var this_portfolio_state=[];
this_portfolio_state.push($the_portfolio.attr('id'));
this_portfolio_state.push($the_portfolio.find('.et_pb_portfolio_filter > a.active').data('category-slug'));
if($the_portfolio.find('.et_pb_portofolio_pagination a.active').length){
this_portfolio_state.push($the_portfolio.find('.et_pb_portofolio_pagination a.active').data('page'));
}else{
this_portfolio_state.push(1);
}
this_portfolio_state=this_portfolio_state.join(et_hash_module_param_seperator);
et_set_hash(this_portfolio_state);
}} 
if($et_pb_gallery.length||is_frontend_builder){
window.set_gallery_grid_items=function($the_gallery){
var $the_gallery_items_container=$the_gallery.find('.et_pb_gallery_items'),
$the_gallery_items=$the_gallery_items_container.find('.et_pb_gallery_item');
var total_grid_items=$the_gallery_items.length,
posts_number_original=parseInt($the_gallery_items_container.attr('data-per_page')),
posts_number=isNaN(posts_number_original)||0===posts_number_original ? 4:posts_number_original,
pages=Math.ceil(total_grid_items / posts_number);
set_gallery_grid_pages($the_gallery, pages);
var total_grid_items=0;
var _page=1;
$the_gallery_items_container.find('.et_pb_gallery_filler').remove();
var filler='<div class="et_pb_gallery_filler"></div>';
var fillers_added=0;
$the_gallery_items.data('page', '');
$the_gallery_items.each(function(i){
total_grid_items++;
var $this=$(this);
if(0===parseInt(total_grid_items % posts_number)){
$this.data('page', _page);
fillers_added=0;
while (fillers_added < 4&&'0px'!==$this.css('marginRight')){
fillers_added++
$this.before($(filler));
}
_page++;
}else{
$this.data('page', _page);
}});
var visible_items=$the_gallery_items.filter(function(){
return $(this).data('page')==1;
}).show();
$the_gallery_items.filter(function(){
return $(this).data('page')!=1;
}).hide();
}
window.set_gallery_grid_pages=function($the_gallery, pages){
$pagination=$the_gallery.find('.et_pb_gallery_pagination');
if(!$pagination.length){
return;
}
$pagination.html('<ul></ul>');
if(pages <=1){
$pagination.hide();
return;
}
$pagination_list=$pagination.children('ul');
$pagination_list.append('<li class="prev" style="display:none;"><a href="#" data-page="prev" class="page-prev">' + et_pb_custom.prev + '</a></li>');
for(var page=1; page <=pages; page++){
var first_page_class=page===1 ? ' active':'',
last_page_class=page===pages ? ' last-page':'',
hidden_page_class=page >=5 ? ' style="display:none;"':'';
$pagination_list.append('<li' + hidden_page_class + ' class="page page-' + page + '"><a href="#" data-page="' + page + '" class="page-' + page + first_page_class + last_page_class + '">' + page + '</a></li>');
}
$pagination_list.append('<li class="next"><a href="#" data-page="next" class="page-next">' + et_pb_custom.next + '</a></li>');
}
window.set_gallery_hash=function($the_gallery){
if(!$the_gallery.attr('id')){
return;
}
var this_gallery_state=[];
this_gallery_state.push($the_gallery.attr('id'));
if($the_gallery.find('.et_pb_gallery_pagination a.active').length){
this_gallery_state.push($the_gallery.find('.et_pb_gallery_pagination a.active').data('page'));
}else{
this_gallery_state.push(1);
}
this_gallery_state=this_gallery_state.join(et_hash_module_param_seperator);
et_set_hash(this_gallery_state);
}
window.et_pb_gallery_init=function($the_gallery){
if($the_gallery.hasClass('et_pb_gallery_grid')){
$the_gallery.show();
set_gallery_grid_items($the_gallery);
$the_gallery.on('et_hashchange', function(event){
var params=event.params;
$the_gallery=$('#' + event.target.id);
if(page_to=params[0]){
if(!$the_gallery.find('.et_pb_gallery_pagination a.page-' + page_to).hasClass('active')){
$the_gallery.find('.et_pb_gallery_pagination a.page-' + page_to).addClass('active').click();
}}
});
}}
$et_pb_gallery.each(function(){
var $the_gallery=$(this);
et_pb_gallery_init($the_gallery);
});
$et_pb_gallery.data('paginating', false);
window.et_pb_gallery_pagination_nav=function($the_gallery){
$the_gallery.on('click', '.et_pb_gallery_pagination a', function(e){
e.preventDefault();
var to_page=$(this).data('page'),
$the_gallery=$(this).parents('.et_pb_gallery'),
$the_gallery_items_container=$the_gallery.find('.et_pb_gallery_items'),
$the_gallery_items=$the_gallery_items_container.find('.et_pb_gallery_item');
if($the_gallery.data('paginating')){
return;
}
$the_gallery.data('paginating', true);
if($(this).hasClass('page-prev')){
to_page=parseInt($(this).parents('ul').find('a.active').data('page')) - 1;
}else if($(this).hasClass('page-next')){
to_page=parseInt($(this).parents('ul').find('a.active').data('page')) + 1;
}
$(this).parents('ul').find('a').removeClass('active');
$(this).parents('ul').find('a.page-' + to_page).addClass('active');
var current_index=$(this).parents('ul').find('a.page-' + to_page).parent().index(),
total_pages=$(this).parents('ul').find('li.page').length;
$(this).parent().nextUntil('.page-' +(current_index + 3)).show();
$(this).parent().prevUntil('.page-' +(current_index - 3)).show();
$(this).parents('ul').find('li.page').each(function(i){
if(!$(this).hasClass('prev')&&!$(this).hasClass('next')){
if(i <(current_index - 3)){
$(this).hide();
}else if(i >(current_index + 1)){
$(this).hide();
}else{
$(this).show();
}
if(total_pages - current_index <=2&&total_pages - i <=5){
$(this).show();
}else if(current_index <=3&&i <=4){
$(this).show();
}}
});
if(to_page > 1){
$(this).parents('ul').find('li.prev').show();
}else{
$(this).parents('ul').find('li.prev').hide();
}
if($(this).parents('ul').find('a.active').hasClass('last-page')){
$(this).parents('ul').find('li.next').hide();
}else{
$(this).parents('ul').find('li.next').show();
}
$the_gallery_items.hide();
var visible_items=$the_gallery_items.filter(function(index){
return $(this).data('page')===to_page;
}).show();
$the_gallery.data('paginating', false);
window.et_pb_set_responsive_grid($the_gallery_items_container, '.et_pb_gallery_item');
setTimeout(function(){
set_gallery_hash($the_gallery);
}, 100);
$('html, body').animate({ scrollTop:$the_gallery.offset().top - 200 }, 200);
});
}
et_pb_gallery_pagination_nav($et_pb_gallery);
if(is_frontend_builder){
et_pb_gallery_pagination_nav($('#et-fb-app'));
}} 
if($et_pb_counter_amount.length){
$et_pb_counter_amount.each(function(){
window.et_bar_counters_init($(this));
});
} 
window.et_countdown_timer=function(timer){
var end_date=parseInt(timer.attr('data-end-timestamp')),
current_date=new Date().getTime() / 1000,
seconds_left=(end_date - current_date);
days=parseInt(seconds_left / 86400);
days=days > 0 ? days:0;
seconds_left=seconds_left % 86400;
hours=parseInt(seconds_left / 3600);
hours=hours > 0 ? hours:0;
seconds_left=seconds_left % 3600;
minutes=parseInt(seconds_left / 60);
minutes=minutes > 0 ? minutes:0;
seconds=parseInt(seconds_left % 60);
seconds=seconds > 0 ? seconds:0;
var $days_section=timer.find('.days > .value').parent('.section'),
$hours_section=timer.find('.hours > .value').parent('.section'),
$minutes_section=timer.find('.minutes > .value').parent('.section'),
$seconds_section=timer.find('.seconds > .value').parent('.section');
if(days==0){
if(! $days_section.hasClass('zero')){
timer.find('.days > .value').html('000').parent('.section').addClass('zero').next().addClass('zero');
}}else{
days_slice=days.toString().length >=3 ? days.toString().length:3;
timer.find('.days > .value').html(('000' + days).slice(-days_slice));
if($days_section.hasClass('zero')){
$days_section.removeClass('zero').next().removeClass('zero');
}}
if(days==0&&hours==0){
if(! $hours_section.hasClass('zero')){
timer.find('.hours > .value').html('00').parent('.section').addClass('zero').next().addClass('zero');
}}else{
timer.find('.hours > .value').html(( '0' + hours).slice(-2));
if($hours_section.hasClass('zero')){
$hours_section.removeClass('zero').next().removeClass('zero');
}}
if(days==0&&hours==0&&minutes==0){
if(! $minutes_section.hasClass('zero')){
timer.find('.minutes > .value').html('00').parent('.section').addClass('zero').next().addClass('zero');
}}else{
timer.find('.minutes > .value').html(( '0' + minutes).slice(-2));
if($minutes_section.hasClass('zero')){
$minutes_section.removeClass('zero').next().removeClass('zero');
}}
if(days==0&&hours==0&&minutes==0&&seconds==0){
if(! $seconds_section.hasClass('zero')){
timer.find('.seconds > .value').html('00').parent('.section').addClass('zero');
}}else{
timer.find('.seconds > .value').html(( '0' + seconds).slice(-2));
if($seconds_section.hasClass('zero')){
$seconds_section.removeClass('zero').next().removeClass('zero');
}}
}
window.et_countdown_timer_labels=function(timer){
if(timer.closest('.et_pb_column_3_8').length||timer.closest('.et_pb_column_1_4').length||timer.children('.et_pb_countdown_timer_container').width() <=400){
timer.find('.days .label').html(timer.find('.days').data('short'));
timer.find('.hours .label').html(timer.find('.hours').data('short'));
timer.find('.minutes .label').html(timer.find('.minutes').data('short'));
timer.find('.seconds .label').html(timer.find('.seconds').data('short'));
}else{
timer.find('.days .label').html(timer.find('.days').data('full'));
timer.find('.hours .label').html(timer.find('.hours').data('full'));
timer.find('.minutes .label').html(timer.find('.minutes').data('full'));
timer.find('.seconds .label').html(timer.find('.seconds').data('full'));
}}
if($et_pb_countdown_timer.length||is_frontend_builder){
window.et_pb_countdown_timer_init=function($et_pb_countdown_timer){
$et_pb_countdown_timer.each(function(){
var timer=$(this);
et_countdown_timer_labels(timer);
et_countdown_timer(timer);
setInterval(function(){
et_countdown_timer(timer);
}, 1000);
});
}
et_pb_countdown_timer_init($et_pb_countdown_timer);
}
if($et_pb_tabs.length||is_frontend_builder){
window.et_pb_tabs_init=function($et_pb_tabs){
var $et_pb_tabs_li=$et_pb_tabs.find('.et_pb_tabs_controls li');
$et_pb_tabs.et_pb_simple_slider({
use_controls:false,
use_arrows:false,
slide:'.et_pb_all_tabs > div',
tabs_animation:true
}).on('et_hashchange', function(event){
var params=event.params;
var $the_tabs=$('#' + event.target.id);
var active_tab=params[0];
if(!$the_tabs.find('.et_pb_tabs_controls li').eq(active_tab).hasClass('et_pb_tab_active')){
$the_tabs.find('.et_pb_tabs_controls li').eq(active_tab).click();
}});
$et_pb_tabs_li.click(function(){
var $this_el=$(this),
$tabs_container=$this_el.closest('.et_pb_tabs').data('et_pb_simple_slider');
if($tabs_container.et_animation_running) return false;
$this_el.addClass('et_pb_tab_active').siblings().removeClass('et_pb_tab_active');
$tabs_container.data('et_pb_simple_slider').et_slider_move_to($this_el.index());
if($this_el.closest('.et_pb_tabs').attr('id')){
var tab_state=[];
tab_state.push($this_el.closest('.et_pb_tabs').attr('id'));
tab_state.push($this_el.index());
tab_state=tab_state.join(et_hash_module_param_seperator);
et_set_hash(tab_state);
}
return false;
});
window.et_pb_set_tabs_height();
}
window.et_pb_tabs_init($et_pb_tabs);
}
if($et_pb_map.length||is_frontend_builder){
function et_pb_init_maps(){
$et_pb_map.each(function(){
et_pb_map_init($(this));
});
}
window.et_pb_map_init=function($this_map_container){
if(typeof google==='undefined'||typeof google.maps==='undefined'){
return;
}
var $this_map=$this_map_container.children('.et_pb_map'),
this_map_grayscale=$this_map_container.attr('data-grayscale')||0,
is_draggable=(et_is_mobile_device&&$this_map.data('mobile-dragging')!=='off')||! et_is_mobile_device,
infowindow_active;
if(this_map_grayscale!==0){
this_map_grayscale='-' + this_map_grayscale.toString();
}
$this_map_container.data('map', new google.maps.Map($this_map[0], {
zoom: parseInt($this_map.attr('data-zoom')),
center: new google.maps.LatLng(parseFloat($this_map.attr('data-center-lat')) , parseFloat($this_map.attr('data-center-lng'))),
mapTypeId: google.maps.MapTypeId.ROADMAP,
scrollwheel: $this_map.attr('data-mouse-wheel')=='on' ? true:false,
draggable: is_draggable,
panControlOptions: {
position: $this_map_container.is('.et_beneath_transparent_nav') ? google.maps.ControlPosition.LEFT_BOTTOM:google.maps.ControlPosition.LEFT_TOP
},
zoomControlOptions: {
position: $this_map_container.is('.et_beneath_transparent_nav') ? google.maps.ControlPosition.LEFT_BOTTOM:google.maps.ControlPosition.LEFT_TOP
},
styles: [ {
stylers: [
{ saturation: parseInt(this_map_grayscale) }
]
} ]
}));
$this_map_container.find('.et_pb_map_pin').each(function(){
var $this_marker=$(this);
var marker=new google.maps.Marker({
position: new google.maps.LatLng(parseFloat($this_marker.attr('data-lat')) , parseFloat($this_marker.attr('data-lng'))),
map: $this_map_container.data('map'),
title: $this_marker.attr('data-title'),
icon: { url: et_pb_custom.builder_images_uri + '/marker.png', size: new google.maps.Size(46, 43), anchor: new google.maps.Point(16, 43) },
shape: { coord: [1, 1, 46, 43], type: 'rect' },
anchorPoint: new google.maps.Point(0, -45)
});
if($this_marker.find('.infowindow').length){
var infowindow=new google.maps.InfoWindow({
content: $this_marker.html()
});
google.maps.event.addListener($this_map_container.data('map'), 'click', function(){
infowindow.close();
});
google.maps.event.addListener(marker, 'click', function(){
if(infowindow_active){
infowindow_active.close();
}
infowindow_active=infowindow;
infowindow.open($this_map_container.data('map'), marker);
});
}});
}
if(window.et_load_event_fired){
et_pb_init_maps();
}else{
if(typeof google!=='undefined'&&typeof google.maps!=='undefined'){
google.maps.event.addDomListener(window, 'load', function(){
et_pb_init_maps();
});
}}
}
if($et_pb_shop.length){
$et_pb_shop.each(function(){
var $this_el=$(this),
icon=$this_el.data('icon')||'';
if(icon===''){
return true;
}
$this_el.find('.et_overlay')
.attr('data-icon', icon)
.addClass('et_pb_inline_icon');
});
}
if($et_pb_circle_counter.length||is_frontend_builder||$('.et_pb_ajax_pagination_container').length > 0){
window.et_pb_circle_counter_init=function($the_counter, animate){
if(0===$the_counter.width()){
return;
}
$the_counter.easyPieChart({
animate: {
duration: 1800,
enabled: true
},
size: 0!==$the_counter.width() ? $the_counter.width():10,
barColor: $the_counter.data('bar-bg-color'),
trackColor: $the_counter.data('color')||'#000000',
trackAlpha: $the_counter.data('alpha')||'0.1',
scaleColor: false,
lineWidth: 5,
onStart: function(){
$(this.el).find('.percent p').css({ 'visibility':'visible' });
},
onStep: function(from, to, percent){
$(this.el).find('.percent-value').text(Math.round(parseInt(percent)));
},
onStop: function(from, to){
$(this.el).find('.percent-value').text($(this.el).data('number-value'));
}});
}
window.et_pb_reinit_circle_counters=function($et_pb_circle_counter){
$et_pb_circle_counter.each(function(){
var $the_counter=$(this);
window.et_pb_circle_counter_init($the_counter, false);
$the_counter.on('containerWidthChanged', function(event){
$the_counter=$(event.target);
$the_counter.find('canvas').remove();
$the_counter.removeData('easyPieChart');
window.et_pb_circle_counter_init($the_counter, true);
});
});
}
window.et_pb_reinit_circle_counters($et_pb_circle_counter);
}
if($et_pb_number_counter.length||is_frontend_builder||$('.et_pb_ajax_pagination_container').length > 0){
window.et_pb_reinit_number_counters=function($et_pb_number_counter){
var is_firefox=$('body').hasClass('gecko');
function et_format_number(number_value, separator){
return number_value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, separator);
}
if($.fn.fitText){
$et_pb_number_counter.find('.percent p').fitText(0.3);
}
$et_pb_number_counter.each(function(){
var $this_counter=$(this);
var separator=$this_counter.data('number-separator');
$this_counter.easyPieChart({
animate: {
duration: 1800,
enabled: true
},
size: is_firefox ? 1:0,
trackColor: false,
scaleColor: false,
lineWidth: 0,
onStart: function (){
$(this.el).addClass('active');
},
onStep: function(from, to, percent){
if(percent!=to)
$(this.el).find('.percent-value').text(et_format_number(Math.round(parseInt(percent)), separator));
},
onStop: function(from, to){
$(this.el).find('.percent-value').text(et_format_number($(this.el).data('number-value'), separator));
}});
});
};
window.et_pb_reinit_number_counters($et_pb_number_counter);
}
window.et_apply_parallax=function(){
if(! $(this).length||typeof $(this)==='undefined'||typeof $(this).offset()==='undefined'){
return;
}
var $this=$(this),
element_top=$this.offset().top,
window_top=$et_window.scrollTop(),
y_pos=(((window_top + $et_window.height()) - element_top) * 0.3),
main_position;
main_position='translate(0, ' + y_pos + 'px)';
$this.children('.et_parallax_bg').css({
'-webkit-transform':main_position,
'-moz-transform':main_position,
'-ms-transform':main_position,
'transform':main_position
});
}
window.et_parallax_set_height=function(){
var $this=$(this),
bg_height;
bg_height=($et_window.height() * 0.3 + $this.innerHeight());
$this.find('.et_parallax_bg').css({ 'height':bg_height });
}
function et_toggle_animation_callback(initial_toggle_state, $module, $section){
if('closed'===initial_toggle_state){
$module.removeClass('et_pb_toggle_close').addClass('et_pb_toggle_open');
}else{
$module.removeClass('et_pb_toggle_open').addClass('et_pb_toggle_close');
}
if($section.hasClass('et_pb_section_parallax')&&!$section.children().hasClass('et_pb_parallax_css')){
$.proxy(et_parallax_set_height, $section)();
}}
$('body').on('click', '.et_pb_toggle_title, .et_fb_toggle_overlay', function(){
var $this_heading=$(this),
$module=$this_heading.closest('.et_pb_toggle'),
$section=$module.parents('.et_pb_section'),
$content=$module.find('.et_pb_toggle_content'),
$accordion=$module.closest('.et_pb_accordion'),
is_accordion=$accordion.length,
is_accordion_toggling=$accordion.hasClass('et_pb_accordion_toggling'),
window_offset_top=$(window).scrollTop(),
fixed_header_height=0,
initial_toggle_state=$module.hasClass('et_pb_toggle_close') ? 'closed':'opened',
$accordion_active_toggle,
module_offset;
if(is_accordion){
if($module.hasClass('et_pb_toggle_open')||is_accordion_toggling){
return false;
}
$accordion.addClass('et_pb_accordion_toggling');
$accordion_active_toggle=$module.siblings('.et_pb_toggle_open');
}
if($content.is(':animated')){
return;
}
if($('body').hasClass('safari')){
$content.fadeToggle(700, function(){
et_toggle_animation_callback(initial_toggle_state, $module, $section);
});
}else{
$content.slideToggle(700, function(){
et_toggle_animation_callback(initial_toggle_state, $module, $section);
});
}
if(is_accordion){
$accordion_active_toggle.find('.et_pb_toggle_content').slideToggle(700, function(){
$accordion_active_toggle.removeClass('et_pb_toggle_open').addClass('et_pb_toggle_close');
$accordion.removeClass('et_pb_accordion_toggling');
module_offset=$module.offset();
if($('#wpadminbar').length){
fixed_header_height +=$('#wpadminbar').height();
}
if($('#top-header').length){
fixed_header_height +=$('#top-header').height();
}
if($('#main-header').length&&! window.et_is_vertical_nav){
fixed_header_height +=$('#main-header').height();
}
if(( window_offset_top + fixed_header_height) > module_offset.top){
$('html, body').animate({ scrollTop:(module_offset.top - fixed_header_height - 50) });
}});
}});
var et_email_reg_html5=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
var $et_contact_container=$('.et_pb_contact_form_container');
if($et_contact_container.length){
$et_contact_container.each(function(){
var $this_contact_container=$(this),
$et_contact_form=$this_contact_container.find('form'),
$et_contact_submit=$this_contact_container.find('input.et_pb_contact_submit'),
$et_inputs=$et_contact_form.find('input[type=text], .et_pb_checkbox_handle, input[type=radio]:checked, textarea, .et_pb_contact_select'),
redirect_url=typeof $this_contact_container.data('redirect_url')!=='undefined' ? $this_contact_container.data('redirect_url'):'';
$et_contact_form.find('input[type=checkbox]').on('change', function(){
var $checkbox=$(this);
var $checkbox_field=$checkbox.siblings('input[type=text]:first');
var is_checked=$checkbox.prop('checked');
$checkbox_field.val(is_checked ? $checkbox_field.data('checked'):$checkbox_field.data('unchecked'));
});
$et_contact_form.on('submit', function(event){
var $this_contact_form=$(this),
$this_inputs=$this_contact_form.find('input[type=text], .et_pb_checkbox_handle, .et_pb_contact_field[data-type="radio"], textarea, select'),
this_et_contact_error=false,
$et_contact_message=$this_contact_form.closest('.et_pb_contact_form_container').find('.et-pb-contact-message'),
et_message='',
et_fields_message='',
$this_contact_container=$this_contact_form.closest('.et_pb_contact_form_container'),
$captcha_field=$this_contact_form.find('.et_pb_contact_captcha'),
form_unique_id=typeof $this_contact_container.data('form_unique_num')!=='undefined' ? $this_contact_container.data('form_unique_num'):0,
inputs_list=[];
et_message='<ul>';
$this_inputs.removeClass('et_contact_error');
var hidden_fields=[];
$this_inputs.each(function(){
var $this_el=$(this);
var $this_wrapper=false;
if('checkbox'===$this_el.data('field_type')){
$this_wrapper=$this_el.parents('.et_pb_contact_field');
$this_wrapper.removeClass('et_contact_error');
}
if('radio'===$this_el.data('type')){
$this_el=$this_el.find('input[type="radio"]');
$this_wrapper=$this_el.parents('.et_pb_contact_field');
}
var this_id=$this_el.attr('id');
var this_val=$this_el.val();
var this_label=$this_el.siblings('label:first').text();
var field_type=typeof $this_el.data('field_type')!=='undefined' ? $this_el.data('field_type'):'text';
var required_mark=typeof $this_el.data('required_mark')!=='undefined' ? $this_el.data('required_mark'):'not_required';
var original_id=typeof $this_el.data('original_id')!=='undefined' ? $this_el.data('original_id'):'';
var unchecked=false;
var default_value;
this_label=this_label.replace(/"/g, "&quot;");
if('radio'===field_type){
if(0!==$this_wrapper.find('input[type="radio"]').length){
field_type='radio';
var $firstRadio=$this_wrapper.find('input[type="radio"]:first');
required_mark=typeof $firstRadio.data('required_mark')!=='undefined' ? $firstRadio.data('required_mark'):'not_required';
this_val='';
if($this_wrapper.find('input[type="radio"]:checked')){
this_val=$this_wrapper.find('input[type="radio"]:checked').val();
}}
this_label=$this_wrapper.find('.et_pb_contact_form_label').text();
this_id=$this_wrapper.find('input[type="radio"]:first').attr('name');
original_id=$this_wrapper.attr('data-id');
if(0===$this_wrapper.find('input[type="radio"]:checked').length){
unchecked=true;
}}
if('checkbox'===field_type){
this_val='';
if(0!==$this_wrapper.find('input[type="checkbox"]').length){
field_type='checkbox';
var $checkboxHandle=$this_wrapper.find('.et_pb_checkbox_handle');
required_mark=typeof $checkboxHandle.data('required_mark')!=='undefined' ? $checkboxHandle.data('required_mark'):'not_required';
if($this_wrapper.find('input[type="checked"]:checked')){
this_val=[];
$this_wrapper.find('input[type="checkbox"]:checked').each(function(){
this_val.push($(this).val());
});
this_val=this_val.join(', ');
}}
$this_wrapper.find('.et_pb_checkbox_handle').val(this_val);
this_label=$this_wrapper.find('.et_pb_contact_form_label').text();
this_id=$this_wrapper.find('.et_pb_checkbox_handle').attr('name');
original_id=$this_wrapper.attr('data-id');
if(0===$this_wrapper.find('input[type="checkbox"]:checked').length){
unchecked=true;
}}
if(! $this_el.is(':visible')&&'hidden'!==$this_el.attr('type')&&'radio'!==$this_el.attr('type')){
hidden_fields.push(original_id);
return;
}
if(( 'hidden'===$this_el.attr('type')||'radio'===$this_el.attr('type'))&&! $this_el.parents('.et_pb_contact_field').is(':visible')){
hidden_fields.push(original_id);
return;
}
if(typeof this_id!=='undefined'){
inputs_list.push({ 'field_id':this_id, 'original_id':original_id, 'required_mark':required_mark, 'field_type':field_type, 'field_label':this_label });
}
if('required'===required_mark&&(''===this_val||true===unchecked)){
if(false===$this_wrapper){
$this_el.addClass('et_contact_error');
}else{
$this_wrapper.addClass('et_contact_error');
}
this_et_contact_error=true;
default_value=this_label;
if(''===default_value){
default_value=et_pb_custom.captcha;
}
et_fields_message +='<li>' + default_value + '</li>';
}
if('email'===field_type){
var processed_email=this_val.trim().toLowerCase();
var is_valid_email=et_email_reg_html5.test(processed_email);
if(''!==processed_email&&this_label!==processed_email&&! is_valid_email){
$this_el.addClass('et_contact_error');
this_et_contact_error=true;
if(! is_valid_email){
et_message +='<li>' + et_pb_custom.invalid + '</li>';
}}
}});
if($captcha_field.length&&''!==$captcha_field.val()){
var first_digit=parseInt($captcha_field.data('first_digit')),
second_digit=parseInt($captcha_field.data('second_digit'));
if(parseInt($captcha_field.val())!==first_digit + second_digit){
et_message +='<li>' + et_pb_custom.wrong_captcha + '</li>';
this_et_contact_error=true;
first_digit=Math.floor(( Math.random() * 15) + 1);
second_digit=Math.floor(( Math.random() * 15) + 1);
$captcha_field.data('first_digit', first_digit);
$captcha_field.data('second_digit', second_digit);
$this_contact_form.find('.et_pb_contact_captcha_question').empty().append(first_digit  + ' + ' + second_digit);
}}
if(! this_et_contact_error){
var $href=$(this).attr('action'),
form_data=$(this).serializeArray();
form_data.push({
'name': 'et_pb_contact_email_fields_' + form_unique_id,
'value':JSON.stringify(inputs_list)
});
if(hidden_fields.length > 0){
form_data.push({
'name': 'et_pb_contact_email_hidden_fields_' + form_unique_id,
'value':JSON.stringify(hidden_fields)
});
}
$this_contact_container.removeClass('et_animated').removeAttr('style').fadeTo('fast', 0.2, function(){
$this_contact_container.load($href + ' #' + $this_contact_form.closest('.et_pb_contact_form_container').attr('id') + '> *', form_data, function(responseText){
if(! $(responseText).find('.et_pb_contact_error_text').length){
et_pb_maybe_log_event($this_contact_container, 'con_goal');
if(''!==redirect_url){
window.location.href=redirect_url;
}}
$this_contact_container.fadeTo('fast', 1);
});
});
}
et_message +='</ul>';
if(''!==et_fields_message){
if(et_message!='<ul></ul>'){
et_message='<p class="et_normal_padding">' + et_pb_custom.contact_error_message + '</p>' + et_message;
}
et_fields_message='<ul>' + et_fields_message + '</ul>';
et_fields_message='<p>' + et_pb_custom.fill_message + '</p>' + et_fields_message;
et_message=et_fields_message + et_message;
}
if(et_message!='<ul></ul>'){
$et_contact_message.html(et_message);
if($this_contact_container.parents('.et_pb_section_parallax').length){
$this_contact_container.parents('.et_pb_section_parallax').each(function(){
var $parallax_element=$(this),
$parallax=$parallax_element.children('.et_parallax_bg'),
is_true_parallax=(! $parallax.hasClass('et_pb_parallax_css'));
if(is_true_parallax){
$et_window.trigger('resize');
}});
}}
event.preventDefault();
});
});
}
window.et_pb_play_overlayed_video=function($play_video){
var $this=$play_video,
$video_image=$this.closest('.et_pb_video_overlay'),
$wrapper=$this.closest('.et_pb_video, .et_main_video_container, .et_pb_video_wrap'),
$video_iframe=$wrapper.find('iframe'),
is_embedded=$video_iframe.length ? true:false,
video_iframe_src,
video_iframe_src_splitted,
video_iframe_src_autoplay;
if(is_embedded){
video_iframe_src=$video_iframe.attr('src');
video_iframe_src_splitted=video_iframe_src.split("?");
if(video_iframe_src.indexOf('autoplay=')!==-1){
return;
}
if(typeof video_iframe_src_splitted[1]!=='undefined'){
video_iframe_src_autoplay=video_iframe_src_splitted[0] + "?autoplay=1&amp;" + video_iframe_src_splitted[1];
}else{
video_iframe_src_autoplay=video_iframe_src_splitted[0] + "?autoplay=1";
}
$video_iframe.attr({
'src': video_iframe_src_autoplay
});
}else{
$wrapper.find('video').get(0).play();
}
$video_image.fadeTo(500, 0, function(){
var $image=$(this);
$image.css('display', 'none');
});
};
$('.et_pb_post .et_pb_video_overlay, .et_pb_video .et_pb_video_overlay, .et_pb_video_wrap .et_pb_video_overlay').click(function(){
var $this=$(this);
et_pb_play_overlayed_video($this);
return false;
});
window.et_pb_resize_section_video_bg=function($video){
$element=typeof $video!=='undefined' ? $video.closest('.et_pb_section_video_bg'):$('.et_pb_section_video_bg');
$element.each(function(){
var $this_el=$(this);
if(is_frontend_builder){
$this_el.removeAttr('data-ratio');
$this_el.find('video').removeAttr('style');
}
var el_ratio=parseFloat($this_el.attr('data-ratio'));
var el_width=parseInt($this_el.find('video').attr('width')||$this_el.find('video').width());
var el_height=parseInt($this_el.find('video').attr('height')||$this_el.find('video').height());
var ratio=(! isNaN(el_ratio)) ? el_ratio:(el_width / el_height);
var $video_elements=$this_el.find('.mejs-video, video, object').css('margin', 0);
var  $container=$this_el.closest('.et_pb_section_video').length
? $this_el.closest('.et_pb_section_video')
: $this_el.closest('.et_pb_slides');
var body_width=$container.innerWidth();
var container_height=$container.innerHeight();
var width, height;
if(typeof $this_el.attr('data-ratio')=='undefined'&&!isNaN(ratio)){
$this_el.attr('data-ratio', ratio);
}
if(body_width / container_height < ratio){
width=container_height * ratio;
height=container_height;
}else{
width=body_width;
height=body_width / ratio;
}
$video_elements.width(width).height(height);
if(is_frontend_builder){
setTimeout(function(){
$video_elements.width(width).height(height);
}, 0);
}});
};
window.et_pb_center_video=function($video){
$element=typeof $video!=='undefined' ? $video:$('.et_pb_section_video_bg .mejs-video');
if(! $element.length){
return;
}
$element.each(function(){
var $this_el=$(this);
et_pb_adjust_video_margin($this_el);
if(is_frontend_builder){
setTimeout(function(){
et_pb_adjust_video_margin($this_el);
}, 0);
}
if(typeof $video!=='undefined'){
if($video.closest('.et_pb_slider').length&&! $video.closest('.et_pb_first_video').length){
return false;
}}
});
};
window.et_pb_adjust_video_margin=function($el){
var $video_width=$el.width() / 2;
var $video_width_negative=0 - $video_width;
$el.css("margin-left", $video_width_negative);
}
window.et_fix_slider_height=function($slider){
var $this_slider=$slider||$et_pb_slider;
if(! $this_slider||! $this_slider.length){
return;
}
$this_slider.each(function(){
var $slide_section=$(this).parent('.et_pb_section'),
$slides=$(this).find('.et_pb_slide'),
$slide_containers=$slides.find('.et_pb_container'),
max_height=0,
image_margin=0,
need_image_margin_top=$(this).hasClass('et_pb_post_slider_image_top'),
need_image_margin_bottom=$(this).hasClass('et_pb_post_slider_image_bottom');
if($slide_section.is('.et_pb_section_first')){
return true;
}
$slide_containers.css('height', 0);
$slides.addClass('et_pb_temp_slide');
if(typeof $(this).data('et_pb_simple_slider')==='object'){
$(this).data('et_pb_simple_slider').et_fix_slider_content_images();
}
$slides.each(function(){
var height=parseFloat($(this).innerHeight()),
$slide_image=$(this).find('.et_pb_slide_image'),
adjustedHeight=parseFloat($(this).data('adjustedHeight')),
autoTopPadding=isNaN(adjustedHeight) ? 0:adjustedHeight;
height=(autoTopPadding&&autoTopPadding < height) ?(height - autoTopPadding):height;
if(need_image_margin_top||need_image_margin_bottom){
if($slide_image.length){
image_margin=need_image_margin_top ? parseFloat($slide_image.css('margin-top')):parseFloat($slide_image.css('margin-bottom'));
image_margin +=10;
}else{
$(this).find('.et_pb_container').addClass('et_pb_no_image');
}}
if(0===Math.abs(parseInt($(this).find('.et_pb_slide_description').height()))){
$(this).find('.et_pb_container').addClass('et_pb_empty_slide');
}
if(max_height < height){
max_height=height;
}});
if(( max_height + image_margin) < 1){
$slide_containers.css('height', '');
}else{
$slide_containers.css('height', max_height + image_margin);
}
$slides.removeClass('et_pb_temp_slide');
$slides.filter('.et-pb-active-slide')
.find('.et_pb_slide_image')
.children('img')
.addClass('active');
});
};
function et_fix_nav_direction(){
window_width=$(window).width();
$('.nav li.et-reverse-direction-nav').removeClass('et-reverse-direction-nav');
$('.nav li li ul').each(function(){
var $dropdown=$(this),
dropdown_width=$dropdown.width(),
dropdown_offset=$dropdown.offset(),
$parents=$dropdown.parents('.nav > li');
if(dropdown_offset.left >(window_width - dropdown_width)){
$parents.addClass('et-reverse-direction-nav');
}});
}
et_fix_nav_direction();
et_pb_form_placeholders_init($('.et_pb_newsletter_form, .et_pb_comments_module #commentform'));
$('.et_pb_fullwidth_menu ul.nav').each(function(i){
i++;
et_duplicate_menu($(this), $(this).parents('.et_pb_row').find('div .mobile_nav'), 'mobile_menu' + i, 'et_mobile_menu');
});
$('.et_pb_fullwidth_menu').each(function(){
var this_menu=$(this),
bg_color=this_menu.data('bg_color');
if(bg_color){
this_menu.find('ul').css({ 'background-color':bg_color });
}});
$et_pb_newsletter_button.click(function(event){
et_pb_submit_newsletter($(this), event);
});
window.et_pb_submit_newsletter=function($submit, event){
if($submit.closest('.et_pb_login_form').length||$submit.closest('.et_pb_feedburner_form').length){
et_pb_maybe_log_event($submit.closest('.et_pb_newsletter'), 'con_goal');
return;
}
if(typeof event!=='undefined'){
event.preventDefault();
}
var $newsletter_container=$submit.closest('.et_pb_newsletter'),
$name=$newsletter_container.find('input[name="et_pb_signup_firstname"]'),
$lastname=$newsletter_container.find('input[name="et_pb_signup_lastname"]'),
$email=$newsletter_container.find('input[name="et_pb_signup_email"]'),
list_id=$newsletter_container.find('input[name="et_pb_signup_list_id"]').val(),
$error_message=$newsletter_container.find('.et_pb_newsletter_error').hide(),
provider=$newsletter_container.find('input[name="et_pb_signup_provider"]').val(),
account=$newsletter_container.find('input[name="et_pb_signup_account_name"]').val();
var $success_message=$newsletter_container.find('.et_pb_newsletter_success');
var redirect_url=$newsletter_container.data('redirect_url');
var redirect_query=$newsletter_container.data('redirect_query');
$name.removeClass('et_pb_signup_error');
$lastname.removeClass('et_pb_signup_error');
$email.removeClass('et_pb_signup_error');
$error_message.html('');
var is_valid=true;
if($name.length > 0&&! $name.val()){
$name.addClass('et_pb_signup_error');
is_valid=false;
}
if($lastname.length > 0&&! $lastname.val()){
$lastname.addClass('et_pb_signup_error');
is_valid=false;
}
if(! et_email_reg_html5.test($email.val())){
$email.addClass('et_pb_signup_error');
is_valid=false;
}
if(! is_valid){
return;
}
function get_redirect_query(){
var query={};
if(! redirect_query){
return '';
}
if($name.length > 0&&redirect_query.indexOf('name') > -1){
query.name=$name.val();
}
if($lastname.length > 0&&redirect_query.indexOf('last_name') > -1){
query.last_name=$lastname.val();
}
if(redirect_query.indexOf('email') > -1){
query.email=$email.val();
}
if(redirect_query.indexOf('ip_address') > -1){
query.ip_address=$newsletter_container.data('ip_address');
}
if(redirect_query.indexOf('css_id') > -1){
query.form_id=$newsletter_container.attr('id');
}
return decodeURIComponent($.param(query));
}
$.ajax({
type: "POST",
url: et_pb_custom.ajaxurl,
dataType: "json",
data: {
action:'et_pb_submit_subscribe_form',
et_frontend_nonce:et_pb_custom.et_frontend_nonce,
et_list_id:list_id,
et_firstname:$name.val(),
et_lastname:$lastname.val(),
et_email:$email.val(),
et_provider:provider,
et_account: account
},
beforeSend: function(){
$newsletter_container
.find('.et_pb_newsletter_button')
.addClass('et_pb_button_text_loading')
.find('.et_subscribe_loader')
.show();
},
complete: function(){
$newsletter_container
.find('.et_pb_newsletter_button')
.removeClass('et_pb_button_text_loading')
.find('.et_subscribe_loader')
.hide();
},
success: function(data){
if(! data){
$error_message.html(et_pb_custom.subscription_failed).show();
return;
}
if(data.error){
$error_message.show().append('<h2>').text(data.error);
}
if(data.success){
if(redirect_url){
et_pb_maybe_log_event($newsletter_container, 'con_goal', function(){
var query=get_redirect_query();
if(redirect_url.indexOf('?') > -1){
redirect_url +='&';
}else{
redirect_url +='?';
}
window.location=redirect_url + query;
});
}else{
et_pb_maybe_log_event($newsletter_container, 'con_goal');
$newsletter_container.find('.et_pb_newsletter_form > p').hide();
$success_message.show();
}}
}});
};
window.et_fix_testimonial_inner_width=function(){
var window_width=$(window).width();
if(window_width > 959){
$('.et_pb_testimonial').each(function(){
if(! $(this).is(':visible')){
return;
}
var $testimonial=$(this);
var $portrait=$testimonial.find('.et_pb_testimonial_portrait');
var portrait_width=$portrait.outerWidth(true);
var $testimonial_descr=$testimonial.find('.et_pb_testimonial_description');
var $outer_column=$testimonial.closest('.et_pb_column');
var testimonial_indent      = !($outer_column.hasClass('et_pb_column_1_3')||$outer_column.hasClass('et_pb_column_1_4')||$outer_column.hasClass('et_pb_column_3_8')) ? portrait_width:0;
$testimonial_descr.css('margin-left', testimonial_indent);
});
}else if(window_width > 767){
$('.et_pb_testimonial').each(function(){
if(! $(this).is(':visible')){
return;
}
var $testimonial=$(this);
var $portrait=$testimonial.find('.et_pb_testimonial_portrait');
var portrait_width=$portrait.outerWidth(true);
var $testimonial_descr=$testimonial.find('.et_pb_testimonial_description');
var $outer_column=$testimonial.closest('.et_pb_column');
var testimonial_indent      = !($outer_column.hasClass('et_pb_column_1_4')||$outer_column.hasClass('et_pb_column_3_8')) ? portrait_width:0;
$testimonial_descr.css('margin-left', testimonial_indent);
});
}else{
$('.et_pb_testimonial_description').removeAttr('style');
}}
window.et_fix_testimonial_inner_width();
window.et_pb_video_background_init=function($this_video_background, this_video_background){
var $video_background_wrapper=$this_video_background.closest('.et_pb_section_video_bg');
var onplaying=false;
var onpause=true;
this_video_background.onplaying=function(){
onplaying=true;
onpause=false;
};
this_video_background.onpause=function(){
onplaying=false;
onpause=true;
};
et_waypoint($video_background_wrapper, {
offset: '100%',
handler:function(direction){
if($this_video_background.is(':visible')&&direction==='down'){
if(this_video_background.paused&&! onplaying){
this_video_background.play();
}}else if($this_video_background.is(':visible')&&direction==='up'){
if(! this_video_background.paused&&! onpause){
this_video_background.pause();
}}
}}, 2);
et_waypoint($video_background_wrapper, {
offset: function(){
var video_height=this.element.clientHeight,
toggle_offset=Math.ceil(window.innerHeight / 2);
if(video_height > toggle_offset){
toggle_offset=video_height;
}
return toggle_offset * (-1);
},
handler:function(direction){
if($this_video_background.is(':visible')&&direction==='up'){
if(this_video_background.paused&&! onplaying){
this_video_background.play();
}}else if($this_video_background.is(':visible')&&direction==='down'){
if(! this_video_background.paused&&! onpause){
this_video_background.pause();
}}
}}, 2);
};
function et_waypoint($element, options, max_instances){
max_instances=max_instances||$element.data('et_waypoint_max_instances')||1;
var current_instances=$element.data('et_waypoint')||[];
if(current_instances.length < max_instances){
var new_instances=$element.waypoint(options);
if(new_instances&&new_instances.length > 0){
current_instances.push(new_instances[0]);
$element.data('et_waypoint', current_instances);
}}else{
for(var i=0; i < current_instances.length; i++){
current_instances[i].context.refresh();
}}
}
function et_get_offset(element, fallback){
var section_index=element.parents('.et_pb_section').index(),
section_length=$('.et_pb_section').length - 1,
row_index=element.parents('.et_pb_row').index(),
row_length=element.parents('.et_pb_section').children().length - 1;
if(section_index===section_length&&row_index===row_length){
return 'bottom-in-view';
}
return fallback;
}
function et_animate_element($element){
var animation_style=$element.attr('data-animation-style');
var animation_repeat=$element.attr('data-animation-repeat');
var animation_duration=$element.attr('data-animation-duration');
var animation_delay=$element.attr('data-animation-delay');
var animation_intensity=$element.attr('data-animation-intensity');
var animation_starting_opacity=$element.attr('data-animation-starting-opacity');
var animation_speed_curve=$element.attr('data-animation-speed-curve');
et_remove_animation_data($element);
var starting_opacity=isNaN(parseInt(animation_starting_opacity)) ? 0:parseInt(animation_starting_opacity) * 0.01;
if($.inArray(animation_speed_curve, ['linear', 'ease', 'ease-in', 'ease-out', 'ease-in-out'])===-1){
animation_speed_curve='ease-in-out';
}
$element.css({
'animation-duration':animation_duration,
'animation-delay':animation_delay,
'opacity':starting_opacity,
'animation-timing-function':animation_speed_curve
});
var intensity_css={};
var intensity_percentage=isNaN(parseInt(animation_intensity)) ? 50:parseInt(animation_intensity);
var intensity_animations=['slide', 'zoom', 'flip', 'fold', 'roll'];
var original_animation=false;
var original_direction=false;
for(var i=0; i < intensity_animations.length; i++){
var animation=intensity_animations[i];
if(! animation_style||animation_style.substr(0, animation.length)!==animation){
continue;
}
var original_animation=animation;
var original_direction=animation_style.substr(animation.length, animation_style.length);
if(''!==original_direction){
original_direction=original_direction.toLowerCase();
}
break;
}
if(original_animation!==false&&original_direction!==false){
intensity_css=et_process_animation_intensity(original_animation, original_direction, intensity_percentage);
}
if(! $.isEmptyObject(intensity_css)){
$element.css(intensity_css);
}
$element.addClass('et_animated');
$element.addClass(animation_style);
$element.addClass(animation_repeat);
}
function et_process_animation_data(waypoints_enabled){
if('undefined'!==typeof et_animation_data&&et_animation_data.length > 0){
$('body').css('overflow-x', 'hidden');
$('#page-container').css('overflow-y', 'hidden');
for(var i=0; i < et_animation_data.length; i++){
var animation_entry=et_animation_data[i];
if(! animation_entry.class ||
! animation_entry.style ||
! animation_entry.repeat ||
! animation_entry.duration ||
! animation_entry.delay ||
! animation_entry.intensity ||
! animation_entry.starting_opacity ||
! animation_entry.speed_curve
){
continue;
}
var $animated=$('.' + animation_entry.class);
$animated.attr({
'data-animation-style':animation_entry.style,
'data-animation-repeat':'once'===animation_entry.repeat ? '':'infinite',
'data-animation-duration':animation_entry.duration,
'data-animation-delay':animation_entry.delay,
'data-animation-intensity':animation_entry.intensity,
'data-animation-starting-opacity': animation_entry.starting_opacity,
'data-animation-speed-curve':animation_entry.speed_curve
});
if(true===waypoints_enabled){
if($animated.hasClass('et_pb_circle_counter')){
et_waypoint($animated, {
offset: '65%',
handler: function(){
if($(this.element).data('PieChartHasLoaded')||typeof $(this.element).data('easyPieChart')==='undefined'){
return;
}
$(this.element).data('easyPieChart').update($(this.element).data('number-value'));
$(this.element).data('PieChartHasLoaded', true);
et_animate_element($(this.element));
}});
et_waypoint($animated, {
offset: 'bottom-in-view',
handler: function(){
if($(this.element).data('PieChartHasLoaded')||typeof $(this.element).data('easyPieChart')==='undefined'){
return;
}
$(this.element).data('easyPieChart').update($(this.element).data('number-value'));
$(this.element).data('PieChartHasLoaded', true);
et_animate_element($(this.element));
}});
}else if($animated.hasClass('et_pb_number_counter')){
et_waypoint($animated, {
offset: '75%',
handler: function(){
$(this.element).data('easyPieChart').update($(this.element).data('number-value'));
et_animate_element($(this.element));
}});
et_waypoint($animated, {
offset: 'bottom-in-view',
handler: function(){
$(this.element).data('easyPieChart').update($(this.element).data('number-value'));
et_animate_element($(this.element));
}});
}else{
et_waypoint($animated, {
offset: '100%',
handler: function(){
et_animate_element($(this.element));
}});
}}else{
et_animate_element($animated);
}}
}}
function et_process_animation_intensity(animation, direction, intensity){
var intensity_css={};
switch(animation){
case 'slide':
switch(direction){
case 'top':
var percentage=intensity * -2;
intensity_css={
transform: 'translate3d(0, ' + percentage + '%, 0)'
};
break;
case 'right':
var percentage=intensity * 2;
intensity_css={
transform: 'translate3d(' + percentage + '%, 0, 0)'
};
break;
case 'bottom':
var percentage=intensity * 2;
intensity_css={
transform: 'translate3d(0, ' + percentage + '%, 0)'
};
break;
case 'left':
var percentage=intensity * -2;
intensity_css={
transform: 'translate3d(' + percentage + '%, 0, 0)'
};
break;
default:
var scale=(100 - intensity) * 0.01;
intensity_css={
transform: 'scale3d(' + scale + ', ' + scale + ', ' + scale + ')'
};
break;
}
break;
case 'zoom':
var scale=(100 - intensity) * 0.01;
switch(direction){
case 'top':
intensity_css={
transform: 'scale3d(' + scale + ', ' + scale + ', ' + scale + ')'
};
break;
case 'right':
intensity_css={
transform: 'scale3d(' + scale + ', ' + scale + ', ' + scale + ')'
};
break;
case 'bottom':
intensity_css={
transform: 'scale3d(' + scale + ', ' + scale + ', ' + scale + ')'
};
break;
case 'left':
intensity_css={
transform: 'scale3d(' + scale + ', ' + scale + ', ' + scale + ')'
};
break;
default:
intensity_css={
transform: 'scale3d(' + scale + ', ' + scale + ', ' + scale + ')'
};
break;
}
break;
case 'flip':
switch(direction){
case 'right':
var degree=Math.ceil(( 90 / 100) * intensity);
intensity_css={
transform: 'perspective(2000px) rotateY(' + degree+ 'deg)'
};
break;
case 'left':
var degree=Math.ceil(( 90 / 100) * intensity) * -1;
intensity_css={
transform: 'perspective(2000px) rotateY(' + degree+ 'deg)'
};
break;
case 'top':
default:
var degree=Math.ceil(( 90 / 100) * intensity);
intensity_css={
transform: 'perspective(2000px) rotateX(' + degree+ 'deg)'
};
break;
case 'bottom':
var degree=Math.ceil(( 90 / 100) * intensity) * -1;
intensity_css={
transform: 'perspective(2000px) rotateX(' + degree+ 'deg)'
};
break;
}
break;
case 'fold':
switch(direction){
case 'top':
var degree=Math.ceil(( 90 / 100) * intensity) * -1;
intensity_css={
transform: 'perspective(2000px) rotateX(' + degree + 'deg)'
};
break;
case 'bottom':
var degree=Math.ceil(( 90 / 100) * intensity);
intensity_css={
transform: 'perspective(2000px) rotateX(' + degree + 'deg)'
};
break;
case 'left':
var degree=Math.ceil(( 90 / 100) * intensity);
intensity_css={
transform: 'perspective(2000px) rotateY(' + degree + 'deg)'
};
break;
case 'right':
default:
var degree=Math.ceil(( 90 / 100) * intensity) * -1;
intensity_css={
transform: 'perspective(2000px) rotateY(' + degree + 'deg)'
};
break;
}
break;
case 'roll':
switch(direction){
case 'right':
case 'bottom':
var degree=Math.ceil(( 360 / 100) * intensity) * -1;
intensity_css={
transform: 'rotateZ(' + degree + 'deg)'
};
break;
case 'top':
case 'left':
var degree=Math.ceil(( 360 / 100) * intensity);
intensity_css={
transform: 'rotateZ(' + degree + 'deg)'
}
break;
default:
var degree=Math.ceil(( 360 / 100) * intensity);
intensity_css={
transform: 'rotateZ(' + degree + 'deg)'
};
break;
}
break;
}
return intensity_css;
}
function et_has_animation_data($element){
var has_animation=false;
if('undefined'!==typeof et_animation_data&&et_animation_data.length > 0){
for(var i=0; i < et_animation_data.length; i++){
var animation_entry=et_animation_data[i];
if(! animation_entry.class){
continue;
}
if($element.hasClass(animation_entry.class)){
has_animation=true;
break;
}}
}
return has_animation;
}
function et_get_animation_classes(){
return [
'et_animated', 'infinite',
'fade', 'fadeTop', 'fadeRight', 'fadeBottom', 'fadeLeft',
'slide', 'slideTop', 'slideRight', 'slideBottom', 'slideLeft',
'bounce', 'bounceTop', 'bounceRight', 'bounceBottom', 'bounceLeft',
'zoom', 'zoomTop', 'zoomRight', 'zoomBottom', 'zoomLeft',
'flip', 'flipTop', 'flipRight', 'flipBottom', 'flipLeft',
'fold', 'foldTop', 'foldRight', 'foldBottom', 'foldLeft',
'roll', 'rollTop', 'rollRight', 'rollBottom', 'rollLeft'
];
}
function et_remove_animation($element){
var animation_classes=et_get_animation_classes();
$element.removeClass(animation_classes.join(' '));
$element.removeAttr('style');
}
function et_remove_animation_data($element){
var attr_name;
var data_attrs_to_remove=[];
var data_attrs=$element.get(0).attributes;
for(var i=0; i < data_attrs.length; i++){
if('data-animation-'===data_attrs[i].name.substring(0, 15)){
data_attrs_to_remove.push(data_attrs[i].name);
}}
$.each(data_attrs_to_remove, function(index, attr_name){
$element.removeAttr(attr_name);
});
};
window.et_reinit_waypoint_modules=et_pb_debounce(function(){
var $et_pb_circle_counter=$('.et_pb_circle_counter'),
$et_pb_number_counter=$('.et_pb_number_counter'),
$et_pb_video_background=$('.et_pb_section_video_bg video');
if($.fn.waypoint&&'yes'!==et_pb_custom.ignore_waypoints){
et_process_animation_data(true);
et_waypoint($('.et_pb_counter_container, .et-waypoint'), {
offset: '75%',
handler: function(){
$(this.element).addClass('et-animated');
}});
et_waypoint($('.et_pb_counter_container, .et-waypoint'), {
offset: 'bottom-in-view',
handler: function(){
$(this.element).addClass('et-animated');
}});
var modules=$('.et_pb_counter_container, .et-waypoint');
modules.each(function(){
et_waypoint($(this), {
offset: et_get_offset($(this), '75%'),
handler: function(){
$(this.element).addClass('et-animated');
}}, 2);
});
if($et_pb_circle_counter.length){
$et_pb_circle_counter.each(function(){
var $this_counter=$(this);
if(! $this_counter.is(':visible')||et_has_animation_data($this_counter)){
return;
}
et_waypoint($this_counter, {
offset: et_get_offset($(this), '65%'),
handler: function(){
if($this_counter.data('PieChartHasLoaded')||typeof $this_counter.data('easyPieChart')==='undefined'){
return;
}
$this_counter.data('easyPieChart').update($this_counter.data('number-value'));
$this_counter.data('PieChartHasLoaded', true);
}}, 2);
});
}
if($et_pb_number_counter.length){
$et_pb_number_counter.each(function(){
var $this_counter=$(this);
if(et_has_animation_data($this_counter)){
return;
}
et_waypoint($this_counter, {
offset: et_get_offset($(this), '75%'),
handler: function(){
$this_counter.data('easyPieChart').update($this_counter.data('number-value'));
}});
});
}
if($('.et_pb_ab_goal').length){
var $et_pb_ab_goal=$('.et_pb_ab_goal');
et_waypoint($et_pb_ab_goal, {
offset: et_get_offset($(this), '80%'),
handler: function(){
if(et_pb_ab_logged_status['read_goal']||! $et_pb_ab_goal.length||! $et_pb_ab_goal.visible(true)){
return;
}
setTimeout(function(){
if($et_pb_ab_goal.length&&$et_pb_ab_goal.visible(true)&&! et_pb_ab_logged_status['read_goal']){
et_pb_ab_update_stats('read_goal');
}}, 3000);
et_pb_maybe_log_event($et_pb_ab_goal, 'view_goal');
}});
}}else{
et_process_animation_data(false);
$('.et_pb_counter_container, .et-waypoint').addClass('et-animated');
if($et_pb_circle_counter.length){
$et_pb_circle_counter.each(function(){
var $this_counter=$(this);
if(! $this_counter.is(':visible')){
return;
}
if($this_counter.data('PieChartHasLoaded')){
return;
}
$this_counter.data('easyPieChart').update($this_counter.data('number-value'));
$this_counter.data('PieChartHasLoaded', true);
});
}
if($et_pb_number_counter.length){
$et_pb_number_counter.each(function(){
var $this_counter=$(this);
$this_counter.data('easyPieChart').update($this_counter.data('number-value'));
});
}
if($('.et_pb_ab_goal').length){
var $et_pb_ab_goal=$('.et_pb_ab_goal');
if(et_pb_ab_logged_status['read_goal']||! $et_pb_ab_goal.length||! $et_pb_ab_goal.visible(true)){
return;
}
setTimeout(function(){
if($et_pb_ab_goal.length&&$et_pb_ab_goal.visible(true)&&! et_pb_ab_logged_status['read_goal']){
et_pb_ab_update_stats('read_goal');
}}, 3000);
et_pb_maybe_log_event($et_pb_ab_goal, 'view_goal');
}}
if($et_pb_video_background.length){
$et_pb_video_background.each(function(){
var $this_video_background=$(this);
et_pb_video_background_init($this_video_background, this);
});
}}, 100);
function et_pb_init_ab_test(){
var $et_pb_ab_goal=$('.et_pb_ab_goal'),
et_ab_subject_id=et_pb_get_subject_id();
$.each(et_pb_ab_logged_status, function(key, value){
var cookie_subject='click_goal'===key||'con_short'===key ? '':et_ab_subject_id;
et_pb_ab_logged_status[key]=et_pb_check_cookie_value('et_pb_ab_' + key + '_' + et_pb_custom.page_id + et_pb_custom.unique_test_id + cookie_subject, 'true');
});
if(! et_pb_ab_logged_status['read_page']){
setTimeout(function(){
et_pb_ab_update_stats('read_page');
}, et_pb_ab_bounce_rate);
}
if('on'===et_pb_custom.is_shortcode_tracking&&! et_pb_ab_logged_status['con_short']){
et_pb_set_cookie(365, 'et_pb_ab_shortcode_track_' + et_pb_custom.page_id + '=' + et_pb_custom.page_id + '_' + et_pb_get_subject_id() + '_' + et_pb_custom.unique_test_id);
}
if($et_pb_ab_goal.length){
if($et_pb_ab_goal.hasClass('et_pb_module')&&($et_pb_ab_goal.hasClass('et_pb_button')||$et_pb_ab_goal.find('.et_pb_button').length)){
if(! $et_pb_ab_goal.hasClass('et_pb_contact_form_container')&&! $et_pb_ab_goal.hasClass('et_pb_newsletter')){
var $goal_button=$et_pb_ab_goal.hasClass('et_pb_button') ? $et_pb_ab_goal:$et_pb_ab_goal.find('.et_pb_button');
if($et_pb_ab_goal.hasClass('et_pb_comments_module')){
var page_url=window.location.href,
comment_submitted=-1!==page_url.indexOf('#comment-') ? true:false,
log_conversion=et_pb_check_cookie_value('et_pb_ab_comment_log_' + et_pb_custom.page_id + et_pb_custom.unique_test_id, 'true');
if(comment_submitted&&log_conversion){
et_pb_ab_update_stats('con_goal');
et_pb_set_cookie(0, 'et_pb_ab_comment_log_' + et_pb_custom.page_id + et_pb_custom.unique_test_id + '=true');
}}
$goal_button.click(function(){
if($et_pb_ab_goal.hasClass('et_pb_comments_module')&&! et_pb_ab_logged_status['con_goal']){
et_pb_set_cookie(365, 'et_pb_ab_comment_log_' + et_pb_custom.page_id + et_pb_custom.unique_test_id + '=true');
return;
}
et_pb_maybe_log_event($et_pb_ab_goal, 'click_goal');
});
}}else{
$et_pb_ab_goal.click(function(){
if($et_pb_ab_goal.hasClass('et_pb_shop')&&! et_pb_ab_logged_status['con_goal']){
et_pb_set_cookie(365, 'et_pb_ab_shop_log=' + et_pb_custom.page_id + '_' + et_pb_get_subject_id() + '_' + et_pb_custom.unique_test_id);
}
et_pb_maybe_log_event($et_pb_ab_goal, 'click_goal');
});
}}
}
function et_pb_maybe_log_event($goal_container, event, callback){
var log_event=typeof event==='undefined' ? 'con_goal':event;
if(! $goal_container.hasClass('et_pb_ab_goal')||et_pb_ab_logged_status[ log_event ]){
if('undefined'!==typeof callback){
callback();
}
return;
}
et_pb_ab_update_stats(log_event, callback);
}
function et_pb_ab_update_stats(record_type, set_page_id, set_subject_id, set_test_id, callback){
var subject_id=typeof set_subject_id==='undefined' ? et_pb_get_subject_id():set_subject_id,
page_id=typeof set_page_id==='undefined' ? et_pb_custom.page_id:set_page_id,
test_id=typeof set_test_id==='undefined' ? et_pb_custom.unique_test_id:set_test_id,
stats_data=JSON.stringify({ 'test_id':page_id, 'subject_id':subject_id, 'record_type':record_type }),
cookie_subject='click_goal'===record_type||'con_short'===record_type ? '':subject_id;
et_pb_set_cookie(365, 'et_pb_ab_' + record_type + '_' + page_id + test_id + cookie_subject + '=true');
et_pb_ab_logged_status[record_type]=true;
$.ajax({
type: 'POST',
url: et_pb_custom.ajaxurl,
data: {
action:'et_pb_update_stats_table',
stats_data_array:stats_data,
et_ab_log_nonce:et_pb_custom.et_ab_log_nonce
}}).always(function(){
if('undefined'!==typeof callback){
callback();
}});
}
function et_pb_get_subject_id(){
var $subject=$('.et_pb_ab_subject');
if($subject.length <=0){
return false;
}
var subject_classname=$subject.attr('class'),
subject_id_raw=subject_classname.split('et_pb_ab_subject_id-')[1],
subject_id_clean=subject_id_raw.split(' ')[0],
subject_id_separated=subject_id_clean.split('_'),
subject_id=subject_id_separated[1];
return subject_id;
}
function et_pb_set_cookie_expire(days){
var ms=days*24*60*60*1000;
var date=new Date();
date.setTime(date.getTime() + ms);
return "; expires=" + date.toUTCString();
}
function et_pb_check_cookie_value(cookie_name, value){
return et_pb_get_cookie_value(cookie_name)==value;
}
function et_pb_get_cookie_value(cookie_name){
return et_pb_parse_cookies()[cookie_name];
}
function et_pb_parse_cookies(){
var cookies=document.cookie.split('; ');
var ret={};
for(var i=cookies.length - 1; i >=0; i--){
var el=cookies[i].split('=');
ret[el[0]]=el[1];
}
return ret;
}
function et_pb_set_cookie(expire, cookie_content){
cookie_expire=et_pb_set_cookie_expire(expire);
document.cookie=cookie_content + cookie_expire + "; path=/";
}
function et_pb_get_fixed_main_header_height(){
if(! window.et_is_fixed_nav){
return 0;
}
var fixed_height_onload=typeof $('#main-header').attr('data-fixed-height-onload')==='undefined' ? 0:$('#main-header').attr('data-fixed-height-onload');
return ! window.et_is_fixed_nav ? 0:parseFloat(fixed_height_onload);
}
var fullscreen_section_width={};
var fullscreen_section_timeout={};
window.et_calc_fullscreen_section=function(event){
var isResizing=typeof event==='object'&&event.type==='resize',
$et_window=$(window),
$this_section=$(this),
section_index=$this_section.index('.et_pb_fullscreen'),
timeout=isResizing&&typeof fullscreen_section_width[section_index]!=='undefined'&&event.target.window_width > fullscreen_section_width[section_index] ? 800:0;
fullscreen_section_width[section_index]=$et_window.width();
if(typeof fullscreen_section_timeout[section_index]!=='undefined'){
clearTimeout(fullscreen_section_timeout[section_index]);
}
fullscreen_section_timeout[section_index]=setTimeout(function(){
var $body=$('body'),
this_section_index=$this_section.index('.et_pb_fullwidth_header'),
this_section_offset=$this_section.offset(),
$header=$this_section.children('.et_pb_fullwidth_header_container'),
$header_content=$header.children('.header-content-container'),
$header_image=$header.children('.header-image-container'),
sectionHeight=window.innerHeight||$et_window.height(),
$wpadminbar=$('#wpadminbar'),
has_wpadminbar=$wpadminbar.length,
wpadminbar_height=has_wpadminbar ? $wpadminbar.height():0,
$top_header=$('#top-header'),
has_top_header=$top_header.length,
top_header_height=has_top_header ? $top_header.height():0,
$main_header=$('#main-header'),
has_main_header=$main_header.length,
main_header_height=has_main_header ? $main_header.outerHeight():0,
fixed_main_header_height=et_pb_get_fixed_main_header_height(),
is_mobile_first_module=this_section_offset.top <=(main_header_height + wpadminbar_height),
is_wp_relative_admin_bar=$et_window.width() < 782,
is_desktop_view=$et_window.width() > 980,
is_tablet_view=$et_window.width() <=980&&$et_window.width() >=479,
is_phone_view=$et_window.width() < 479,
overall_header_height=window.et_is_vertical_nav&&is_desktop_view ? wpadminbar_height + top_header_height:wpadminbar_height + top_header_height + main_header_height,
is_first_module=this_section_offset.top <=overall_header_height;
if($main_header.attr('data-height-onload')){
main_header_height=parseFloat($main_header.attr('data-height-onload'));
}
if(has_wpadminbar){
if(is_wp_relative_admin_bar){
if(is_first_module){
sectionHeight -=wpadminbar_height;
}}else{
sectionHeight -=wpadminbar_height;
}}
if(has_top_header){
if(is_desktop_view){
if(et_hide_nav&&! window.et_is_vertical_nav){
if(! is_first_module){
sectionHeight -=top_header_height;
}}else if(! window.et_is_fixed_nav||window.et_is_vertical_nav){
if(is_first_module){
sectionHeight -=top_header_height;
}}else{
sectionHeight -=top_header_height;
}}
}
if(has_main_header){
if(is_desktop_view){
if(et_hide_nav&&! window.et_is_vertical_nav){
if(! is_first_module){
sectionHeight -=fixed_main_header_height;
}}else if(window.et_is_fixed_nav&&! window.et_is_vertical_nav){
if(is_first_module){
sectionHeight -=main_header_height;
}else{
sectionHeight -=fixed_main_header_height;
}}else if(! window.et_is_fixed_nav&&! window.et_is_vertical_nav){
if(is_first_module){
sectionHeight -=main_header_height;
}}
}else{
if(is_first_module){
sectionHeight -=main_header_height;
}}
}
if($body.hasClass('et_transparent_nav')&&$body.hasClass('et_hide_nav')&&0===this_section_index){
$this_section.css('padding-top', '');
}
var section_border_top_width=parseInt($this_section.css('borderTopWidth'));
if(section_border_top_width){
sectionHeight -=section_border_top_width;
}
var section_border_bottom_width=parseInt($this_section.css('borderBottomWidth'));
if(section_border_bottom_width){
sectionHeight -=section_border_bottom_width;
}
$this_section.css('min-height', sectionHeight + 'px');
$header.css('min-height', sectionHeight + 'px');
if($header.hasClass('center')&&$header_content.hasClass('bottom')&&$header_image.hasClass('bottom')){
$header.addClass('bottom-bottom');
}
if($header.hasClass('center')&&$header_content.hasClass('center')&&$header_image.hasClass('center')){
$header.addClass('center-center');
}
if($header.hasClass('center')&&$header_content.hasClass('center')&&$header_image.hasClass('bottom')){
$header.addClass('center-bottom');
var contentHeight=sectionHeight - $header_image.outerHeight(true);
if(contentHeight > 0){
$header_content.css('min-height', contentHeight + 'px');
}}
if($header.hasClass('center')&&$header_content.hasClass('bottom')&&$header_image.hasClass('center')){
$header.addClass('bottom-center');
}
if(( $header.hasClass('left')||$header.hasClass('right'))&&!$header_content.length&&$header_image.length){
$header.css('justify-content', 'flex-end');
}
if($header.hasClass('center')&&$header_content.hasClass('bottom')&&!$header_image.length){
$header_content.find('.header-content').css('margin-bottom', 80 + 'px');
}
if($header_content.hasClass('bottom')&&$header_image.hasClass('center')){
$header_image.find('.header-image').css('margin-bottom', 80 + 'px');
$header_image.css('align-self', 'flex-end');
}}, timeout);
}
window.et_pb_parallax_init=function($this_parallax){
if($this_parallax.hasClass('et_pb_parallax_css')){
return;
}
var $this_parent=$this_parallax.parent();
$.proxy(et_parallax_set_height, $this_parent)();
$.proxy(et_apply_parallax, $this_parent)();
$et_window.on('scroll', $.proxy(et_apply_parallax, $this_parent));
$et_window.on('resize', $.proxy(et_parallax_set_height, $this_parent));
$et_window.on('resize', $.proxy(et_apply_parallax, $this_parent));
$this_parent.find('.et-learn-more .heading-more').click(function(){
setTimeout(function(){
$.proxy(et_parallax_set_height, $this_parent)();
}, 300);
});
}
$(window).resize(function(){
var window_width=$et_window.width(),
et_container_css_width=$et_container.css('width'),
et_container_width_in_pixel=(typeof et_container_css_width!=='undefined') ? et_container_css_width.substr(-1, 1)!=='%':'',
et_container_actual_width=(et_container_width_in_pixel) ? $et_container.width():(( $et_container.width() / 100) * window_width),
containerWidthChanged=et_container_width!==et_container_actual_width;
et_pb_resize_section_video_bg();
et_pb_center_video();
et_fix_slider_height();
et_fix_nav_direction();
$et_pb_fullwidth_portfolio.each(function(){
set_container_height=$(this).hasClass('et_pb_fullwidth_portfolio_carousel') ? true:false;
set_fullwidth_portfolio_columns($(this), set_container_height);
});
if(containerWidthChanged){
$('.container-width-change-notify').trigger('containerWidthChanged');
setTimeout(function(){
$et_pb_filterable_portfolio.each(function(){
set_filterable_grid_items($(this));
});
$et_pb_gallery.each(function(){
if($(this).hasClass('et_pb_gallery_grid')){
set_gallery_grid_items($(this));
}});
}, 100);
et_container_width=et_container_actual_width;
etRecalculateOffset=true;
var $et_pb_circle_counter=$('.et_pb_circle_counter');
if($et_pb_circle_counter.length){
$et_pb_circle_counter.each(function(){
var $this_counter=$(this);
if(! $this_counter.is(':visible')||typeof $this_counter.data('easyPieChart')==='undefined'){
return;
}
$this_counter.data('easyPieChart').update($this_counter.data('number-value'));
});
}
if($et_pb_countdown_timer.length){
$et_pb_countdown_timer.each(function(){
var timer=$(this);
et_countdown_timer_labels(timer);
});
}}
window.et_fix_testimonial_inner_width();
et_audio_module_set();
if($et_pb_counter_amount.length){
$et_pb_counter_amount.each(function(){
window.et_bar_counters_init($(this));
});
} 
});
$(window).ready(function(){
if($.fn.fitVids){
$('.et_pb_slide_video').fitVids();
$('.et_pb_module').fitVids({ customSelector: "iframe[src^='http://www.hulu.com'], iframe[src^='http://www.dailymotion.com'], iframe[src^='http://www.funnyordie.com'], iframe[src^='https://embed-ssl.ted.com'], iframe[src^='http://embed.revision3.com'], iframe[src^='https://flickr.com'], iframe[src^='http://blip.tv'], iframe[src^='http://www.collegehumor.com']"});
}
et_fix_slider_height();
$('section.et_pb_fullscreen').each(function(){
var $this_section=$(this);
$.proxy(et_calc_fullscreen_section, $this_section)();
$et_window.on('resize', $.proxy(et_calc_fullscreen_section, $this_section));
});
});
window.et_pb_fullwidth_header_scroll=function(event){
event.preventDefault();
var window_width=$et_window.width(),
$body=$('body'),
is_wp_relative_admin_bar=window_width < 782,
is_transparent_main_header=$body.hasClass('et_transparent_nav'),
is_hide_nav=$body.hasClass('et_hide_nav'),
is_desktop_view=window_width > 980,
is_tablet_view=window_width <=980&&window_width >=479,
is_phone_view=window_width < 479,
$this_section=$(this).parents('section'),
this_section_offset=$this_section.offset(),
$wpadminbar=$('#wpadminbar'),
$main_header=$('#main-header'),
wpadminbar_height=$wpadminbar.length&&! is_wp_relative_admin_bar ? $wpadminbar.height():0,
top_header_height        = !window.et_is_fixed_nav||!is_desktop_view ? 0:$top_header.height(),
data_height_onload=typeof $main_header.attr('data-height-onload')==='undefined' ? 0:$main_header.attr('data-height-onload');
initial_fixed_difference=$main_header.height()===et_pb_get_fixed_main_header_height()||! is_desktop_view||! window.et_is_fixed_nav||is_transparent_main_header||is_hide_nav ? 0:et_pb_get_fixed_main_header_height() - parseFloat(data_height_onload),
section_bottom=(this_section_offset.top + $this_section.outerHeight(true) + initial_fixed_difference) -(wpadminbar_height + top_header_height + et_pb_get_fixed_main_header_height()),
animate_modified=false;
if($this_section.length){
var fullscreen_scroll_duration=800;
$('html, body').animate({ scrollTop:section_bottom }, {
duration: fullscreen_scroll_duration
});
}}
function et_pb_window_load_scripts(){
et_fix_fullscreen_section();
$('section.et_pb_fullscreen').each(function(){
var $this_section=$(this);
$.proxy(et_calc_fullscreen_section, $this_section)();
});
$('.et_pb_fullwidth_header_scroll').on('click', 'a', et_pb_fullwidth_header_scroll);
setTimeout(function(){
$('.et_pb_preload').removeClass('et_pb_preload');
}, 500);
if($.fn.hashchange){
$(window).hashchange(function(){
var hash=window.location.hash.substring(1);
process_et_hashchange(hash);
});
$(window).hashchange();
}
if($et_pb_parallax.length&&!et_is_mobile_device){
$et_pb_parallax.each(function(){
et_pb_parallax_init($(this));
});
}
et_audio_module_set();
window.et_reinit_waypoint_modules();
if($('.et_audio_content').length){
$(window).trigger('resize');
}}
if(window.et_load_event_fired){
et_pb_window_load_scripts();
}else{
$(window).load(function(){
et_pb_window_load_scripts();
});
}
if($('.et_section_specialty').length){
$('.et_section_specialty').each(function(){
var this_row=$(this).find('.et_pb_row');
this_row.find('>.et_pb_column:not(.et_pb_specialty_column)').addClass('et_pb_column_single');
});
}
if($('.et_pb_section_parallax').length&&$('.et_pb_map').length){
$('body').addClass('parallax-map-support');
}
$('.et_pb_widget_area ' + et_pb_custom.widget_search_selector).each(function(){
var $search_wrap=$(this),
$search_input_submit=$search_wrap.find('input[type="submit"]'),
search_input_submit_text=$search_input_submit.attr('value'),
$search_button=$search_wrap.find('button'),
search_button_text=$search_button.text(),
has_submit_button=$search_input_submit.length||$search_button.length ? true:false,
min_column_width=150;
if(! $search_wrap.find('input[type="text"]').length&&! $search_wrap.find('input[type="search"]').length){
return;
}
if(! has_submit_button){
$search_wrap.addClass('et-no-submit-button');
}
if($search_wrap.width() < 150){
$search_wrap.addClass('et-narrow-wrapper');
}
if($search_input_submit.length&&(typeof search_input_submit_text=='undefined'||search_input_submit_text==='')){
$search_input_submit.remove();
$search_wrap.addClass('et-no-submit-button');
}
if($search_button.length&&(typeof search_button_text=='undefined'||search_button_text==='')){
$search_button.remove();
$search_wrap.addClass('et-no-submit-button');
}});
$('body').on('click', '.et_pb_ajax_pagination_container .wp-pagenavi a,.et_pb_ajax_pagination_container .pagination a', function(){
var this_link=$(this);
var href=this_link.attr('href');
var current_href=window.location.href;
var module_classes=this_link.closest('.et_pb_module').attr('class').split(' ');
var module_class_processed='';
var $current_module;
var animation_classes=et_get_animation_classes();
window.et_pb_ajax_pagination_cache=window.et_pb_ajax_pagination_cache||[];
$.each(module_classes, function(index, value){
if($.inArray(value, animation_classes)!==-1){
return;
}
if(''!==value.trim()){
module_class_processed +='.' + value;
}});
$current_module=$(module_class_processed);
et_remove_animation($current_module);
if(typeof window.et_pb_ajax_pagination_cache[ href + module_class_processed ]!=='undefined'){
$current_module.fadeTo('slow', 0.2, function(){
$current_module.find('.et_pb_ajax_pagination_container').replaceWith(window.et_pb_ajax_pagination_cache[ href + module_class_processed ]);
et_pb_set_paginated_content($current_module, true);
});
}else{
if(typeof window.et_pb_ajax_pagination_cache[ current_href + module_class_processed ]==='undefined'){
window.et_pb_ajax_pagination_cache[ current_href + module_class_processed ]=$current_module.find('.et_pb_ajax_pagination_container');
}
$current_module.fadeTo('slow', 0.2, function(){
jQuery.get(href, function(page){
var $page=jQuery(page);
var $style=$page.filter('#et-builder-module-design-cached-inline-styles');
var $content=$page.find(module_class_processed + ' .et_pb_ajax_pagination_container').prepend($style);
et_remove_animation($content.find('.et_animated'));
$current_module.find('.et_pb_ajax_pagination_container').replaceWith($content);
window.et_pb_ajax_pagination_cache[ href + module_class_processed ]=$content;
et_pb_set_paginated_content($current_module, false);
});
});
}
return false;
});
function et_pb_set_paginated_content($current_module, is_cache){
if(typeof $current_module.find('.et_pb_salvattore_content').attr('data-columns')!=='undefined'){
if(! is_cache){
salvattore.registerGrid($current_module.find('.et_pb_salvattore_content')[0]);
}
salvattore.recreateColumns($current_module.find('.et_pb_salvattore_content')[0]);
$current_module.find('.et_pb_post').css({ 'opacity':'1' });
}
if($current_module.find('.et_audio_container').length > 0&&typeof wp!=='undefined'&&typeof wp.mediaelement!=='undefined'&&typeof wp.mediaelement.initialize==='function'){
wp.mediaelement.initialize();
$(window).trigger('resize');
}
if($current_module.find('.et-waypoint, .et_pb_circle_counter, .et_pb_number_counter').length > 0){
$current_module.find('.et-waypoint, .et_pb_circle_counter, .et_pb_number_counter').each(function(){
var $waypoint_module=$(this);
if($waypoint_module.hasClass('et_pb_circle_counter')){
window.et_pb_reinit_circle_counters($waypoint_module);
}
if($waypoint_module.hasClass('et_pb_number_counter')){
window.et_pb_reinit_number_counters($waypoint_module);
}
if($waypoint_module.find('.et_pb_counter_amount').length > 0){
$waypoint_module.find('.et_pb_counter_amount').each(function(){
window.et_bar_counters_init($(this));
});
}
$(this).css({ 'opacity': '1'});
window.et_reinit_waypoint_modules();
});
}
if($current_module.find('.et_pb_slider').length > 0){
$current_module.find('.et_pb_slider').each(function(){
et_pb_slider_init($(this));
});
}
$current_module.on('click', '.et_pb_video_overlay', function(e){
e.preventDefault();
et_pb_play_overlayed_video($(this));
})
$current_module.fitVids({ customSelector: "iframe[src^='http://www.hulu.com'], iframe[src^='http://www.dailymotion.com'], iframe[src^='http://www.funnyordie.com'], iframe[src^='https://embed-ssl.ted.com'], iframe[src^='http://embed.revision3.com'], iframe[src^='https://flickr.com'], iframe[src^='http://blip.tv'], iframe[src^='http://www.collegehumor.com']"});
$current_module.fadeTo('slow', 1);
window.et_shortcodes_init($current_module);
$('html, body').animate({
scrollTop:($current_module.offset().top -($('#main-header').innerHeight() + $('#top-header').innerHeight() + 50))
});
}
window.et_pb_search_init=function($search){
var $input_field=$search.find('.et_pb_s');
var $button=$search.find('.et_pb_searchsubmit');
var input_padding=$search.hasClass('et_pb_text_align_right') ? 'paddingLeft':'paddingRight';
var disabled_button=$search.hasClass('et_pb_hide_search_button');
var buttonHeight=$button.outerHeight();
var buttonWidth=$button.outerWidth();
var inputHeight=$input_field.innerHeight();
$button.css({ 'position':'relative' });
if(buttonHeight > inputHeight){
$input_field.innerHeight(buttonHeight);
}
if(! disabled_button){
$input_field.css(input_padding, buttonWidth + 10);
}
$button.css({ 'position':'' });
}
window.et_pb_search_percentage_custom_margin_fix=function($search){
var inputMargin=$search.find('.et_pb_s').css('margin').split(' ');
var inputMarginObj={};
switch(inputMargin.length){
case 4:
inputMarginObj={
top: inputMargin[0],
right: inputMargin[1],
bottom: inputMargin[2],
left: inputMargin[3],
};
break;
case 2:
inputMarginObj={
top: inputMargin[0],
right: inputMargin[1],
bottom: inputMargin[0],
left: inputMargin[1],
};
break;
default:
inputMarginObj={
top: inputMargin[0],
right: inputMargin[0],
bottom: inputMargin[0],
left: inputMargin[0],
};
break;
}
var inputRight=0 - parseFloat(inputMarginObj.left) + 'px';
$search.find('.et_pb_searchsubmit').css({
top: inputMarginObj.top,
right: inputRight,
bottom: inputMarginObj.bottom,
});
}
if($('.et_pb_search').length){
$('.et_pb_search').each(function(){
var $search=$(this);
if($search.is('.et_pb_search_percentage_custom_margin')){
et_pb_search_percentage_custom_margin_fix($search);
}
et_pb_search_init($search);
});
}
window.et_pb_comments_init=function($comments_module){
var $comments_module_button=$comments_module.find('.comment-reply-link, .submit');
if($comments_module_button.length){
$comments_module_button.addClass('et_pb_button');
if(typeof $comments_module.attr('data-icon')!=='undefined'&&$comments_module.attr('data-icon')!==''){
$comments_module_button.attr('data-icon', $comments_module.attr('data-icon'));
$comments_module_button.addClass('et_pb_custom_button_icon');
}}
};
if($('.et_pb_comments_module').length){
$('.et_pb_comments_module').each(function(){
var $comments_module=$(this);
et_pb_comments_init($comments_module);
});
}
window.et_fix_pricing_currency_position();
$('.et_pb_contact_form_container').each(function(){
var $form=$(this);
$form.on('change', 'input, textarea, select', function(){
var trigger_id=$(this).closest('[data-id]').data('id');
et_conditional_check($form, trigger_id);
});
et_conditional_check($form);
});
function et_conditional_check($form, trigger_id){
var $conditionals=$form.find('[data-conditional-logic]');
$conditionals
.each(function(){
var $conditional=$(this);
var rules=$conditional.data('conditional-logic');
var relation=$conditional.data('conditional-relation');
var matched_rules=[];
for(var i=0; i < rules.length; i++){
var ruleset=rules[i];
var check_id=ruleset[0];
var check_type=ruleset[1];
var check_value=ruleset[2];
var $wrapper=$form.find('.et_pb_contact_field[data-id="' + check_id + '"]');
var field_id=$wrapper.data('id');
var field_type=$wrapper.data('type');
var field_value;
if(trigger_id&&check_id!==trigger_id){
return;
}
if(! $wrapper.is(':visible')){
continue;
}
switch(field_type){
case 'input':
case 'email':
field_value=$wrapper.find('input').val();
break;
case 'text':
field_value=$wrapper.find('textarea').val();
break;
case 'radio':
field_value=$wrapper.find('input:checked').val()||'';
break;
case 'checkbox':
var $checkbox=$wrapper.find(':checkbox:checked');
var field_value=false;
$checkbox.each(function(){
if(check_value===$(this).val()){
field_value=true;
return false;
}});
check_value=true;
break;
case 'select':
field_value=$wrapper.find('select').val();
break;
}
if('is empty'===check_type||'is not empty'===check_type){
check_type='is empty'===check_type ? 'is':'is not';
check_value='';
if('checkbox'===field_type&&false===field_value){
field_value='';
}}
if('is'===check_type&&field_value!==check_value){
continue;
}
if('is not'===check_type&&field_value===check_value){
continue;
}
var containsRegExp=new RegExp(check_value, 'i');
if('contains'===check_type&&! field_value.match(containsRegExp)){
continue;
}
if('does not contain'===check_type&&field_value.match(containsRegExp)){
continue;
}
var maybeNumericValue=parseInt(field_value);
var maybeNumbericCheckValue=parseInt(check_value);
if(('is greater'===check_type||'is less'===check_type) &&
(isNaN(maybeNumericValue)||isNaN(maybeNumbericCheckValue))
){
continue;
}
if('is greater'===check_type&&maybeNumericValue <=maybeNumbericCheckValue){
continue;
}
if('is less'===check_type&&maybeNumericValue >=maybeNumbericCheckValue){
continue;
}
matched_rules.push(true);
}
$conditional.hide();
var $conditional_input=$conditional.find('input[type="text"]');
var conditional_pattern=$conditional_input.attr('pattern');
$conditional_input.attr('novalidate', 'novalidate');
$conditional_input.attr('data-pattern', conditional_pattern);
$conditional_input.removeAttr('pattern');
if('all'===relation&&rules.length===matched_rules.length){
$conditional.show();
$conditional_input.removeAttr('novalidate');
$conditional_input.attr('pattern', $conditional_input.data('pattern'));
}
if('any'===relation&&0 < matched_rules.length){
$conditional.show();
$conditional_input.removeAttr('novalidate');
$conditional_input.attr('pattern', $conditional_input.data('pattern'));
}});
}
if('undefined'!==typeof et_animation_data&&et_animation_data.length > 0){
var maxFullwidthMenuIndex=0;
for(var i=0; i < et_animation_data.length; i++){
var animation_entry=et_animation_data[i];
if(! animation_entry.class){
continue;
}
if($('.' + animation_entry.class).hasClass('et_pb_fullwidth_menu')){
maxFullwidthMenuIndex++;
}}
var $fullWidthMenus=$('.et_pb_fullwidth_menu');
$fullWidthMenus.each(function(){
var $fullWidthMenu=$(this);
$fullWidthMenu.on('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(){
$fullWidthMenu.css('z-index', maxFullwidthMenuIndex - $fullWidthMenu.index('.et_pb_fullwidth_menu'));
});
});
}
$(document).trigger('et_pb_after_init_modules');
});
}
window.et_pb_debounce=function(func, wait, immediate){
var timeout, args, context, timestamp, result;
var now=Date.now||new Date().getTime();
var later=function(){
var last=now - timestamp;
if(last < wait&&last >=0){
timeout=setTimeout(later, wait - last);
}else{
timeout=null;
if(!immediate){
result=func.apply(context, args);
if(!timeout) context=args=null;
}}
};
return function(){
context=this;
args=arguments;
timestamp=now;
var callNow=immediate&&!timeout;
if(!timeout) timeout=setTimeout(later, wait);
if(callNow){
result=func.apply(context, args);
context=args=null;
}
return result;
};};
if(et_pb_custom.is_ab_testing_active&&'yes'===et_pb_custom.is_cache_plugin_active){
$(window).load(function(){
window.et_load_event_fired=true;
});
$.ajax({
type: "POST",
url: et_pb_custom.ajaxurl,
dataType: "json",
data:
{
action:'et_pb_ab_get_subject_id',
et_frontend_nonce:et_pb_custom.et_frontend_nonce,
et_pb_ab_test_id:et_pb_custom.page_id
},
success: function(subject_data){
if(subject_data){
$('.et_pb_subject_placeholder_id_' + subject_data.id).after(subject_data.content);
$('.et_pb_subject_placeholder').remove();
window.et_pb_init_modules();
$('body').trigger('et_pb_ab_subject_ready');
}}
});
}else{
window.et_pb_init_modules();
}
$(document).ready(function(){
(et_pb_box_shadow_elements||[]).map(et_pb_box_shadow_apply_overlay);
})
})(jQuery);
(function($){
$(document).ready(function(){
var user_agent=navigator.userAgent;
var is_opera_edge;
var browser=user_agent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))/i)||[];
var browser_name='';
var browser_class='';
if(/trident/i.test(browser[0])){
browser_name='ie';
}else if(browser[0]==='Chrome'){
is_opera_edge=user_agent.match(/\b(OPR|Edge)/);
if(is_opera_edge!==null){
browser_name=is_opera_edge[0].replace('OPR', 'opera');
}}
if(''===browser_name){
browser_name=''!==browser[0] ? browser[0]:navigator.appName;
}
browser_name=browser_name.toLowerCase();
switch(browser_name){
case 'msie' :
browser_class='ie';
break;
case 'firefox' :
browser_class='gecko';
break;
default :
browser_class=browser_name;
break;
}
if(user_agent.match(/iPhone/)){
browser_class +=' iphone';
}
$('body').addClass(browser_class);
});
})(jQuery);
(function(window, document){
'use strict';
var supportedBrowser=false,
loaded=false;
if(document.querySelector){
if(window.addEventListener){
supportedBrowser=true;
}}
window.wp=window.wp||{};
if(!! window.wp.receiveEmbedMessage){
return;
}
window.wp.receiveEmbedMessage=function(e){
var data=e.data;
if(! data){
return;
}
if(!(data.secret||data.message||data.value)){
return;
}
if(/[^a-zA-Z0-9]/.test(data.secret)){
return;
}
var iframes=document.querySelectorAll('iframe[data-secret="' + data.secret + '"]'),
blockquotes=document.querySelectorAll('blockquote[data-secret="' + data.secret + '"]'),
allowedProtocols=new RegExp('^https?:$', 'i'),
i, source, height, sourceURL, targetURL;
for(i=0; i < blockquotes.length; i++){
blockquotes[ i ].style.display='none';
}
for(i=0; i < iframes.length; i++){
source=iframes[ i ];
if(e.source!==source.contentWindow){
continue;
}
source.removeAttribute('style');
if('height'===data.message){
height=parseInt(data.value, 10);
if(height > 1000){
height=1000;
}else if(~~height < 200){
height=200;
}
source.height=height;
}
if('link'===data.message){
sourceURL=document.createElement('a');
targetURL=document.createElement('a');
sourceURL.href=source.getAttribute('src');
targetURL.href=data.value;
if(! allowedProtocols.test(targetURL.protocol)){
continue;
}
if(targetURL.host===sourceURL.host){
if(document.activeElement===source){
window.top.location.href=data.value;
}}
}}
};
function onLoad(){
if(loaded){
return;
}
loaded=true;
var isIE10=-1!==navigator.appVersion.indexOf('MSIE 10'),
isIE11 = !!navigator.userAgent.match(/Trident.*rv:11\./),
iframes=document.querySelectorAll('iframe.wp-embedded-content'),
iframeClone, i, source, secret;
for(i=0; i < iframes.length; i++){
source=iframes[ i ];
if(! source.getAttribute('data-secret')){
secret=Math.random().toString(36).substr(2, 10);
source.src +='#?secret=' + secret;
source.setAttribute('data-secret', secret);
}
if(( isIE10||isIE11)){
iframeClone=source.cloneNode(true);
iframeClone.removeAttribute('security');
source.parentNode.replaceChild(iframeClone, source);
}}
}
if(supportedBrowser){
window.addEventListener('message', window.wp.receiveEmbedMessage, false);
document.addEventListener('DOMContentLoaded', onLoad, false);
window.addEventListener('load', onLoad, false);
}})(window, document);
!function(e){function t(){var e=location.href;return hashtag=-1!==e.indexOf("#prettyPhoto")?decodeURI(e.substring(e.indexOf("#prettyPhoto")+1,e.length)):!1,hashtag&&(hashtag=hashtag.replace(/<|>/g,"")),hashtag}function i(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function p(){-1!==location.href.indexOf("#prettyPhoto")&&(location.hash="prettyPhoto")}function o(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+e+"=([^&#]*)",p=new RegExp(i),o=p.exec(t);return null==o?"":o[1]}e.prettyPhoto={version:"3.1.6"},e.fn.prettyPhoto=function(a){function s(){e(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(I/2-f.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:f.contentHeight,width:f.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:j/2-f.containerWidth/2<0?0:j/2-f.containerWidth/2,width:f.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(f.height).width(f.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==h(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(f.resized?e("a.pp_expand,a.pp_contract").show():e("a.pp_expand").hide()),!settings.autoplay_slideshow||P||v||e.prettyPhoto.startSlideshow(),settings.changepicturecallback(),v=!0}),m(),a.ajaxcallback()}function n(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){e(".pp_loaderIcon").show(),t()})}function r(t){t>1?e(".pp_nav").show():e(".pp_nav").hide()}function l(e,t){if(resized=!1,d(e,t),imageWidth=e,imageHeight=t,(k>j||b>I)&&doresize&&settings.allow_resize&&!$){for(resized=!0,fitting=!1;!fitting;)k>j?(imageWidth=j-200,imageHeight=t/e*imageWidth):b>I?(imageHeight=I-200,imageWidth=e/t*imageHeight):fitting=!0,b=imageHeight,k=imageWidth;(k>j||b>I)&&l(k,b),d(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(b),containerWidth:Math.floor(k)+2*settings.horizontal_padding,contentHeight:Math.floor(y),contentWidth:Math.floor(w),resized:resized}}function d(t,i){t=parseFloat(t),i=parseFloat(i),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(t),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),y=i+detailsHeight,w=t,b=y+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),k=t}function h(e){return e.match(/youtube\.com\/watch/i)||e.match(/youtu\.be/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\biframe=true\b/i)?"iframe":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":"#"==e.substr(0,1)?"inline":"image"}function c(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=_(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=I/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>I)return;$pp_pic_holder.css({top:projectedTop,left:j/2+scroll_pos.scrollLeft-contentwidth/2})}}function _(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function g(){I=e(window).height(),j=e(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(e(document).height()).width(j)}function m(){isSet&&settings.overlay_gallery&&"image"==h(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((f.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,e.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function u(){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var t=0;t<pp_images.length;t++)pp_images[t].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[t]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=e(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(t){e(this).find("a").click(function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(window).width()}).bind("click",function(){settings.modal||e.prettyPhoto.close()}),e("a.pp_close").bind("click",function(){return e.prettyPhoto.close(),!1}),settings.allow_expand&&e("a.pp_expand").bind("click",function(){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),n(function(){e.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1}),c()}a=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> 						<div class="ppt">&nbsp;</div> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<p class="pp_description"></p> 											<div class="pp_social">{pp_social}</div> 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<div> 									<ul> 										{gallery} 									</ul> 								</div> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&layout=button_count&show_faces=true&width=500&action=like&font&colorscheme=light&height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},a);var f,v,y,w,b,k,P,x=this,$=!1,I=e(window).height(),j=e(window).width();return doresize=!0,scroll_pos=_(),e(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){c(),g()}),a.keyboard_shortcuts&&e(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous"),t.preventDefault();break;case 39:e.prettyPhoto.changePage("next"),t.preventDefault();break;case 27:settings.modal||e.prettyPhoto.close(),t.preventDefault()}}),e.prettyPhoto.initialize=function(){return settings=a,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=e(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?jQuery.map(x,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("href"):void 0}):e.makeArray(e(this).attr("href")),pp_titles=isSet?jQuery.map(x,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):"":void 0}):e.makeArray(e(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(x,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("title")?e(t).attr("title"):"":void 0}):e.makeArray(e(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(e(this).attr("href"),pp_images),rel_index=isSet?set_position:e("a["+settings.hook+"^='"+theRel+"']").index(e(this)),u(this),settings.allow_resize&&e(window).bind("scroll.prettyphoto",function(){c()}),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(t){return"undefined"==typeof settings&&(settings=a,pp_images=e.makeArray(arguments[0]),pp_titles=e.makeArray(arguments[1]?arguments[1]:""),pp_descriptions=e.makeArray(arguments[2]?arguments[2]:""),isSet=pp_images.length>1?!0:!1,set_position=arguments[3]?arguments[3]:0,u(t.target)),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),r(e(pp_images).size()),e(".pp_loaderIcon").show(),settings.deeplinking&&i(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).size()),"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(o("width",pp_images[set_position]))?o("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(o("height",pp_images[set_position]))?o("height",pp_images[set_position]):settings.default_height.toString(),$=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),$=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),$=!0),$pp_pic_holder.fadeIn(function(){switch($ppt.html(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?unescape(pp_titles[set_position]):"&nbsp;"),imgPreloader="",skipInjection=!1,h(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<e(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){f=l(imgPreloader.width,imgPreloader.height),s()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":f=l(movie_width,movie_height),movie_id=o("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,movie+=o("rel",pp_images[set_position])?"?rel="+o("rel",pp_images[set_position]):"?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":f=l(movie_width,movie_height),movie_id=pp_images[set_position];var t=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,i=movie_id.match(t);movie="http://player.vimeo.com/video/"+i[3]+"?title=0&byline=0&portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=f.width+"/embed/?moog_width="+f.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,f.height).replace(/{path}/g,movie);break;case"quicktime":f=l(movie_width,movie_height),f.height+=15,f.contentHeight+=15,f.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":f=l(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":f=l(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,f=l(movie_width,movie_height),doresize=!0,skipInjection=!0,e.get(pp_images[set_position],function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,s()});break;case"custom":f=l(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(e("body")).show(),doresize=!1,f=l(e(myClone).width(),e(myClone).height()),doresize=!0,e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,s())}),!1},e.prettyPhoto.changePage=function(t){currentGalleryPage=0,"previous"==t?(set_position--,set_position<0&&(set_position=e(pp_images).size()-1)):"next"==t?(set_position++,set_position>e(pp_images).size()-1&&(set_position=0)):set_position=t,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),n(function(){e.prettyPhoto.open()})},e.prettyPhoto.changeGalleryPage=function(e){"next"==e?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==e?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed="next"==e||"previous"==e?settings.animation_speed:0,slide_to=currentGalleryPage*itemsPerPage*itemWidth,$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},e.prettyPhoto.startSlideshow=function(){"undefined"==typeof P?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return e.prettyPhoto.stopSlideshow(),!1}),P=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1}),clearInterval(P),P=void 0},e.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(e.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){e(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll.prettyphoto"),p(),settings.callback(),doresize=!0,v=!1,delete settings}))},!pp_alreadyInitialized&&t()&&(pp_alreadyInitialized=!0,hashIndex=t(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){e("a["+a.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",e.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;
jQuery("document").ready(function(t){t(".cooltimeline_cont").each(function(o){var e=t(this).attr("data-animations");"none"!=e&&AOS.init({disable:"mobile",startEvent:"DOMContentLoaded",offset:75,delay:0,duration:750,easing:"ease-in-out-sine",mirror:!0})}),t(".cool_timeline").find("a[class^='ctl_prettyPhoto']").prettyPhoto({social_tools:!1,show_title:!1}),t(".cool_timeline_horizontal").find("a[ref^='prettyPhoto']").prettyPhoto({social_tools:!1,show_title:!1})});